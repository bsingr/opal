#!/usr/bin/env ruby

require 'fileutils'

if ARGV.length != 1
  puts "\nUsage:\n  vn-gen project_name"
else

NAME = ARGV[0]

BASE = File.expand_path(File.join(File.dirname(__FILE__), '..', 'gen', 'browser'))

FileUtils.mkdir_p NAME

Dir.glob(File.join(BASE, '**/*')).each do |file|
  local = /^#{Regexp.escape BASE}\/(.*)$/.match(file)[1]
  local.gsub!(/__PROJECT_NAME__/, NAME)
  # puts local
  if File.directory? file
    FileUtils.mkdir_p local
  else
    File.open(local, 'w') do |out|
      input = File.read file
      input.gsub!(/__PROJECT_NAME__/, NAME)
      out.write input
    end
  end
  
end

end