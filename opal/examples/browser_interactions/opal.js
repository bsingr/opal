
function rb_class_inherited(super_class,klass){if(!super_class)super_class=rb_cObject;};function rb_define_class(id,super_class){var k;if(rb_const_defined(rb_cObject,id)){k=rb_const_get(rb_cObject,id);if(!(k.flags&T_CLASS)){throw id+" is not a class"}
if(k.sup!=super_class){if(k!=rb_cObject){throw id+" is already defined"}}
return k}
if(!super_class){console.log("no superclass given for "+id+" . Object assumed");}
k=rb_define_class_id(id,super_class);rb_class_tbl[id]=k;rb_name_class(k,id);rb_const_set(rb_cObject,id,k);rb_class_inherited(super_class,k);return k;}
function rb_define_class_under(outer,id,super_klass){var klass;if(rb_const_defined_at(outer,id)){klass=rb_const_get_at(outer,id);return klass;}
if(!super_klass){VN.warning('no super class for `'+VN.class2name(outer),+'::'+id+'`, Object assumed');}
klass=rb_define_class_id(id,super_klass);var class_name;if(outer===rb_cObject){class_name=id;}
else{class_name=outer.iv_tbl.__classid__+"::"+id;}
rb_name_class(klass,class_name);rb_const_set(outer,id,klass);rb_class_inherited(super_klass,klass);return klass;};RClass.class2name=function(klass){return klass.$class_name();};RClass.obj_classname=function(obj){return VN.class2name(obj.$klass);};function make_metametaclass(metaclass){console.log("wwowow");var metametaclass,super_of_metaclass;if(metaclass.klass==metaclass){metametaclass=rb_class_boot(null);metametaclass.klass=metametaclass;}
else{metametaclass=rb_class_boot(null);metametaclass.klass=metaclass.klass.klass==metaclass.klass?make_metametaclass(metaclass.klass):metaclass.klass.klass;}
FL_SET(metametaclass,FL_SINGLETON);rb_singleton_class_attached(metametaclass,metaclass);metaclass.klass=metametaclass;super_of_metaclass=metaclass.sup;while(FL_TEST(super_of_metaclass,T_ICLASS)){super_of_metaclass=super_of_metaclass.sup;}
metametaclass.sup=rb_ivar_get(super_of_metaclass.klass,'__attached__')==super_of_metaclass?super_of_metaclass.klass:make_metametaclass(super_of_metaclass);return metametaclass;};function rb_class_real(klass){while(klass.flags&FL_SINGLETON)klass=klass.sup;return klass;}
RClass.real=function(klass){while((klass.$singleton==true)||(klass.$type==VN.ICLASS)){klass=klass.$super}
return klass};function class_alloc(type,klass){var o=new RClass();o.klass=klass;o.flags=type;return o;}
function rb_class_boot(super_class){var k=class_alloc(T_CLASS,rb_cClass);k.sup=super_class;return k;}
function rb_check_inheritable(super_class){if(!FL_TEST(super_class,T_CLASS)){throw'super class must be a Class ('+VN.obj_classname(super_klass)+' given)';}
if(super_class.flags&FL_SINGLETON){throw'can\'t make a subclass of singleton class';}};function rb_class_create(super_klass){rb_check_inheritable(super_klass);if(super_klass==rb_cClass){VN.raise(VN.TypeError,"can't make subclass of Class")}
return rb_class_boot(super_klass);};function rb_define_class_id(id,super_klass){var klass;if(!super_klass)super_klass=rb_cObject;klass=rb_class_create(super_klass);rb_make_metaclass(klass,super_klass.klass);return klass;};function rb_singleton_class(obj){var klass;if(FL_TEST(obj,T_NUMBER)||FL_TEST(obj,T_SYMBOL)){console.log(obj);throw'can\'t define singleton';}
if(FL_TEST(obj.klass,FL_SINGLETON)&&rb_ivar_get(obj.klass,'__attached__')==obj){klass=obj.klass;}
else{var class_id=obj.klass.iv_tbl.__classid__;klass=rb_make_metaclass(obj,obj.klass);obj.klass.iv_tbl.__classid__=class_id;}
if(FL_TEST(obj,T_CLASS)){if(rb_ivar_get(klass.klass,'__attached__')!=klass){}}
return klass;};function rb_name_class(klass,id){rb_ivar_set(klass,'__classid__',id);}
function rb_make_metaclass(klass,super_class){if(FL_TEST(klass,T_CLASS)&&FL_TEST(klass,FL_SINGLETON)){return make_metametaclass(klass);}
else{var meta=rb_class_boot(super_class);FL_SET(meta,FL_SINGLETON);klass.klass=meta;rb_singleton_class_attached(meta,klass);var metasuper=meta.klass;if(metasuper){meta.klass=metasuper;}
return meta;}};function rb_singleton_class_attached(klass,obj){if(FL_TEST(klass,FL_SINGLETON)){rb_ivar_set(klass,'__attached__',obj);}};function rb_define_method(klass,name,func,argc){var m=new rb_method_t();m.argc=argc;m.body=func;rb_add_method(klass,name,m,NOEX_PUBLIC);};function rb_define_private_method(klass,name,func,argc){var m=new rb_method_t();m.argc=argc;m.body=func;rb_add_method(klass,name,m,NOEX_PRIVATE);};function rb_define_private_method(klass,name,func,argc){var m=new rb_method_t();m.argc=argc;m.body=func;rb_add_method(klass,name,m,NOEX_PROTECTED);};function rb_define_singleton_method(klass,name,func,argc){rb_define_method(rb_singleton_class(klass),name,func,argc);};function rb_add_method(klass,name,method){klass.m_tbl[name]=method;method.body.displayName=klass.iv_tbl.__classid__+"#"+name;};function rb_define_alloc_func(klass,func){rb_define_method(rb_singleton_class(klass),'allocate',func,0);};function rb_define_alias(cls,name,old){var m=rb_search_method(cls,old);if(!m)throw"rb_define_alias: no existing method '"+old+"'"
return rb_define_method(cls,name,m.body,m.argc);};
var rb_eException,rb_eSystemExit,rb_eFatal,rb_eSignal,rb_eInterrupt,rb_eStandardError,rb_eTypeError,rb_eArgError,rb_eIndexError,rb_eKeyError,rb_eRangeError,rb_eScriptError,rb_eSyntaxError,rb_eLoadError,rb_eNotImpError,rb_eNameError,rb_eNoMethodError,rb_eRuntimeError;function rb_exc_initialize(exc,id,_){if(arguments[3]&&arguments[3].klass==rb_cString){exc.iv_tbl.message=arguments[3];}
else{exc.iv_tbl.message=exc.klass.iv_tbl.__classid__;}
exc.toString=function(){return exc.klass.iv_tbl.__classid__+": "+exc.iv_tbl.message;};};function rb_exc_inspect(exc){return"#<"+exc.klass.iv_tbl.__classid__+": "+exc.iv_tbl.message+">";};function rb_exc_to_s(exc){return rb_exc_message(exc);};function rb_exc_message(exc){var m;if(!exc.iv_tbl.hasOwnProperty('message')){m="NativeError: "+exc.message;}
else{m=exc.iv_tbl.message;}
exc.iv_tbl={message:m};return m;};function rb_raise(exc,message){var e=rb_obj_alloc(exc);rb_exc_initialize(e,"",nil,message);return rb_exc_raise(e);};function rb_jump_raise(exc,type,message,args){var e=rb_obj_alloc(exc);rb_exc_initialize(e,"",nil,message);e.iv_tbl.args=args;e.iv_tbl.type=type;return rb_exc_raise(e);};function rb_exc_raise(exc){throw exc};function Init_Exception(){rb_eException=rb_define_class("Exception",rb_cObject);Error.prototype.klass=rb_eException;Error.prototype.iv_tbl={};rb_define_singleton_method(rb_eException,"exception",rb_class_new_instance,-1);rb_define_method(rb_eException,"initialize",rb_exc_initialize,-1);rb_define_method(rb_eException,"to_s",rb_exc_to_s,0);rb_define_method(rb_eException,"message",rb_exc_message,0);rb_define_method(rb_eException,"inspect",rb_exc_inspect,0);rb_eSystemExit=rb_define_class("SystemExit",rb_eException);rb_eFatal=rb_define_class("fatal",rb_eException);rb_eSignal=rb_define_class("SignalException",rb_eException);rb_eInterrupt=rb_define_class("Interrupt",rb_eSignal);rb_eStandardError=rb_define_class("StandardError",rb_eException);rb_eTypeError=rb_define_class("TypeError",rb_eStandardError);rb_eArgError=rb_define_class("ArgumentError",rb_eStandardError);rb_eIndexError=rb_define_class("IndexError",rb_eStandardError);rb_eKeyError=rb_define_class("KeyError",rb_eIndexError);rb_eRangeError=rb_define_class("RangeError",rb_eStandardError);rb_eScriptError=rb_define_class("ScriptError",rb_eException);rb_eSyntaxError=rb_define_class("SyntaxError",rb_eScriptError);rb_eLoadError=rb_define_class("LoadError",rb_eScriptError);rb_eNotImpError=rb_define_class("NotImplementedError",rb_eScriptError);rb_eNameError=rb_define_class("NameError",rb_eStandardError);rb_eNoMethodError=rb_define_class("NoMethodError",rb_eNameError);rb_eRuntimeError=rb_define_class("RuntimeError",rb_eStandardError);};
var rb_cFile;function opal_file(){this.content="";this.path="";this.included=false;this.klass=rb_cFile;};var vn_fs_root={};vn_fs_root[".."]=vn_fs_root["."]=vn_fs_root;vn_fs_root['$']="";var opal_files={"/":vn_fs_root};function vn_fs_define_file(f,content){var file=new opal_file();file.content=content;file.path=f;opal_files[f]=file;var p=f.split("/");var i,c=vn_fs_root,b;for(i=1;i<p.length-1;i++){b=p[i];if(c[b]===undefined){c[b]={};c[b]['.']=c[b];c[b]['..']=c;c[b]['$']=b;}
c=c[b];}
c[p[p.length-1]]=content;return file;};function rb_file_s_dirname(cls,id,_,dirname){return dirname.substr(0,dirname.lastIndexOf('/'));};function rb_file_s_join(cls,id,_){return Array.prototype.slice.call(arguments,3).join("/");};function rb_file_s_expand_path(argc,args,obj){var res_stack=[],cur;args=args[0].split("/")
for(var i=0;i<args.length;i++){cur=args[i];if(cur=='..'){res_stack.pop();}
else if(cur=='.'||cur==''){}
else{res_stack.push(cur);}}
return res_stack.join("/");};function Init_File(){rb_cFile=rb_define_class("File",rb_cObject);};
function vn_gem(){this.name="";this.path="";this.content="";this.loaded=false;};function opal_gem_load_at_path(path,callback){var r=new XMLHttpRequest();r.open("GET",path,false);r.onreadystatechange=function(){if(r.readyState==4){if(r.responseText==""||r.status!=200){console.log(path+" failed.");}
else{var g=vn_gem_boot(path,r.responseText);callback(g);}}}
r.send(null);};var vn_gem_all={};function vn_gem_preload(path,name){}
function vn_gem_boot(path,content){var g=new vn_gem();g.path=path;g.content=content;vn_gem_all[path]=g;vm_gem_load(g);return g;}
function vm_gem_load(gem){if(gem.loaded)throw"Cannot load gem twice... something silly happened"
var at=0;var ch='';var text=gem.content;function parse_directory(){var f=get_next(marker_count());console.log("directory is "+f);}
function parse_file(){var f=get_next(marker_count());var c=get_next(marker_count());vn_fs_define_file(f,c);}
function parse_gem_def(){var g=get_next(marker_count());var p=get_next(marker_count());console.log('found '+g+' at '+p);}
function parse_locales(){}
function parse_css(){var content=get_next(marker_count());var style=document.createElement('style');style.setAttribute("type","text/css");if(style.styleSheet){style.styleSheet.cssText=content;}
else{style.appendChild(document.createTextNode(content));}
document.getElementsByTagName('head')[0].appendChild(style);}
var gem_format=(function(){var marker=text.indexOf(';',at);var format=text.substr(at,marker-at);at=marker+1;return format;})();var gem_version=(function(){var marker=text.indexOf(';',at);var version=text.substr(at,marker-at);at=marker+1;return version;})();var next=function(c){if(c&&c!==ch){console.log('bundle parse error: Expected '+c+', but instead got '+ch);}
ch=text.charAt(at);at+=1;return ch;};var get_next=function(i){var result=text.substr(at,i);at+=i;return result;};var marker_count=function(){var len='';next();while(ch>='0'&&ch<='9'){len+=ch;next();}
return parseInt(len);};while(next()){switch(ch){case'd':parse_directory();break;case'f':parse_file();break;case'g':parse_gem_def();break;case'l':parse_locales();break;case's':parse_string_table();break;case'p':parse_platform_list();break;case'c':parse_css();break;default:throw"unknown bundle part "+ch}}
gem.loaded=true;return gem;}
var ISEQ_TYPE_TOP=1,ISEQ_TYPE_METHOD=2,ISEQ_TYPE_BLOCK=3,ISEQ_TYPE_CLASS=4,ISEQ_TYPE_RESCUE=5,ISEQ_TYPE_ENSURE=6,ISEQ_TYPE_EVAL=7,ISEQ_TYPE_MAIN=8;function Iseq(type){this.type=type;this.locals={};this.args={};this.norm_arg_names=[];this.opt_arg_names=[];this.rest_arg_names=[];this.post_arg_names=[];this.block_arg_name=nil;this.local_current="a";this.code=[];this.method_id=null;return this;};Iseq.prototype={push_local_name:function(name){var id=this.local_current;this.local_current=String.fromCharCode(this.local_current.charCodeAt(0)+1);this.locals[name]="_"+id;return"_"+id;},lookup_local:function(name){if(name===null||name===undefined)return null;if(this.locals[name])return this.locals[name];if(this.args[name])return this.args[name];if(this.block_arg_name===name)return"_";return null;},set_method_id:function(method_id){this.method_id=method_id;},push_arg_name:function(arg_name){var id=this.local_current;this.local_current=String.fromCharCode(this.local_current.charCodeAt(0)+1);this.args[arg_name]="_"+id;this.norm_arg_names.push(arg_name);return"_"+id;},set_parent_iseq:function(parent_iseq){},finalize:function(){},write:function(str){this.code.push(str);},toString:function(){var r=[];switch(this.type){case ISEQ_TYPE_TOP:r.push("function($){");r.push("var _ = nil;");if(this.locals.length>0){r.push("var ");for(var i=0;i<this.locals.length;i++){if(i!=0)r.push(",");r.push(this.locals[i]);}
r.push(";");}
r.push(this.code.join(""));r.push("}");break;case ISEQ_TYPE_CLASS:r.push("function($){");r.push(this.code.join(""));r.push("}");break;case ISEQ_TYPE_METHOD:this.deal_with_method_args(r);r.push(this.code.join(""));r.push("}");break;case ISEQ_TYPE_BLOCK:r.push("function($$,__,ID");for(var i=0;i<this.norm_arg_names.length;i++){r.push(",");r.push(this.args[this.norm_arg_names[i]]);}
r.push("){")
r.push("with({$:($$==nil?$:$$),_:(__==nil?_:__)}){");r.push(this.code.join(""));r.push("}");r.push("}");break;default:throw"unknown iseq type in parse.js"}
return r.join("");},deal_with_method_args:function(r){r.push("function($,id,_");r.push("){");}};var OpalRubyGenerator=function OpalRubyGenerator(rubyParser,nodeTree){var iseq_current=null;var iseq_stack=[];function iseq_stack_push(type){iseq_current=new Iseq(type);iseq_stack.push(iseq_current);return iseq_current;};function iseq_stack_pop(){var iseq=iseq_current;iseq_stack.pop();iseq_current=iseq_stack[iseq_stack.length-1];iseq.finalize();return iseq.toString();};function write(opcode){iseq_current.write(opcode);};function write_label(label){iseq_current.write_label(label);};function generate_tree(tree){var top_iseq=iseq_stack_push(ISEQ_TYPE_TOP);for(var i=0;i<tree.length;i++){generate_stmt(tree[i],{full_stmt:true,last_stmt:false});}
return iseq_stack_pop();};function generate_stmt(stmt,context){switch(stmt.type){case'class':generate_class(stmt,context);break;default:console.log("unknown generate_stmt type: "+stmt.type+", "+stmt.value);}};function generate_class(cls,context){if(context.last_stmt&&context.full_stmt)write("return ");var current_iseq=iseq_current;var class_iseq=iseq_stack_push(ISEQ_TYPE_CLASS);class_iseq.set_parent_iseq(current_iseq);if(cls.$stmts){for(var i=0;i<cls.$stmts.length;i++){generate_stmt(cls.$stmts[i],{full_stmt:true,last_stmt:(i===cls.$stmts.length-1)});}}
else{write("return nil;");}
iseq_stack_pop();write("vm_defineclass($,");write("nil");console.log(cls);write(",'"+cls.cpath+"',"+class_iseq.toString()+",0)");if(context.full_stmt)write(";");};return generate_tree(nodeTree);};
var opal_boot_files=[];function ruby_init(){rb_call_inits();};function ruby_script(name){};var rb_cArray;var rb_cDir;var rb_mComparable;var rb_mEnumerable;var rb_cNumber;var rb_cBoolean;var rb_cNilClass;function rb_call_inits(){Init_Object();rb_cNilClass=rb_define_class("NilClass",rb_cObject);rb_cBoolean=rb_define_class("Boolean",rb_cObject);Boolean.prototype.klass=rb_cBoolean;Boolean.prototype.flags=T_OBJECT|T_BOOLEAN;rb_const_set(rb_cObject,"RUBY_VERSION","1.9.1");rb_const_set(rb_cObject,"RUBY_PATCHLEVEL",191);rb_const_set(rb_cObject,"RUBY_PLATFORM","opal");rb_const_set(rb_cObject,"RUBY_RELEASE_DATE","2010.02.27");Init_top_self();rb_cArray=rb_define_class("Array",rb_cObject);Array.prototype.klass=rb_cArray;Array.prototype.flags=T_ARRAY|T_OBJECT;rb_mComparable=rb_define_module("Comparable");rb_mEnumerable=rb_define_module("Enumerable");rb_cNumber=rb_define_class("Number",rb_cObject);Number.prototype.klass=rb_cNumber;Number.prototype.flags=T_NUMBER|T_OBJECT;rb_include_module(rb_cNumber,rb_mComparable);rb_cString=rb_define_class("String",rb_cObject);String.prototype.klass=rb_cString;String.prototype.flags=T_OBJECT|T_STRING;rb_include_module(rb_cString,rb_mComparable);rb_cSymbol=rb_define_class("Symbol",rb_cObject);rb_include_module(rb_cSymbol,rb_mComparable);Init_Exception();rb_cHash=rb_define_class("Hash",rb_cObject);Init_Range();Init_Proc();Init_Regexp();Init_IO();Init_File();rb_cDir=rb_define_class("Dir",rb_cObject);Init_VM();Init_vm_eval();Init_load();Init_JSON();};
var rb_eIOError,rb_cIO;var rb_stdout;var opal_oIOAjax;function opal_oIOAjax_puts(ajax,id,_,str){console.log("need to write to ajax stdout: "+str);};var opal_oIOConsole;function opal_oIOConsole_puts(cons,id,_,str){console.log(vm_send(str,"inspect",[],nil,8));};function rb_f_puts(recv,id,_){var argv=Array.prototype.slice.call(arguments,3)
for(var i=0;i<argv.length;i++){vm_send(rb_stdout,"puts",[argv[i]],nil,8);}};function Init_IO(){rb_eIOError=rb_define_class("IOError",rb_eStandardError);rb_define_method(rb_mKernel,"puts",rb_f_puts,-1);rb_cIO=rb_define_class("IO",rb_cObject);rb_include_module(rb_cIO,rb_mEnumerable);opal_oIOAjax=rb_obj_alloc(rb_cIO);rb_define_singleton_method(opal_oIOAjax,"puts",opal_oIOAjax_puts,1);opal_oIOConsole=rb_obj_alloc(rb_cIO);rb_define_singleton_method(opal_oIOConsole,"puts",opal_oIOConsole_puts,1);rb_stdout=opal_oIOConsole;};
var opal_mJSON;function opal_json_s_parse(cls,source){};function opal_json_2_ruby_json(json){if(json.klass&&json.klass===rb_cArray){var ary=[];for(var i=0;i<json.length;i++){if(json[i].constructor===Object){ary.push(opal_json_2_ruby_json(json[i]));}
else{ary.push(json[i]);}}
return ary;}
var result=rb_hash_new();for(var key in json){if(!json.hasOwnProperty(key))continue;var val=json[key];if(val===null){val=nil;}
else if(val.constructor===Object){val=opal_json_2_ruby_json(val);}
else if(val.klass===rb_cArray){var ary=[];for(var i=0;i<val.length;i++){if(val[i].constructor===Object){ary.push(opal_json_2_ruby_json(val[i]));}
else{ary.push(val[i]);}}
val=ary;}
rb_hash_aset(result,key,val);}
return result;};function Init_JSON(){opal_mJSON=rb_define_module("JSON");rb_define_singleton_method(opal_mJSON,"parse",opal_json_s_parse,1);};if(!this.JSON){this.JSON={};}
(function(){function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+
partial.join(',\n'+gap)+'\n'+
mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+
mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());
var ruby_loadpath;function ruby_init_loadpath(){ruby_loadpath=[""];};function ruby_incpush(path){ruby_loadpath.push(path);};function rb_require_file(file_path){var f=opal_files[file_path];if(f.included){return;}
else{f.included=true;f.content(opal_top_self);}};function rb_f_require(obj,id,_,path){path=rb_file_s_expand_path(1,[path],nil);var correct_path;var found=rb_find_require_path(path);if(found===nil){rb_raise(rb_eLoadError,"no such file to load -- "+path);}
else{rb_require_file(found);return true;}};function rb_find_require_path(path){var try_path;for(var i=0;i<ruby_loadpath.length;i++){try_path=ruby_loadpath[i]+path+'.rb';if(opal_files[try_path]){return try_path;}
try_path=ruby_loadpath[i]+path;if(opal_files[try_path]){return try_path;}}
return nil;};function rb_loadpath(path){var found=rb_find_require_path(path);if(found===nil){throw"cannot find require: "+path+", called from ";}
else{rb_require_file(found);return true;}};function rb_eval_raw(str,filename){var parser=vn_parser(filename,str);var iseq=parser.parse();console.log(iseq);rb_iseq_eval(iseq);};function Init_load(){rb_define_method(rb_cBasicObject,"require",rb_f_require,1);};
var RModule={};function rb_define_module(id){var module;if(rb_const_defined(rb_cObject,id)){module=rb_const_get(rb_cObject,id);if(FL_TEST(module,T_MODULE)){return module;}
throw id+' is not a module';}
module=rb_define_module_id(id);rb_class_tbl[id]=module;rb_const_set(rb_cObject,id,module);return module;};function rb_define_module_under(outer,id){var module;if(VN.const_defined_at(outer,id)){module=VN.const_get_at(outer,id);if(module.type==VN.MODULE){return module;}
VN.type_error(id+' is not a module');}
module=VN.define_module_id(id);VN.const_set(outer,id,module);VN.set_class_path(module,outer,name);return module;};function rb_define_module_id(id){var mdl=rb_mod_create();rb_name_class(mdl,id);return mdl;};function rb_mod_create(){var m=class_alloc(T_MODULE,rb_cModule);m.sup=rb_cObject;return m;}
function rb_include_module(klass,module){var c=klass;while(module){if(module==rb_cObject)break;c=c.sup=rb_include_class_new(module,c);module=module.sup;}
return;klass.sup=rb_include_class_new(module,klass);};function rb_include_class_new(mod,sup){var klass=class_alloc(T_ICLASS,rb_cClass);if(mod.flags&T_ICLASS)mod=mod.klass;klass.iv_tbl=mod.iv_tbl;klass.m_tbl=mod.m_tbl;klass.sup=sup.sup;klass.klass=mod;return klass;};
var rb_cBasicObject,rb_cObject,rb_cModule,rb_cClass;function rb_obj_alloc(klass,id,_){return rb_class_allocate_instance(klass);};function rb_class_allocate_instance(klass,id,_){var o=new RObject();o.klass=klass;FL_SET(o,T_OBJECT);return o;};function rb_obj_dummy(){return nil;};function rb_obj_equal($,id,_,obj){if($==obj)return true;return false;};function rb_obj_not($,id,_){return RTEST($)?false:true;};function rb_obj_not_equal($,id,_,obj){return RTEST(rb_funcall($,"==",obj))?false:true;};function rb_false(){return false;};function rb_true(){return true;};function rb_equal($,id,_,obj){var r;if($==obj)return true;r=rb_funcall($,"==",obj);if(RTEST(r))return true;return false;};function rb_class_real(klass){if(!klass)return nil;while(FL_TEST(klass,FL_SINGLETON)||FL_TEST(klass,T_ICLASS)){klass=klass.sup;}
return klass;};function rb_obj_class(self){return rb_class_real(self.klass);};function rb_any_to_s(self,id,_){var c=rb_obj_classname(self);if(self.flags&T_OBJECT){return"#<"+c+":"+self.hash+">";}
else{return c;}};function rb_obj_classname(obj,id,_){var klass;if(obj.flags&T_OBJECT)
klass=rb_class_real(obj.klass);else
klass=obj;return klass.iv_tbl.__classid__;};function rb_obj_inspect(self,id,_){return rb_any_to_s(self);};function rb_class_new_instance(klass,id,_){var o=rb_obj_alloc(klass);var argv=Array.prototype.slice.call(arguments,3);rb_funcall3(o,"initialize",_,argv);return o;};function rb_mod_const_set(mod,id,_,name,val){rb_const_set(mod,name,val);return val;};function rb_obj_mod_eval(obj,id,_){if(_==nil)throw"no block given for module_eval."
return _.call(_,obj);};function rb_class_initialize(cls,id,_){var sup=(arguments.length>3)?arguments[3]:rb_cObject;cls.m_tbl={};cls.sup=sup;rb_make_metaclass(cls,sup.klass);rb_class_inherited(sup,cls);return cls;};function rb_mod_alias_method(cls,id,_,new_name,old_name){return rb_define_alias(cls,new_name.ptr,old_name.ptr);};function Init_Object(){var metaclass;rb_cBasicObject=boot_defclass('BasicObject',null);rb_cObject=boot_defclass('Object',rb_cBasicObject);rb_cModule=boot_defclass('Module',rb_cObject);rb_cClass=boot_defclass('Class',rb_cModule);rb_const_set(rb_cObject,"BasicObject",rb_cBasicObject);metaclass=rb_make_metaclass(rb_cBasicObject,rb_cClass);metaclass=rb_make_metaclass(rb_cObject,metaclass);metaclass=rb_make_metaclass(rb_cModule,metaclass);metaclass=rb_make_metaclass(rb_cClass,metaclass);boot_defmetametaclass(rb_cModule,metaclass);boot_defmetametaclass(rb_cObject,metaclass);boot_defmetametaclass(rb_cBasicObject,metaclass);rb_mKernel=rb_define_module("Kernel");rb_include_module(rb_cObject,rb_mKernel);rb_define_method(rb_mKernel,"module_eval",rb_obj_mod_eval,0);rb_define_method(rb_cModule,"module_eval",rb_obj_mod_eval,0);rb_define_method(rb_cModule,"alias_method",rb_mod_alias_method,2);rb_define_method(rb_cModule,"const_set",rb_mod_const_set,2);rb_define_method(rb_cClass,"allocate",rb_obj_alloc,0);rb_define_method(rb_cClass,"new",rb_class_new_instance,-1);rb_define_method(rb_cClass,"initialize",rb_class_initialize,-1);};
var opal_hash_yield=0;function opal_yield_hash(){return opal_hash_yield++};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj)return i;}
return-1;};};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');};var rb_cString,rb_cSymbol;var RSymbol=function(ptr){this.hash=opal_yield_hash();this.flags=T_OBJECT|T_SYMBOL;this.klass=rb_cSymbol;this.toString=function(){return"#<Symbol:0x000000 @ptr=\""+this.ptr+"\">";};this.ptr=ptr;return this;};var rb_sym_table={};function ID2SYM(id){if(rb_sym_table.hasOwnProperty(id)){return rb_sym_table[id];}
var sym=new RSymbol(id);rb_sym_table[id]=sym
return sym;};var rb_cHash,rb_envtbl;function RHash(){this.hash=opal_yield_hash();this.klass=nil;this.flags=T_OBJECT|T_HASH;this.ifnone=nil;this.keys=[];this.dict={};return this;};RHash.prototype={toString:function(){return"#<Hash:"+this.hash+">";},hasKey:function(k){return this.keys.indexOf(k)!==-1;},set:function(k,v){if(!this.hasKey(k))this.keys.push(k);this.dict[k]=v;return v;},get:function(k){if(this.hasKey(k))return this.dict[k];return this.ifnone;}};function rb_hash_alloc(klass){var hash=new RHash();hash.klass=klass;hash.ifnone=nil;return hash;};function rb_hash_new(){var k,v,h=rb_hash_alloc(rb_cHash);for(var i=0;i<arguments.length;i++){k=arguments[i],v=arguments[i+1];i++;h.set(k,v);}
return h;};var nil;var NOEX_PUBLIC=0,NOEX_NOSUPER=1,NOEX_PRIVATE=2,NOEX_PROTECTED=4,NOEX_MASK=6,NOEX_BASIC=8;function RTEST(val){return(val!==null&&val!==undefined&&val!==nil&&val!==false)?true:false;};ORTEST=function(lhs,rhs){var res=lhs();if(RTEST(res))return res;return rhs();};ANDTEST=function(lhs,rhs){var res=lhs();if(RTEST(res))return rhs();return res;};function NOTTEST(expr){if(expr==null||expr==undefined||expr==nil||expr==false)return true;return false;};function opal_http_request_new(){try{return new XMLHttpRequest();}catch(e){try{return new ActiveXObject('MSXML2.XMLHTTP');}catch(e){return new ActiveXObject('Microsoft.XMLHTTP');}}};function RObject(klass,type){this.hash=opal_yield_hash();this.toString=function(){return"#<"+this.klass.iv_tbl.__classid__+":"+this.hash+">";};this.klass=klass;this.flags=type;this.iv_tbl={};return this;};function RClass(klass,super_klass){this.hash=opal_yield_hash();this.toString=function(){return this.iv_tbl.__classid__;};this.klass=klass;this.sup=super_klass;this.flags=T_CLASS;this.m_tbl={};this.iv_tbl={};return this;};function rb_method_t(){this.argc=0;this.body=nil;return this;};var T_CLASS=1,T_MODULE=2,T_OBJECT=4,T_BOOLEAN=8,T_STRING=16,T_ARRAY=32,T_NUMBER=64,T_PROC=128,T_SYMBOL=256,T_HASH=512,T_ICLASS=1024;var FL_SINGLETON=2056;function FL_TEST(x,f){return x.flags&f;}
function FL_SET(x,f){x.flags|=f;}
function FL_UNSET(x,f){x.flags&=(~f);}
rb_class_tbl={};rb_global_tbl={};function rb_define_hooked_variable(id,ptr){return rb_gvar_set(id,ptr);};function rb_gvar_get(id){if(id=="$:")return ruby_loadpath;return nil;};function rb_gvar_set(id,val){return rb_global_tbl[id]=val;};function boot_defclass(id,super_class){var o=rb_class_boot(super_class);rb_name_class(o,id);rb_class_tbl[id]=o;rb_const_set((rb_cObject?rb_cObject:o),id,o);return o;};boot_defmetametaclass=function(klass,metametaclass){klass.klass.klass=metametaclass;};obj_alloc=function(klass){var obj=VN$(klass,'allocate');return obj;};class_allocate_instance=function(){var obj=new RObject(this,T_OBJECT);return obj;};obj_dummy=function(){return nil;};equal=function(obj){if(obj==this)return true;var result=this.$funcall('==',[obj]);if(result)return true;return false;};eql=function(obj){return this.$funcall('==',[obj]);};obj_equal=function(obj){return(obj==this)?true:false;};if(document&&document.getElementsByTagName){var processRuby=function(){var tag,tags=document.getElementsByTagName('script');console.log("==== inline tags:");for(var i=0;i<tags.length;i++){tag=tags[i];if(tag.type==='text/ruby'&&!tag.getAttribute('data-src')){console.log(tag);}}};if(window.addEventListener){window.addEventListener('load',processRuby,false);}
else{window.attachEvent('onload',processRuby);}}
setTimeout(function(){opal_init();var tag,tags=document.getElementsByTagName('script');console.log("==== external tags:");for(var i=0;i<tags.length;i++){tag=tags[i];if(tag.type==='text/ruby'&&tag.getAttribute('data-src')){var r=opal_http_request_new();var filename=tag.getAttribute('data-src');r.open('GET',tag.getAttribute('data-src'),true);r.onreadystatechange=function(){if(r.readyState==4){opal_eval(r.responseText,opal_top_self,filename);}};r.send(null);}}},0);function opal_eval(rubyCode,selfContext,filename){var parser=new OpalRubyParser(rubyCode,filename);var result=parser.parse();console.log("Parser result for "+filename+":");console.log(result);if(window.execScript){window.execScript("window.opal_tmp_func = "+result+";");return window.opal_tmp_func(selfContext);}
else{with(window){return eval("("+result+")")(selfContext);}}};
var EXPR_BEG=0,EXPR_END=1,EXPR_ENDARG=2,EXPR_ARG=3,EXPR_CMDARG=4,EXPR_MID=5,EXPR_FNAME=6,EXPR_DOT=7,EXPR_CLASS=8,EXPR_VALUE=9;var OpalRubyParser=function OpalRubyParser(str,filename){ruby_parser.lexer=this;this.scanner=new OpalStringScanner(str);this.str=str;this.filename=filename;this.lex_state=EXPR_BEG;return this;};OpalRubyParser.prototype={setInput:function(){},lex:function(){if(this.done)return"";var token=this.nextToken();if(token[0]===false){this.done=true;return"EOF";}
console.log("yytext is "+token[1]+" for "+token[0]);this.yytext=token[1];return token[0];},upcomingInput:function(){return"";},showPosition:function(){return 0;},parse:function(){ruby_parser.parse(this.str);var res=ruby_parser.__result;return OpalRubyGenerator(this,res);},nextToken:function(){var scanner=this.scanner;var space_seen=false,c='',cmd_start=false;while(true){if(scanner.scan(/^(\ |\t|\r)/)){space_seen=true;continue;}
else if(scanner.scan(/^(\n|#)/)){c=scanner.matched;if(c=='#'){scanner.scan(/^(.*\n)/);}
scanner.scan(/^(\n+)/);if(this.lex_state==EXPR_BEG){continue;}
cmd_start=true;this.lex_state=EXPR_BEG;return['\\n','\\n'];}
else if(scanner.scan(/^[+-]/)){var result=scanner.matched=='+'?'+':'-';var sign=(result=='+')?'tUPLUS':'tUMINUS';if(this.lex_state==EXPR_FNAME||this.lex_state==EXPR_DOT){this.lex_state=EXPR_ARG;if(scanner.scan(/^@/)){return[sign,result+'@'];}
else{return[sign,result];}}
if(scanner.scan(/^\=/)){this.lex_state=EXPR_BEG;return[tOP_ASGN,result];}
if(this.lex_state==EXPR_BEG||this.lex_state==EXPR_MID){this.lex_state=EXPR_BEG;return[sign,result];}
this.lex_state=EXPR_BEG;return[result,scanner.matched];}
else if(scanner.scan(/^\//)){lex_state=EXPR_BEG;return['/',scanner.matched];}
else if(scanner.scan(/^\*\*\=/)){lex_state=EXPR_BEG;return[tOP_ASGN,"**"];}
else if(scanner.scan(/^\*\*/)){return[tPOW,"**"];}
else if(scanner.scan(/^\*\=/)){lex_state=EXPR_BEG;return[tOP_ASGN,"*"];}
else if(scanner.scan(/^\*/)){var r;if(lex_state==EXPR_FNAME){lex_state=EXPR_BEG;r="*";}
else if(lex_state==EXPR_BEG||lex_state==EXPR_MID){r=tSTAR;}
else{lex_state=EXPR_BEG;r="*"}
return[r,scanner.matched];}
else if(scanner.scan(/^\<\=\>/)){return[tCMP,scanner.matched];}
else if(scanner.scan(/^\<\=/)){return[tLEQ,"<="];}
else if(scanner.scan(/^\<\<\=/)){lex_state=EXPR_BEG;return[tOP_ASGN,"<<"];}
else if(scanner.scan(/^\<\</)){if(([EXPR_END,EXPR_DOT,EXPR_ENDARG,EXPR_CLASS].indexOf(lex_state)!=-1)&&space_seen){return[tLSHFT,"<<"];}
lex_state=EXPR_BEG;return[tLSHFT,"<<"];}
else if(scanner.scan(/^\</)){lex_state=EXPR_BEG;return["<","<"];}
else if(scanner.scan(/^\&\&\=/)){lex_state=EXPR_BEG;return[tOP_ASGN,"&&"];}
else if(scanner.scan(/^\&\&/)){lex_state=EXPR_BEG;return[tANDOP,"&&"];}
else if(scanner.scan(/^\&\=/)){lex_state=EXPR_BEG;return[tOP_ASGN,"&"];}
else if(scanner.scan(/^\&/)){var r;if(space_seen&&!scanner.check(/^\s/)){if(lex_state==EXPR_CMDARG)r=tAMPER;else r="&";}
else if(lex_state==EXPR_BEG||lex_state==EXPR_MID){r=tAMPER;}
else{r="&";}
return[r,"&"];}
else if(scanner.scan(/^\"/)){push_string_parse({beg:'"',content:true});return[tSTRING_BEG,scanner.matched];}
else if(scanner.scan(/^\'/)){push_string_parse({beg:"'",content:true});return[tSTRING_BEG,scanner.matched];}
else if(scanner.scan(/^\`/)){push_string_parse({beg:"`",content:true});return[tXSTRING_BEG,scanner.matched];}
else if(scanner.check(/^[0-9]/)){this.lex_state=EXPR_END;if(scanner.scan(/^[\d_]+\.[\d_]+\b/)){return['tFLOAT',scanner.matched];}
else if(scanner.scan(/^[\d_]+\b/)){return['tINTEGER',scanner.matched];}
else if(scanner.scan(/^0(x|X)(\d|[a-f]|[A-F])+/)){return['tINTEGER',scanner.matched];}
else{console.log('unexpected number type');return[false,false];}}
else if(scanner.scan(/^\|\|\=/)){lex_state=EXPR_BEG;return[tOP_ASGN,'||'];}
else if(scanner.scan(/^\|\|/)){lex_state=EXPR_BEG;return[tOROP,scanner.matched];}
else if(scanner.scan(/^\|\=/)){lex_state=EXPR_BEG;return[tOP_ASGN,'|'];}
else if(scanner.scan(/^\|/)){lex_state=EXPR_BEG;return["|",scanner.matched];}
else if(scanner.scan(/^\:/)){if(lex_state===EXPR_END||lex_state===EXPR_ENDARG||scanner.check(/^\s/)){if(!scanner.check(/^\w/)){return[':',scanner.matched];}
lex_state=EXPR_BEG;return[tSYMBEG,scanner.matched];}
lex_state=EXPR_FNAME;return[tSYMBEG,':'];}
else if(scanner.scan(/^\[/)){result=scanner.matched;if(lex_state==EXPR_FNAME||lex_state==EXPR_DOT){lex_state=EXPR_ARG
if(scanner.scan(/^\]\=/)){return[tASET,'[]='];}
else if(scanner.scan(/^\]/)){return[tAREF,'[]'];}
else{throw"error, unexpecrted '[]' token"}}
else if(lex_state==EXPR_BEG||lex_state==EXPR_MID||space_seen){return[tLBRACK,scanner.matched]}
return['[',scanner.matched]}
else if(scanner.scan(/^\{/)){var result;if([EXPR_END,EXPR_CMDARG].indexOf(lex_state)!==-1){result='{';}
else if(lex_state==EXPR_ENDARG){result=tLBRACE_ARG;}
else{result=tLBRACE;}
return[result,scanner.matched];}
else if(scanner.scan(/^\]/)){lex_state=EXPR_END;return[']',scanner.matched];}
else if(scanner.scan(/^\;/)){lex_state=EXPR_BEG;return[';',';'];}
else if(scanner.scan(/^\(/)){var result='(';if(lex_state==EXPR_BEG||lex_state==EXPR_MID){result=tLPAREN;}
else if(space_seen){if(lex_state==EXPR_CMDARG){result=tLPAREN_ARG;}
else if(lex_state==EXPR_ARG){result=tLPAREN2;}}
lex_state=EXPR_BEG;return[result,scanner.matched];}
else if(scanner.scan(/^\)/)){lex_state=EXPR_END;return[')',scanner.matched];}
else if(scanner.scan(/^\}/)){lex_state=EXPR_END;if(current_string_parse()){current_string_parse().content=true}
return['}',scanner.matched];}
else if(scanner.scan(/^\./)){this.lex_state=EXPR_DOT;return['.',scanner.matched];}
else if(scanner.scan(/^\,/)){lex_state=EXPR_BEG;return[',',scanner.matched];}
else if(scanner.scan(/^\@\@\w*/)){lex_state=EXPR_END;return[tCVAR,scanner.matched];}
else if(scanner.scan(/^\@\w*/)){this.lex_state=EXPR_END;return['tIVAR',scanner.matched];}
else if(scanner.scan(/^\=\>/)){lex_state=EXPR_BEG;return[tASSOC,scanner.matched];}
else if(scanner.scan(/^\=/)){lex_state=EXPR_BEG;return['=',scanner.matched];}
else if(scanner.scan(/^\w+[\?\!]?/)){switch(scanner.matched){case'def':this.lex_state=EXPR_FNAME;return['kDEF',scanner.matched];case'end':this.lex_state=EXPR_END;return['kEND',scanner.matched];case'class':if(this.lex_state==EXPR_DOT||this.lex_state==EXPR_FNAME){return['tIDENTIFIER',scanner.matched];}
this.lex_state=EXPR_CLASS;return['kCLASS',scanner.matched];case'module':this.lex_state=EXPR_BEG;return['kMODULE',scanner.matched];case'do':if(lex_state==EXPR_ENDARG){lex_state=EXPR_BEG;return[kDO_BLOCK,scanner.matched];}
return[kDO,scanner.matched];case'if':if(this.lex_state==EXPR_BEG){return['kIF',scanner.matched];}
this.lex_state=EXPR_BEG;return['kIF_MOD',scanner.matched];case'then':return['kTHEN',scanner.matched];case'else':return['kELSE',scanner.matched];case'elsif':return['kELSIF',scanner.matched];case'unless':if(lex_state==EXPR_BEG){return[kUNLESS,scanner.matched];}
lex_state=EXPR_BEG;return[kUNLESS_MOD,scanner.matched];case'self':if(lex_state!=EXPR_FNAME){lex_state=EXPR_END;}
return[kSELF,scanner.matched];case'super':lex_state=EXPR_ARG;return[kSUPER,scanner.matched];case'true':lex_state=EXPR_END;return[kTRUE,scanner.matched];case'false':lex_state=EXPR_END;return[kFALSE,scanner.matched];case'nil':lex_state=EXPR_END;return[kNIL,scanner.matched];case'return':lex_state=EXPR_MID;return[kRETURN,scanner.matched];case'case':lex_state=EXPR_BEG;return[kCASE,scanner.matched];case'when':lex_state=EXPR_BEG;return[kWHEN,scanner.matched];case'yield':lex_state=EXPR_ARG;return[kYIELD,scanner.matched];}
var matched=scanner.matched;if((scanner.peek(2)!='::')&&(scanner.scan(/^\:/))){return['tLABEL',matched+scanner.matched];}
if(this.lex_state==EXPR_FNAME){if(scanner.scan(/^=(?:(?![~>=])|(?==>))/)){this.lex_state=EXPR_END;return['tIDENTIFIER',matched+scanner.matched];}}
if([EXPR_BEG,EXPR_DOT,EXPR_MID,EXPR_ARG,EXPR_CMDARG].indexOf(this.lex_state)!==-1){this.lex_state=EXPR_CMDARG;}
else{this.lex_state=EXPR_END;}
return[matched.match(/^[A-Z]/)?'tCONSTANT':'tIDENTIFIER',matched];}
else{return[false,false];}}}};
var rb_cProc,rb_eLocalJumpError;function rb_obj_define_method(obj){var klass=rb_singleton_class(obj);return rb_mod_define_method(obj);};function rb_mod_define_method(obj,id,_,sym){var id;if(_==nil)throw"#define_method no block given"
if(sym.klass==rb_cString){id=sym;}
else if(sym.klass==rb_cSymbol){id=sym.ptr;}
else{throw"#define_method expects a sym for name"}
return rb_define_method(obj,id,_,-1);};function Init_Proc(){rb_cProc=rb_define_class("Proc",rb_cObject);Function.prototype.klass=rb_cProc;Function.prototype.flags=T_OBJECT|T_PROC;rb_define_method(rb_mKernel,"define_singleton_method",rb_obj_define_method,-1);rb_define_method(rb_cModule,"define_method",rb_mod_define_method,-1);rb_eLocalJumpError=rb_define_class("LocalJumpError",rb_eStandardError);};
var rb_cRange;var RRange=function(beg,end,exc){this.hash=opal_yield_hash();this.klass=rb_cRange;this.flags=T_OBJECT;this.iv_tbl={};this.beg=beg;this.end=end;this.exc=RTEST(exc);return this;};function rb_range_initialize(range,id,_,beg,end,exc){range.beg=beg;range.end=end;range.exc=RTEST(exc);};function rb_range_eqq(range,id,_,other){if(other.klass!==rb_cNumber&&other.klass!==rb_cString){rb_raise(rb_eArgError,"bad value for range");}
var beg=range.beg;var end=range.exc?range.end:range.end-1;if(other>=beg&&other<=end)return true;return false;};function rb_range_eq(range,id,_,other){if(other.klass!==rb_cRange)return false;if(range.beg!==other.beg)return false;if(range.end!==other.end)return false;if(range.exc!==range.exc)return false;return true;};function rb_range_first(range){return range.beg;};function rb_range_last(range){return range.end;};function rb_range_to_a(range){var res=[],end;if(range.beg.klass==rb_cString){end=range.exc?range.end.charCodeAt(0)-1:range.end.charCodeAt(0);for(var i=range.beg.charCodeAt(0);i<=end;i++){res.push(String.fromCharCode(i));}}
if(range.beg.klass==rb_cNumber){end=range.exc?range.end-1:range.end;for(var i=range.beg;i<=end;i++){res.push(i);}}
return res;};function rb_range_to_s(range){return range.beg+(range.exc?"..":"...")+range.end;};function rb_range_inspect(range){return vm_send(range.beg,"inspect",[],nil,8)+(range.exc?"..":"...")+vm_send(range.end,"inspect",[],nil,8);};function rb_range_exclude_end_p(range){return!range.exc;};function Init_Range(){rb_cRange=rb_define_class("Range",rb_cObject);rb_define_method(rb_cRange,"initialize",rb_range_initialize,-1);rb_define_method(rb_cRange,"==",rb_range_eq,1);rb_define_method(rb_cRange,"===",rb_range_eqq,1);rb_define_method(rb_cRange,"first",rb_range_first,-1);rb_define_method(rb_cRange,"last",rb_range_last,-1);rb_define_method(rb_cRange,"to_s",rb_range_to_s,0);rb_define_method(rb_cRange,"inspect",rb_range_inspect,0);rb_define_method(rb_cRange,"to_a",rb_range_to_a,0);rb_define_method(rb_cRange,"exclude_end?",rb_range_exclude_end_p,0);}
var rb_cRegexp,rb_eRegexpError,rb_cMatch;function rb_reg_match_m(reg,id,_,str){var m=reg.exec(str);if(m==null)return nil;return rb_match_new(rb_cMatch,m);};function rb_match_new(match,data){var o=rb_obj_alloc(match);o.iv_tbl.data=data;return o;};function rb_match_inspect(match){return'#<MatchData "'+match.iv_tbl.data[0]+'">';};function rb_match_to_s(match){return match.iv_tbl.data[0];};function rb_match_size(match){return match.iv_tbl.data[0];};function rb_match_aref(match,idx){return match.iv_tbl.data[idx];};function rb_reg_eqq(reg,id,_,str){var m=reg.exec(str);if(m==null)return false;return true;};function Init_Regexp(){rb_cRegexp=rb_define_class("Regexp",rb_cObject);RegExp.prototype.klass=rb_cRegexp;RegExp.prototype.flags=T_OBJECT;rb_cMatch=rb_define_class("MatchData",rb_cObject);rb_define_singleton_method(rb_cMatch,"new",rb_match_new,1);rb_define_method(rb_cMatch,"size",rb_match_size,0);rb_define_method(rb_cMatch,"length",rb_match_size,0);rb_define_method(rb_cMatch,"[]",rb_match_aref,-1);rb_define_method(rb_cMatch,"to_s",rb_match_to_s,0);rb_define_method(rb_cMatch,"inspect",rb_match_inspect,0);};
var ruby_parser=(function(){var parser={trace:function trace(){},yy:{},symbols_:{"S":2,"program":3,"EOF":4,"top_compstmt":5,"top_stmts":6,"opt_terms":7,"none":8,"top_stmt":9,"terms":10,"bodystmt":11,"compstmt":12,"opt_rescue":13,"opt_else":14,"opt_ensure":15,"stmts":16,"kELSE":17,"stmt":18,"expr":19,"command_call":20,"arg":21,"+":22,"primary":23,"literal":24,"variable":25,"method_call":26,"kIF":27,"then":28,"if_tail":29,"kEND":30,"kCLASS":31,"cpath":32,"superclass":33,"kMODULE":34,"kELSIF":35,"term":36,"kTHEN":37,"command":38,".":39,"operation2":40,"call_args":41,"cmd_brace_block":42,"tCOLON2":43,"kSUPER":44,"kYIELD":45,"{":46,"}":47,"opt_paren_args":48,"operation":49,"tIDENTIFIER":50,"tCONSTANT":51,"paren_args":52,"(":53,"opt_call_args":54,"rparen":55,")":56,"tIVAR":57,"tGVAR":58,"tCVAR":59,"kNIL":60,"kSELF":61,"kTRUE":62,"kFALSE":63,"k__FILE__":64,"k__LINE__":65,"k__ENCODING__":66,"kBLOCK_GIVEN":67,"<":68,"cname":69,"tCOLON3":70,"primary_value":71,"numeric":72,"tINTEGER":73,"tFLOAT":74,";":75,"\\n":76,"$accept":0,"$end":1},terminals_:{"4":"EOF","17":"kELSE","22":"+","27":"kIF","30":"kEND","31":"kCLASS","34":"kMODULE","35":"kELSIF","37":"kTHEN","39":".","43":"tCOLON2","44":"kSUPER","45":"kYIELD","46":"{","47":"}","50":"tIDENTIFIER","51":"tCONSTANT","53":"(","55":"rparen","56":")","57":"tIVAR","58":"tGVAR","59":"tCVAR","60":"kNIL","61":"kSELF","62":"kTRUE","63":"kFALSE","64":"k__FILE__","65":"k__LINE__","66":"k__ENCODING__","67":"kBLOCK_GIVEN","68":"<","70":"tCOLON3","71":"primary_value","73":"tINTEGER","74":"tFLOAT","75":";","76":"\\n"},productions_:[0,[2,2],[3,1],[5,2],[6,1],[6,1],[6,3],[11,4],[12,2],[7,0],[7,1],[13,0],[14,1],[14,2],[15,0],[9,1],[16,1],[16,1],[16,3],[18,1],[19,1],[19,1],[21,3],[21,1],[23,1],[23,1],[23,1],[23,6],[23,5],[23,4],[29,1],[29,5],[28,1],[28,1],[28,2],[20,1],[38,4],[38,5],[38,4],[38,5],[38,2],[38,2],[42,2],[26,4],[49,1],[49,1],[40,1],[48,1],[48,1],[52,3],[54,1],[41,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[33,1],[33,3],[69,1],[69,1],[32,2],[32,1],[32,3],[24,1],[72,1],[72,1],[36,1],[36,1],[10,1],[10,2],[8,0]],performAction:function anonymous(yytext,yyleng,yylineno,yy){var $$=arguments[5],$0=arguments[5].length;switch(arguments[4]){case 1:ruby_parser.__result=$$[$0-2+1-1];this.$=$$[$0-2+1-1];break;case 2:this.$=$$[$0-1+1-1];break;case 3:this.$=$$[$0-2+1-1];break;case 4:this.$=[];break;case 5:this.$=[$$[$0-1+1-1]];break;case 6:$$[$0-3+1-1].push($$[$0-3+3-1]);this.$=$$[$0-3+1-1];break;case 7:this.$={type:'bodystmt',stmt:$$[$0-4+1-1],rescue:$$[$0-4+2-1],_else:$$[$0-4+3-1]};break;case 8:this.$=$$[$0-2+1-1];break;case 9:this.$=null;break;case 10:this.$=null;break;case 11:this.$=null;break;case 14:this.$=null;break;case 16:this.$=$$[$0-1+1-1];break;case 27:this.$={type:'if',expr:$$[$0-6+2-1],stmt:$$[$0-6+4-1],tail:$$[$0-6+5-1]};break;case 28:this.$={type:'class',cpath:$$[$0-5+2-1],superclass:$$[$0-5+3-1],bodystmt:$$[$0-5+4-1]};break;case 29:this.$={type:'module',cpath:$$[$0-4+2-1],bodystmt:$$[$0-4+3-1]};break;case 43:this.$={type:'call',recv:$$[$0-4+1-1],meth:$$[$0-4+3-1]}
break;case 44:this.$=yytext;break;case 45:this.$=yytext;break;case 46:this.$=yytext;break;case 52:this.$={type:'identifier',name:yytext};break;case 53:this.$={type:'ivar',name:yytext};break;case 55:this.$={type:'constant',name:yytext};break;case 67:this.$=yytext;break;case 68:this.$=yytext;break;case 70:this.$=$$[$0-1+1-1];break;case 73:this.$=yytext;break;case 74:this.$=yytext;break;case 79:this.$=null;break;}},table:[{"2":1,"3":2,"5":3,"6":4,"8":5,"9":6,"18":7,"19":8,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36],"76":[2,79],"75":[2,79],"4":[2,79]},{"1":[3]},{"4":[1,37]},{"4":[2,2]},{"7":38,"10":39,"36":40,"75":[1,41],"76":[1,42],"4":[2,9]},{"4":[2,4],"75":[2,4],"76":[2,4]},{"4":[2,5],"75":[2,5],"76":[2,5]},{"76":[2,15],"75":[2,15],"4":[2,15]},{"4":[2,19],"75":[2,19],"76":[2,19],"30":[2,19],"17":[2,19],"35":[2,19]},{"76":[2,20],"75":[2,20],"4":[2,20],"37":[2,20],"17":[2,20],"30":[2,20],"35":[2,20]},{"22":[1,43],"76":[2,21],"75":[2,21],"4":[2,21],"37":[2,21],"17":[2,21],"30":[2,21],"35":[2,21]},{"4":[2,35],"75":[2,35],"76":[2,35],"37":[2,35],"30":[2,35],"17":[2,35],"35":[2,35]},{"39":[1,44],"43":[1,45],"4":[2,23],"75":[2,23],"76":[2,23],"22":[2,23],"37":[2,23],"30":[2,23],"17":[2,23],"35":[2,23]},{"41":46,"53":[1,47]},{"41":48,"53":[1,47]},{"22":[2,24],"76":[2,24],"75":[2,24],"4":[2,24],"39":[2,24],"43":[2,24],"37":[2,24],"17":[2,24],"35":[2,24],"30":[2,24]},{"22":[2,25],"76":[2,25],"75":[2,25],"4":[2,25],"39":[2,25],"43":[2,25],"37":[2,25],"17":[2,25],"35":[2,25],"30":[2,25]},{"22":[2,26],"76":[2,26],"75":[2,26],"4":[2,26],"39":[2,26],"43":[2,26],"37":[2,26],"17":[2,26],"35":[2,26],"30":[2,26]},{"19":49,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36]},{"32":50,"70":[1,51],"69":52,"71":[1,53],"50":[1,54],"51":[1,55]},{"32":56,"70":[1,51],"69":52,"71":[1,53],"50":[1,54],"51":[1,55]},{"43":[2,72],"39":[2,72],"4":[2,72],"75":[2,72],"76":[2,72],"22":[2,72],"37":[2,72],"17":[2,72],"30":[2,72],"35":[2,72]},{"43":[2,52],"39":[2,52],"4":[2,52],"75":[2,52],"76":[2,52],"22":[2,52],"37":[2,52],"17":[2,52],"30":[2,52],"35":[2,52]},{"43":[2,53],"39":[2,53],"4":[2,53],"75":[2,53],"76":[2,53],"22":[2,53],"37":[2,53],"17":[2,53],"30":[2,53],"35":[2,53]},{"43":[2,54],"39":[2,54],"4":[2,54],"75":[2,54],"76":[2,54],"22":[2,54],"37":[2,54],"17":[2,54],"30":[2,54],"35":[2,54]},{"43":[2,55],"39":[2,55],"4":[2,55],"75":[2,55],"76":[2,55],"22":[2,55],"37":[2,55],"17":[2,55],"30":[2,55],"35":[2,55]},{"43":[2,56],"39":[2,56],"4":[2,56],"75":[2,56],"76":[2,56],"22":[2,56],"37":[2,56],"17":[2,56],"30":[2,56],"35":[2,56]},{"43":[2,57],"39":[2,57],"4":[2,57],"75":[2,57],"76":[2,57],"22":[2,57],"37":[2,57],"17":[2,57],"30":[2,57],"35":[2,57]},{"43":[2,58],"39":[2,58],"4":[2,58],"75":[2,58],"76":[2,58],"22":[2,58],"37":[2,58],"17":[2,58],"30":[2,58],"35":[2,58]},{"43":[2,59],"39":[2,59],"4":[2,59],"75":[2,59],"76":[2,59],"22":[2,59],"37":[2,59],"17":[2,59],"30":[2,59],"35":[2,59]},{"43":[2,60],"39":[2,60],"4":[2,60],"75":[2,60],"76":[2,60],"22":[2,60],"37":[2,60],"17":[2,60],"30":[2,60],"35":[2,60]},{"43":[2,61],"39":[2,61],"4":[2,61],"75":[2,61],"76":[2,61],"22":[2,61],"37":[2,61],"17":[2,61],"30":[2,61],"35":[2,61]},{"43":[2,62],"39":[2,62],"4":[2,62],"75":[2,62],"76":[2,62],"22":[2,62],"37":[2,62],"17":[2,62],"30":[2,62],"35":[2,62]},{"43":[2,63],"39":[2,63],"4":[2,63],"75":[2,63],"76":[2,63],"22":[2,63],"37":[2,63],"17":[2,63],"30":[2,63],"35":[2,63]},{"43":[2,64],"39":[2,64],"4":[2,64],"75":[2,64],"76":[2,64],"22":[2,64],"37":[2,64],"17":[2,64],"30":[2,64],"35":[2,64]},{"22":[2,73],"76":[2,73],"75":[2,73],"4":[2,73],"39":[2,73],"43":[2,73],"37":[2,73],"17":[2,73],"35":[2,73],"30":[2,73]},{"22":[2,74],"76":[2,74],"75":[2,74],"4":[2,74],"39":[2,74],"43":[2,74],"37":[2,74],"17":[2,74],"35":[2,74],"30":[2,74]},{"1":[2,1]},{"4":[2,3]},{"9":57,"75":[1,58],"18":7,"19":8,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36],"4":[2,10]},{"50":[2,77],"57":[2,77],"58":[2,77],"51":[2,77],"59":[2,77],"60":[2,77],"61":[2,77],"62":[2,77],"63":[2,77],"64":[2,77],"65":[2,77],"66":[2,77],"67":[2,77],"27":[2,77],"31":[2,77],"34":[2,77],"44":[2,77],"45":[2,77],"73":[2,77],"74":[2,77],"4":[2,77],"75":[2,77],"30":[2,77],"17":[2,77],"35":[2,77]},{"4":[2,75],"74":[2,75],"73":[2,75],"45":[2,75],"44":[2,75],"34":[2,75],"31":[2,75],"27":[2,75],"67":[2,75],"66":[2,75],"65":[2,75],"64":[2,75],"63":[2,75],"62":[2,75],"61":[2,75],"60":[2,75],"59":[2,75],"51":[2,75],"58":[2,75],"57":[2,75],"50":[2,75],"75":[2,75],"76":[2,75],"35":[2,75],"17":[2,75],"30":[2,75],"37":[2,75]},{"4":[2,76],"74":[2,76],"73":[2,76],"45":[2,76],"44":[2,76],"34":[2,76],"31":[2,76],"27":[2,76],"67":[2,76],"66":[2,76],"65":[2,76],"64":[2,76],"63":[2,76],"62":[2,76],"61":[2,76],"60":[2,76],"59":[2,76],"51":[2,76],"58":[2,76],"57":[2,76],"50":[2,76],"75":[2,76],"76":[2,76],"35":[2,76],"17":[2,76],"30":[2,76],"37":[2,76]},{"21":59,"23":60,"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36]},{"40":61,"50":[1,62]},{"40":63,"50":[1,62]},{"76":[2,40],"75":[2,40],"4":[2,40],"37":[2,40],"17":[2,40],"30":[2,40],"35":[2,40]},{"56":[1,64]},{"76":[2,41],"75":[2,41],"4":[2,41],"37":[2,41],"17":[2,41],"30":[2,41],"35":[2,41]},{"28":65,"36":66,"37":[1,67],"75":[1,41],"76":[1,42]},{"33":68,"36":69,"68":[1,70],"75":[1,41],"76":[1,42]},{"69":71,"50":[1,54],"51":[1,55]},{"75":[2,70],"76":[2,70],"68":[2,70],"30":[2,70],"17":[2,70],"50":[2,70],"57":[2,70],"58":[2,70],"51":[2,70],"59":[2,70],"60":[2,70],"61":[2,70],"62":[2,70],"63":[2,70],"64":[2,70],"65":[2,70],"66":[2,70],"67":[2,70],"27":[2,70],"31":[2,70],"34":[2,70],"44":[2,70],"45":[2,70],"73":[2,70],"74":[2,70]},{"43":[1,72]},{"68":[2,67],"76":[2,67],"75":[2,67],"74":[2,67],"73":[2,67],"45":[2,67],"44":[2,67],"34":[2,67],"31":[2,67],"27":[2,67],"67":[2,67],"66":[2,67],"65":[2,67],"64":[2,67],"63":[2,67],"62":[2,67],"61":[2,67],"60":[2,67],"59":[2,67],"51":[2,67],"58":[2,67],"57":[2,67],"50":[2,67],"17":[2,67],"30":[2,67]},{"68":[2,68],"76":[2,68],"75":[2,68],"74":[2,68],"73":[2,68],"45":[2,68],"44":[2,68],"34":[2,68],"31":[2,68],"27":[2,68],"67":[2,68],"66":[2,68],"65":[2,68],"64":[2,68],"63":[2,68],"62":[2,68],"61":[2,68],"60":[2,68],"59":[2,68],"51":[2,68],"58":[2,68],"57":[2,68],"50":[2,68],"17":[2,68],"30":[2,68]},{"11":73,"12":74,"16":75,"8":76,"18":77,"19":8,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36],"76":[2,79],"75":[2,79],"30":[2,79],"17":[2,79]},{"4":[2,6],"75":[2,6],"76":[2,6]},{"50":[2,78],"57":[2,78],"58":[2,78],"51":[2,78],"59":[2,78],"60":[2,78],"61":[2,78],"62":[2,78],"63":[2,78],"64":[2,78],"65":[2,78],"66":[2,78],"67":[2,78],"27":[2,78],"31":[2,78],"34":[2,78],"44":[2,78],"45":[2,78],"73":[2,78],"74":[2,78],"4":[2,78],"75":[2,78],"30":[2,78],"17":[2,78],"35":[2,78]},{"22":[1,43],"4":[2,22],"75":[2,22],"76":[2,22],"37":[2,22],"17":[2,22],"30":[2,22],"35":[2,22]},{"39":[1,78],"22":[2,23],"76":[2,23],"75":[2,23],"4":[2,23],"37":[2,23],"17":[2,23],"30":[2,23],"35":[2,23]},{"41":79,"48":80,"53":[1,81],"8":82,"52":83,"76":[2,79],"75":[2,79],"30":[2,79],"17":[2,79],"37":[2,79],"43":[2,79],"39":[2,79],"4":[2,79],"22":[2,79],"35":[2,79]},{"53":[2,46],"22":[2,46],"76":[2,46],"75":[2,46],"4":[2,46],"39":[2,46],"43":[2,46],"37":[2,46],"17":[2,46],"30":[2,46],"35":[2,46]},{"41":84,"53":[1,47]},{"4":[2,51],"75":[2,51],"76":[2,51],"37":[2,51],"30":[2,51],"17":[2,51],"35":[2,51],"46":[2,51]},{"12":85,"16":75,"8":76,"18":77,"19":8,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36],"76":[2,79],"75":[2,79],"30":[2,79],"17":[2,79],"35":[2,79]},{"37":[1,86],"30":[2,32],"17":[2,32],"35":[2,32],"50":[2,32],"57":[2,32],"58":[2,32],"51":[2,32],"59":[2,32],"60":[2,32],"61":[2,32],"62":[2,32],"63":[2,32],"64":[2,32],"65":[2,32],"66":[2,32],"67":[2,32],"27":[2,32],"31":[2,32],"34":[2,32],"44":[2,32],"45":[2,32],"73":[2,32],"74":[2,32],"75":[2,32],"76":[2,32]},{"30":[2,33],"17":[2,33],"35":[2,33],"50":[2,33],"57":[2,33],"58":[2,33],"51":[2,33],"59":[2,33],"60":[2,33],"61":[2,33],"62":[2,33],"63":[2,33],"64":[2,33],"65":[2,33],"66":[2,33],"67":[2,33],"27":[2,33],"31":[2,33],"34":[2,33],"44":[2,33],"45":[2,33],"73":[2,33],"74":[2,33],"75":[2,33],"76":[2,33]},{"11":87,"12":74,"16":75,"8":76,"18":77,"19":8,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36],"76":[2,79],"75":[2,79],"30":[2,79],"17":[2,79]},{"30":[2,65],"17":[2,65],"50":[2,65],"57":[2,65],"58":[2,65],"51":[2,65],"59":[2,65],"60":[2,65],"61":[2,65],"62":[2,65],"63":[2,65],"64":[2,65],"65":[2,65],"66":[2,65],"67":[2,65],"27":[2,65],"31":[2,65],"34":[2,65],"44":[2,65],"45":[2,65],"73":[2,65],"74":[2,65],"75":[2,65],"76":[2,65]},{"19":88,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36]},{"75":[2,69],"76":[2,69],"68":[2,69],"30":[2,69],"17":[2,69],"50":[2,69],"57":[2,69],"58":[2,69],"51":[2,69],"59":[2,69],"60":[2,69],"61":[2,69],"62":[2,69],"63":[2,69],"64":[2,69],"65":[2,69],"66":[2,69],"67":[2,69],"27":[2,69],"31":[2,69],"34":[2,69],"44":[2,69],"45":[2,69],"73":[2,69],"74":[2,69]},{"69":89,"50":[1,54],"51":[1,55]},{"30":[1,90]},{"13":91,"30":[2,11],"17":[2,11]},{"7":92,"10":93,"36":40,"75":[1,41],"76":[1,42],"17":[2,9],"30":[2,9],"35":[2,9]},{"17":[2,16],"30":[2,16],"75":[2,16],"76":[2,16],"35":[2,16]},{"17":[2,17],"30":[2,17],"75":[2,17],"76":[2,17],"35":[2,17]},{"40":94,"50":[1,62]},{"42":95,"46":[1,96],"76":[2,36],"75":[2,36],"4":[2,36],"37":[2,36],"17":[2,36],"30":[2,36],"35":[2,36]},{"43":[2,43],"39":[2,43],"4":[2,43],"75":[2,43],"76":[2,43],"22":[2,43],"37":[2,43],"17":[2,43],"30":[2,43],"35":[2,43]},{"56":[1,64],"54":97,"8":98,"55":[2,79]},{"22":[2,47],"76":[2,47],"75":[2,47],"4":[2,47],"39":[2,47],"43":[2,47],"37":[2,47],"17":[2,47],"30":[2,47],"35":[2,47]},{"22":[2,48],"76":[2,48],"75":[2,48],"4":[2,48],"39":[2,48],"43":[2,48],"37":[2,48],"17":[2,48],"30":[2,48],"35":[2,48]},{"42":99,"46":[1,96],"76":[2,38],"75":[2,38],"4":[2,38],"37":[2,38],"17":[2,38],"30":[2,38],"35":[2,38]},{"29":100,"14":101,"35":[1,102],"8":103,"17":[1,104],"30":[2,79]},{"30":[2,34],"17":[2,34],"35":[2,34],"50":[2,34],"57":[2,34],"58":[2,34],"51":[2,34],"59":[2,34],"60":[2,34],"61":[2,34],"62":[2,34],"63":[2,34],"64":[2,34],"65":[2,34],"66":[2,34],"67":[2,34],"27":[2,34],"31":[2,34],"34":[2,34],"44":[2,34],"45":[2,34],"73":[2,34],"74":[2,34],"75":[2,34],"76":[2,34]},{"30":[1,105]},{"36":106,"75":[1,41],"76":[1,42]},{"75":[2,71],"76":[2,71],"68":[2,71],"30":[2,71],"17":[2,71],"50":[2,71],"57":[2,71],"58":[2,71],"51":[2,71],"59":[2,71],"60":[2,71],"61":[2,71],"62":[2,71],"63":[2,71],"64":[2,71],"65":[2,71],"66":[2,71],"67":[2,71],"27":[2,71],"31":[2,71],"34":[2,71],"44":[2,71],"45":[2,71],"73":[2,71],"74":[2,71]},{"22":[2,29],"76":[2,29],"75":[2,29],"4":[2,29],"39":[2,29],"43":[2,29],"37":[2,29],"17":[2,29],"35":[2,29],"30":[2,29]},{"14":107,"8":103,"17":[1,104],"30":[2,79]},{"30":[2,8],"17":[2,8],"35":[2,8]},{"18":108,"75":[1,58],"19":8,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36],"17":[2,10],"30":[2,10],"35":[2,10]},{"48":80,"8":82,"52":83,"53":[1,109],"22":[2,79],"76":[2,79],"75":[2,79],"4":[2,79],"37":[2,79],"17":[2,79],"30":[2,79],"35":[2,79],"39":[2,79]},{"76":[2,37],"75":[2,37],"4":[2,37],"37":[2,37],"17":[2,37],"30":[2,37],"35":[2,37]},{"47":[1,110]},{"55":[1,111]},{"55":[2,50]},{"76":[2,39],"75":[2,39],"4":[2,39],"37":[2,39],"17":[2,39],"30":[2,39],"35":[2,39]},{"30":[1,112]},{"30":[2,30]},{"19":113,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36]},{"30":[2,12]},{"12":114,"16":75,"8":76,"18":77,"19":8,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36],"76":[2,79],"75":[2,79],"30":[2,79]},{"22":[2,28],"76":[2,28],"75":[2,28],"4":[2,28],"39":[2,28],"43":[2,28],"37":[2,28],"17":[2,28],"35":[2,28],"30":[2,28]},{"30":[2,66],"17":[2,66],"50":[2,66],"57":[2,66],"58":[2,66],"51":[2,66],"59":[2,66],"60":[2,66],"61":[2,66],"62":[2,66],"63":[2,66],"64":[2,66],"65":[2,66],"66":[2,66],"67":[2,66],"27":[2,66],"31":[2,66],"34":[2,66],"44":[2,66],"45":[2,66],"73":[2,66],"74":[2,66],"75":[2,66],"76":[2,66]},{"15":115,"30":[2,14]},{"17":[2,18],"30":[2,18],"75":[2,18],"76":[2,18],"35":[2,18]},{"54":97,"8":98,"55":[2,79]},{"4":[2,42],"75":[2,42],"76":[2,42],"37":[2,42],"30":[2,42],"17":[2,42],"35":[2,42]},{"76":[2,49],"75":[2,49],"30":[2,49],"17":[2,49],"37":[2,49],"43":[2,49],"39":[2,49],"4":[2,49],"22":[2,49],"35":[2,49]},{"22":[2,27],"76":[2,27],"75":[2,27],"4":[2,27],"39":[2,27],"43":[2,27],"37":[2,27],"17":[2,27],"35":[2,27],"30":[2,27]},{"28":116,"36":66,"37":[1,67],"75":[1,41],"76":[1,42]},{"30":[2,13]},{"30":[2,7]},{"12":117,"16":75,"8":76,"18":77,"19":8,"20":9,"21":10,"38":11,"23":12,"44":[1,13],"45":[1,14],"24":15,"25":16,"26":17,"27":[1,18],"31":[1,19],"34":[1,20],"72":21,"50":[1,22],"57":[1,23],"58":[1,24],"51":[1,25],"59":[1,26],"60":[1,27],"61":[1,28],"62":[1,29],"63":[1,30],"64":[1,31],"65":[1,32],"66":[1,33],"67":[1,34],"73":[1,35],"74":[1,36],"76":[2,79],"75":[2,79],"30":[2,79],"17":[2,79],"35":[2,79]},{"29":118,"14":101,"35":[1,102],"8":103,"17":[1,104],"30":[2,79]},{"30":[2,31]}],parseError:function parseError(str,hash){throw new Error(str);},parse:function parse(input){var self=this,stack=[0],vstack=[null],table=this.table,yytext='',yylineno=0,yyleng=0,shifts=0,reductions=0;this.lexer.setInput(input);this.lexer.yy=this.yy;var parseError=this.yy.parseError=this.yy.parseError||this.parseError;function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=='number'){token=self.symbols_[token];}
return token;};var symbol,state,action,a,r,yyval={},p,len,ip=0,newState,expected;symbol=lex();while(true){state=stack[stack.length-1];action=table[state]&&table[state][symbol];if(typeof action==='undefined'||!action.length||!action[0]){expected=[];for(p in table[state])if(this.terminals_[p]&&p!=1){expected.push("'"+this.terminals_[p]+"'");}
if(this.lexer.showPosition){parseError('Parse error on line '+(yylineno+1)+":\n"+this.lexer.showPosition()+'\nExpecting '+expected.join(', '),{text:this.lexer.match,token:this.terminals_[symbol],line:this.lexer.yylineno,expected:expected});}else{parseError('Parse error on line '+(yylineno+1)+": Unexpected '"+this.terminals_[symbol]+"'",{text:this.lexer.match,token:this.terminals_[symbol],line:this.lexer.yylineno,expected:expected});}}
if(action[0]instanceof Array&&action.length>1){throw new Error('Parse Error: multiple actions possible at state: '+state+', token: '+symbol);}
a=action;switch(a[0]){case 1:shifts++;stack.push(symbol);++ip;yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;symbol=lex();vstack.push(null);stack.push(a[1]);break;case 2:reductions++;len=this.productions_[a[1]][1];yyval.$=vstack[vstack.length-len];r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,a[1],vstack);if(typeof r!=='undefined'){return r;}
if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);}
stack.push(this.productions_[a[1]][0]);vstack.push(yyval.$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:this.reductionCount=reductions;this.shiftCount=shifts;return true;}}
return true;}};return parser;})();if(typeof require!=='undefined'){exports.parser=ruby_parser;exports.parse=function(){return ruby_parser.parse.apply(ruby_parser,arguments);}
exports.main=function commonjsMain(args){var cwd=require("file").path(require("file").cwd());if(!args[1])
throw new Error('Usage: '+args[0]+' FILE');var source=cwd.join(args[1]).read({charset:"utf-8"});this.parse(source);}
if(require.main===module){exports.main(require("system").args);}}
var OpalStringScanner=function OpalStringScanner(str){this.str=str;this.at=0;this.matched="";this.working_string=str;};OpalStringScanner.prototype={scan:function(reg){var res=reg.exec(this.working_string);if(res==null){return false;}
else if(typeof res=="object"){this.at+=res[0].length;this.working_string=this.working_string.substr(res[0].length);this.matched=res[0];return res;}
else if(typeof res=="string"){this.at+=res.length;this.working_string=this.working_string.substr(res.length);return res;}
return false;},check:function(reg){var res=reg.exec(this.working_string);return res;},peek:function(len){return this.working_string.substr(0,len);}};
function rb_ivar_set(obj,id,val){obj.iv_tbl[id]=val;return val;};function rb_ivar_get(obj,id){if(obj.iv_tbl.hasOwnProperty(id)){return obj.iv_tbl[id];}
return nil;}
function rb_const_set(k,id,val){return rb_mod_av_set(k,id,val,true);}
function rb_mod_av_set(k,id,val,isconst){return k.iv_tbl[id]=val;}
function rb_const_set(k,id,val){return k.iv_tbl[id]=val;}
function rb_const_get(k,id){var v,t=k;while(t){if((v=t.iv_tbl[id])!==undefined)return v;t=t.sup;}
t=k.parent;while(t){if(v=t.iv_tbl[id])return v;t=t.parent;}
rb_raise(rb_eNameError,"uninitialized constant "+id+" in "+k.iv_tbl.__classid__);return nil;}
function rb_const_get_full(k,id){var v,t=k;while(t){if(v=t.iv_tbl[id])return v;t=t.sup;}
t=k.parent;while(t){if(v=t.iv_tbl[id])return v;t=t.parent;}
console.log("raising name error for "+id);throw"NameError: uninitialized constant "+id+" in "+k.name
return nil;}
function rb_const_defined(k,id){var v,t=k;while(t){if(v=t.iv_tbl[id])return true;t=t.sup;}
return false;}
function rb_const_defined_full(k,id){var v,t=k;while(t){if(v=t.iv_tbl[id])return true;t=t.sup;}
t=k.parent;while(t){if(v=t.iv_tbl[id])return true;t=t.parent;}
return false;}
function rb_const_defined_at(k,id){return(k.iv_tbl[id])?true:false;}
function rb_const_get_at(k,id){return(k.iv_tbl[id])?k.iv_tbl[id]:nil;}
function Init_VM(){};var opal_top_self;function opal_main_to_s(){return"main";};function opal_main_include(top,id,_,inc){return rb_include_module(rb_cObject,inc);};function Init_top_self(){opal_top_self=new RObject();opal_top_self.klass=rb_cObject;FL_SET(opal_top_self,T_OBJECT);rb_define_singleton_method(opal_top_self,"include",opal_main_include,1);};function rb_method_missing(recv,id,_,mid,args){var obj_type;if(recv.flags&T_OBJECT)obj_type=":Object";else if(recv.flags&T_CLASS)obj_type=":Class";else if(recv.flags&T_MODULE)obj_type=":Module";else obj_type="";return rb_raise(rb_eNameError,"undefined method `"+mid.ptr+"` for "+rb_funcall(recv,"inspect")+obj_type);};function rb_vm_eval_str(obj,str){var parser=vn_parser("<main>",str);var iseq=parser.parse();console.log(iseq);if(window.execScript){window.execScript("window.opal_tmp_func = "+iseq+";");return window.opal_tmp_func(obj);}
else{with(window){return eval("("+iseq+")")(obj);}}};function Init_vm_eval(){rb_define_private_method(rb_cBasicObject,"method_missing",rb_method_missing,-1);rb_define_method(rb_mKernel,"eval",rb_vm_eval_str,1);};function rb_search_method(klass,id){var f,k=klass;while(!(f=k.m_tbl[id])){k=k.sup;if(!k)return undefined;}
return f;};function rb_super(recv,id,func){var args=Array.prototype.slice.call(arguments,3);if(recv===null||recv===undefined)recv=nil;var body=rb_search_super_method(recv.klass,id,func);if(!body){return rb_raise(rb_eNoMethodError,"super: no superclass method '"+id+"'");}
var imp=body.body,len=args.length;switch(len){case 0:return imp(recv,id,nil);case 1:return imp(recv,id,nil,args[0]);case 2:return imp(recv,id,nil,args[0],args[1]);case 3:return imp(recv,id,nil,args[0],args[1],args[2]);case 4:return imp(recv,id,nil,args[0],args[1],args[2],args[3]);case 5:return imp(recv,id,nil,args[0],args[1],args[2],args[3],args[4]);default:throw"currently unsupported argc length "+len}
return nil;};function rb_search_super_method(klass,id,func){var f,k=klass;while(!((f=k.m_tbl[id])&&f!=func)){if(!(k=k.sup))return undefined;}
if(!(k=k.sup))return undefined;while(!(f=k.m_tbl[id])){if(!(k=k.sup))return undefined;}
return f;};function rb_funcall(recv,id){var args=Array.prototype.slice.call(arguments,2);return rb_funcall2(recv,id,args);}
function rb_funcall2(recv,id,args){return rb_funcall3(recv,id,nil,args);};function rb_funcall3(recv,id,_,args){var klass=(recv===null||recv===undefined)?rb_cNilClass:recv.klass;try{var body=rb_search_method(klass,id);if(!body){args.unshift(ID2SYM(id));return rb_funcall2(recv,"method_missing",args);}
var imp=body.body,len=args.length;switch(len){case 0:return imp(recv,id,_);case 1:return imp(recv,id,_,args[0]);case 2:return imp(recv,id,_,args[0],args[1]);case 3:return imp(recv,id,_,args[0],args[1],args[2]);case 4:return imp(recv,id,_,args[0],args[1],args[2],args[3]);case 5:return imp(recv,id,_,args[0],args[1],args[2],args[3],args[4]);default:rb_raise(rb_eArgError,"currently unsupported argc length "+len);}}
catch(e){if(e.klass===rb_eLocalJumpError){if(e.iv_tbl.type==="return"){return e.iv_tbl.args;}
if(e.iv_tbl.type==="break"){if(_!==nil)return e.iv_tbl.args;}}
throw e}};function vm_defineclass(base,sup,id,body,type){var klass;switch(type){case 0:if(sup==nil)sup=rb_cObject;if(base.flags&T_OBJECT)base=rb_class_real(base.klass);if(rb_const_defined_at(base,id)){klass=rb_const_get_at(base,id);}
else{klass=rb_define_class_id(id,sup);rb_name_class(klass,id);rb_const_set(base,id,klass);klass.parent=base;}
break;case 1:klass=rb_singleton_class(base);break;case 2:if(base.flags&T_OBJECT)base=rb_class_real(base.klass);if(rb_const_defined_at(base,id)){klass=rb_const_get_at(base,id);}
else{klass=rb_define_module_id(id);rb_name_class(klass,id);rb_const_set(base,id,klass);klass.parent=base;}
break;default:throw"unknown vm_defineclass type: "+type}
return body(klass);};function vm_definemethod(base,id,body,is_singleton){if(is_singleton){return rb_define_method(rb_singleton_class(base),id,body);}
else{if(base.flags&T_OBJECT)base=base.klass;return rb_define_method(base,id,body);}};function vm_send(obj,id,args,block,flags){var r=rb_funcall3(obj,id,block,args);return r;};function vm_getconstant(base,id){if(base===undefined||base===null)base=nil;if(base.flags&T_OBJECT)base=rb_class_real(base.klass);return rb_const_get(base,id);};function vm_setconstant(base,id,val){if(base.flags&T_OBJECT)base=rb_class_real(base.klass);return rb_const_set(base,id,val);};function vm_newhash(){var ary=Array.prototype.slice.call(arguments),res=rb_hash_new();for(var i=0;i<ary.length;i+=2){res.set(ary[i],ary[i+1]);}
return res;};function vm_newrange(beg,end,inc){return new RRange(beg,end,inc);};function rb_break(args){rb_jump_raise(rb_eLocalJumpError,"break","unexpected break",args);};function rb_return(args){rb_jump_raise(rb_eLocalJumpError,"return","unexpected return",args);};function vm_yield(block,args){if(block==nil)rb_raise(rb_eArgError,"yield: no block given");args.unshift(nil);args.unshift(nil);args.unshift(nil);return block.apply(block,args);};function vm_ivarset(obj,id,val){return rb_ivar_set(obj,id,val);};function vm_ivarget(obj,id){return rb_ivar_get(obj,id);};function vm_optplus(a,b){if(typeof a=="number"&&typeof b=="number")return a+b;return vm_send(a,"+",[b],nil,8);};function vm_optminus(a,b){if(typeof a=="number"&&typeof b=="number")return a-b;return vm_send(a,"-",[b],nil,8);};function vm_optmult(a,b){if(typeof a=="number"&&typeof b=="number")return a*b;return vm_send(a,"*",[b],nil,8);};function vm_optdiv(a,b){if(typeof a=="number"&&typeof b=="number")return a/b;return vm_send(a,"/",[b],nil,8);};function vm_alias(cls,a,b){return rb_define_alias(cls.klass,a.ptr,b.ptr);};opal_boot_file("core/core/array.rb",function($){var _ = nil;vm_defineclass($,nil,"Array",function($){vm_definemethod($,"to_a",function($,id,_){return $;},0,0);vm_definemethod($,"length",function($,id,_){return $.length;},0,0);vm_send($,"alias_method",[ID2SYM("size"),ID2SYM("length")],nil,8);vm_definemethod($,"each",function($,id,_){for (var i = 0; i < $.length; i++){vm_yield(_,[$[i]]);}return $;},0,0);vm_definemethod($,"include?",function($,id,_,_a){return $.indexOf(_a) != -1 ? true : false;},0,1);vm_definemethod($,"push",function($,id,_,_a){$.push(_a);return $;},0,1);vm_send($,"alias_method",[ID2SYM("<<"),ID2SYM("push")],nil,8);vm_definemethod($,"empty?",function($,id,_){return $.length == 0;},0,0);vm_definemethod($,"at",function($,id,_,_a){if (_a >= 0) {
      if (_a > $.length) return nil;
      return $[_a];
    }
    else {
      if (_a < -$.length) return nil;
      return $[$.length + _a];
    }},0,1);vm_definemethod($,"join",function($,id,_,_a){if(RTEST(vm_send(_a,"nil?",[],nil,0))){_a="";};return $.join(_a);},0,1);vm_definemethod($,"last",function($,id,_,_a){if ($.length == 0) {
      if (_a != undefined) {
        return [];
      }
      else {
        return nil;
      }
    }
    if (_a != undefined) {
      return $.slice($.length - _a, $.length);
    }
    return $[$.length - 1];},0,1);vm_definemethod($,"first",function($,id,_){return $[0];},0,0);vm_definemethod($,"collect",function($,id,_){var i, res = [];
    for (i = 0; i < $.length; i++) {
      res.push(vm_yield(_, [$[i]]));
    }
    return res;},0,0);vm_send($,"alias_method",[ID2SYM("map"),ID2SYM("collect")],nil,8);vm_definemethod($,"[]",function($,id,_,_a){return $[_a];},0,1);vm_definemethod($,"[]=",function($,id,_,_a,_b){return $[_a]=_b;},0,2);vm_definemethod($,"unshift",function($,id,_,_a){return $.unshift(_a);},0,1);vm_definemethod($,"==",function($,id,_,_a){if ($ === _a) return true;
    if (_a.klass !== rb_cArray) return false;
    if ($.length !== _a.length) return false;
    for (var i = 0; i < $.length; i++) {
      if (!rb_funcall($[i], "==", _a[i])) return false;
    }
    return true;},0,1);vm_definemethod($,"to_s",function($,id,_){var res = [];
    for (var i = 0; i < $.length; i++) {
      res.push(vm_send($[i], "to_s", [], nil, 0));
    }
    return res.join("");},0,0);vm_definemethod($,"inspect",function($,id,_){var res = ["["]
    for (var i = 0; i < $.length; i++) {
      if (i > 0) res.push(", ");
      res.push(vm_send($[i], "inspect", [], nil, 0));
    }
    res.push("]");
    return res.join("");},0,0);vm_definemethod($,"pop",function($,id,_,_a){if (_a === undefined) {
      return $.pop();
    }
    else if ($.length == 0) {
      return [];
    }
    else {
      var r = $.slice($.length - _a, $.length);
      $.splice($.length - _a, $.length);
      return r;
    }},0,1);vm_definemethod($,"select",function($,id,_){var res = [], v;
    for (var i = 0; i < $.length; i++) {
      v = vm_yield(_, [$[i]]);
      if (RTEST(v)) res.push($[i]);
    }
    return res;},0,0);vm_definemethod($,"reject",function($,id,_){var res = [], v;for (var i = 0; i < $.length; i++) {v = vm_yield(_, [$[i]]);if (!RTEST(v)) res.push($[i]);}return res;},0,0);vm_definemethod($,"*",function($,id,_,_a){if (_a.klass == rb_cString) {
      return $.join(_a);
    }
    else {
      var res = [];
      for (var i = 0; i < _a; i++) {
        for (var j = 0; j < $.length; j++) {
          res.push(ary[j]);
        }
      }
      return res;
    }},0,1);return vm_definemethod($,"+",function($,id,_,_a){var c = [];for (var i = 0; i < $.length; i++) {c.push($[i]);}for (var i = 0; i < _a.length; i++) {c.push(_a[i]);}return c;},0,1);},0);});opal_boot_file("core/core/basic_object.rb",function($){var _ = nil;vm_defineclass($,nil,"BasicObject",function($){vm_definemethod($,"initialize",function($,id,_){},0,0);vm_definemethod($,"==",function($,id,_,_a){return RTEST($==_a)? true : false;},0,1);vm_definemethod($,"equal?",function($,id,_,_a){return RTEST($==_a)? true : false;},0,1);vm_definemethod($,"!",function($,id,_){return RTEST($)? false : true;},0,0);return vm_definemethod($,"!=",function($,id,_,_a){return RTEST(vm_send($,"==",[_a],nil,0))? false : true;},0,1);},0);});opal_boot_file("core/core/boolean.rb",function($){var _ = nil;vm_defineclass($,nil,"Boolean",function($){vm_definemethod($,"to_s",function($,id,_){return RTEST($)? "true" : "false";},0,0);vm_definemethod($,"inspect",function($,id,_){return RTEST($)? "true" : "false";},0,0);vm_definemethod($,"&",function($,id,_,_a){return (function(){if(RTEST($)){return RTEST(_a)? true : false;}else{return false;}})();},0,1);vm_definemethod($,"|",function($,id,_,_a){return (function(){if(RTEST($)){return true;}else{return RTEST(_a)? true : false;}})();},0,1);return vm_definemethod($,"^",function($,id,_,_a){return (function(){if(RTEST($)){return RTEST(_a)? false : true;}else{return RTEST(_a)? true : false;}})();},0,1);},0);});opal_boot_file("core/core/compar.rb",function($){var _ = nil;vm_defineclass($,nil,"Comparable",function($){vm_definemethod($,"==",function($,id,_,_a){return ($===_a);},0,1);vm_definemethod($,">",function($,id,_,_a){var _b;_b=vm_send($,"<=>",[_a],nil,0);return RTEST(c > 0)? true : false;},0,1);vm_definemethod($,">=",function($,id,_,_a){var _b;_b=vm_send($,"<=>",[_a],nil,0);return RTEST(c >= 0)? true : false;},0,1);vm_definemethod($,"<",function($,id,_,_a){var _b;_b=vm_send($,"<=>",[_a],nil,0);return RTEST(c < 0)? true : false;},0,1);vm_definemethod($,"<=",function($,id,_,_a){var _b;_b=vm_send($,"<=>",[_a],nil,0);return RTEST(c <= 0)? true : false;},0,1);return vm_definemethod($,"between?",function($,id,_,_a,_b){if(RTEST(vm_send($,"<",[_a],nil,0))){rb_return(false);};if(RTEST(vm_send($,">",[_b],nil,0))){rb_return(false);};return true;},0,2);},2);});opal_boot_file("core/core/dir.rb",function($){var _ = nil;vm_defineclass($,nil,"Dir",function($){return vm_defineclass($,nil,"",function($){vm_definemethod($,"glob",function($,id,_,_a){
      var result = [], eof = false;

      var scanner = new vn_ruby_string_scanner(_a);
      while (!eof) {
        // ** does not HAVE to include a dir, so capture **/ to match .* which 
        // will match a dir, or no dir.. allows both to work together.
        if (scanner.scan(/^\*\*\//)) {
          result.push('.*');
        }
        else if (scanner.scan(/^\*\*/)) {
          result.push('.*');
        }
        else if (scanner.scan(/^\//)) {
          result.push('\\/');
        }
        else if (scanner.scan(/^\*/)) {
          result.push('[^\\/]*');
        }
        else if (scanner.scan(/^[a-zA-Z_]+/)) {
          result.push(scanner.matched);
        }
        else if (scanner.scan(/^\./)) {
          result.push('\\.');
        }
        else {
          eof = true;
        }
        // if (result.length > 108)
        // throw result.join("") + scanner.peek(10);
      }

      var reg =  new RegExp('^' + result.join("") + '$');
      var matching = [];
      // console.log(reg);
      for (prop in opal_files) {
        if (reg.exec(prop)) {
          matching.push(prop);
        }
      }
      return matching;
      },0,1);return vm_send($,"alias_method",[ID2SYM("[]"),ID2SYM("glob")],nil,8);},1);},0);});opal_boot_file("core/core/enum.rb",function($){var _ = nil;vm_defineclass($,nil,"Enumerable",function($){},2);});opal_boot_file("core/core/enumerator.rb",function($){var _ = nil;vm_defineclass($,nil,"Enumerator",function($){},0);});opal_boot_file("core/core/error.rb",function($){var _ = nil;vm_defineclass($,nil,"Exception",function($){},0);vm_defineclass($,vm_getconstant($,"Exception"),"SystemExit",function($){},0);vm_defineclass($,vm_getconstant($,"Exception"),"Fatal",function($){},0);vm_defineclass($,vm_getconstant($,"Exception"),"SignalException",function($){},0);vm_defineclass($,vm_getconstant($,"SignalException"),"Interrupt",function($){},0);vm_defineclass($,vm_getconstant($,"Exception"),"StandardError",function($){},0);vm_defineclass($,vm_getconstant($,"StandardError"),"TypeError",function($){},0);vm_defineclass($,vm_getconstant($,"StandardError"),"ArgumentError",function($){},0);vm_defineclass($,vm_getconstant($,"StandardError"),"IndexError",function($){},0);vm_defineclass($,vm_getconstant($,"IndexError"),"KeyError",function($){},0);vm_defineclass($,vm_getconstant($,"StandardError"),"RangeError",function($){},0);vm_defineclass($,vm_getconstant($,"Exception"),"ScriptError",function($){},0);vm_defineclass($,vm_getconstant($,"ScriptError"),"SyntaxError",function($){},0);vm_defineclass($,vm_getconstant($,"SyntaxError"),"LoadError",function($){},0);vm_defineclass($,vm_getconstant($,"StandardError"),"NotImplementedError",function($){},0);vm_defineclass($,vm_getconstant($,"StandardError"),"NameError",function($){},0);vm_defineclass($,vm_getconstant($,"NameError"),"NoMethodError",function($){},0);vm_defineclass($,vm_getconstant($,"StandardError"),"RuntimeError",function($){},0);});opal_boot_file("core/core/file.rb",function($){var _ = nil;vm_defineclass($,nil,"File",function($){return vm_defineclass($,nil,"",function($){vm_definemethod($,"expand_path",function($,id,_,_a){var _c,_b;_b=vm_send(_a,"split",["/"],nil,0);_c=[];vm_send(_b,"each",[],function($$,__,ID,_d){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){return (function(){if(RTEST(vm_send(_d,"==",[".."],nil,0))){return vm_send(_c,"pop",[],nil,0);}else if(RTEST(ORTEST(function(){return vm_send(_d,"==",["."],nil,0);},function(){return vm_send(_d,"==",[""],nil,0);}))){}else{return vm_send(_c,"push",[_d],nil,0);}})();}},0);return vm_send(_c,"join",["/"],nil,0);},0,1);vm_definemethod($,"dirname",function($,id,_,_a){return _a.substr(0, _a.lastIndexOf('/'));},0,1);return vm_definemethod($,"join",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);return vm_send(_a,"join",["/"],nil,0);},0,0);},1);},0);});opal_boot_file("core/core/hash.rb",function($){var _ = nil;vm_defineclass($,nil,"Hash",function($){vm_definemethod($,"[]",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);var _b;return (function(){if(RTEST(ANDTEST(function(){return vm_send(vm_send(_a,"length",[],nil,0),"==",[1],nil,0);},function(){return vm_send(_a,"is_a?",[vm_getconstant($,"Hash")],nil,0);}))){return vm_send(_a,"[]",[1],nil,0);}else{_b=rb_hash_new();return vm_send($,"raise",["Hash[] not fully implemented"],nil,8);}})();},1,0);vm_definemethod($,"initialize",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);return vm_send($,"raise",[["Hash","#initialize not implemented"].join('')],nil,8);},0,0);vm_definemethod($,"inspect",function($,id,_){var _a;_a=[];vm_send(_a,"<<",["{"],nil,0);for (var i=0;i<$.keys.length;i++){if(i>0){_a.push(", ")};_a.push(rb_funcall($.keys[i],"inspect"));_a.push("=>");_a.push(rb_funcall($.dict[$.keys[i]],"inspect"));}vm_send(_a,"<<",["}"],nil,0);return vm_send(_a,"join",[],nil,0);},0,0);vm_definemethod($,"clear",function($,id,_){$.keys=[];$.dict=[];return $;},0,0);vm_definemethod($,"default=",function($,id,_,_a){$.ifnone=_a;return $;},0,1);vm_definemethod($,"[]=",function($,id,_,_a,_b){return $.set(_a,_b);},0,2);vm_definemethod($,"[]",function($,id,_,_a){return $.get(_a);},0,1);vm_definemethod($,"size",function($,id,_){return $.keys.length;},0,0);vm_send($,"alias_method",[ID2SYM("length"),ID2SYM("size")],nil,8);vm_definemethod($,"include?",function($,id,_,_a){return $.hasKey(_a);},0,1);vm_send($,"alias_method",[ID2SYM("member?"),ID2SYM("include?")],nil,8);vm_send($,"alias_method",[ID2SYM("has_key?"),ID2SYM("include?")],nil,8);vm_send($,"alias_method",[ID2SYM("key?"),ID2SYM("include?")],nil,8);vm_definemethod($,"delete",function($,id,_,_a){$.keys.splice($.keys.indexOf(_a), 1);
    var r = $.dict[_a];
    delete $.dict[_a];
    return r;},0,1);return vm_definemethod($,"==",function($,id,_,_a){if ($ === _a) return true;
    if (_a.klass != rb_cHash) return false;
    if ($.keys.length != _a.keys.length) return false;
    for (var i = 0; i < $.keys.length; i++) {
      var k = $.keys[i];
      var v = $.get(k);
      if(!vm_send(v,"==",[_a.get(_a.keys[i])],nil,0)) return false;
    }
    return true;},0,1);},0);});opal_boot_file("core/core/json.rb",function($){var _ = nil;vm_defineclass($,nil,"JSON",function($){},2);vm_defineclass($,nil,"String",function($){return vm_definemethod($,"to_json",function($,id,_){return vm_send($,"inspect",[],nil,8);},0,0);},0);vm_defineclass($,nil,"Number",function($){return vm_definemethod($,"to_json",function($,id,_){return vm_send($,"inspect",[],nil,8);},0,0);},0);vm_defineclass($,nil,"Boolean",function($){return vm_definemethod($,"to_json",function($,id,_){return RTEST($)? "true" : "false";},0,0);},0);});opal_boot_file("core/core/kernel.rb",function($){var _ = nil;vm_defineclass($,nil,"Kernel",function($){vm_definemethod($,"nil?",function($,id,_){return false;},0,0);vm_definemethod($,"===",function($,id,_,_a){return vm_send($,"==",[_a],nil,0);},0,1);vm_definemethod($,"tap",function($,id,_){vm_yield(_,[$]);return $;},0,0);vm_definemethod($,"=~",function($,id,_){return nil;},0,0);vm_definemethod($,"!~",function($,id,_,_a){return RTEST(vm_send($,"=~",[_a],nil,0))? false : true;},0,1);vm_definemethod($,"eql?",function($,id,_,_a){return RTEST($===_a)? true : false;},0,1);vm_definemethod($,"class",function($,id,_){return rb_class_real($.klass);},0,0);vm_definemethod($,"clone",function($,id,_){return $;},0,0);vm_definemethod($,"dup",function($,id,_){return $;},0,0);vm_definemethod($,"initialize_copy",function($,id,_){return $;},0,0);vm_definemethod($,"raise",function($,id,_,_a,_b){var _c,_d;_c="";(function(){if(RTEST(vm_send(_a,"is_a?",[vm_getconstant($,"String")],nil,0))){_c=_a;return _d=vm_send(vm_getconstant($,"RuntimeError"),"new",[_c],nil,0);}else if(RTEST(vm_send(_a,"is_a?",[vm_getconstant($,"Exception")],nil,0))){return _d=_a;}else{if(RTEST(_b)){_c=_b;};return _d=vm_send(_a,"new",[_c],nil,0);}})();throw _d;return $;},0,2);vm_send($,"alias_method",[ID2SYM("fail"),ID2SYM("raise")],nil,8);vm_definemethod($,"object_id",function($,id,_){if($.hash!=undefined)return $.hash;var hash=opal_yield_hash();$.hash=hash;return hash;},0,0);vm_definemethod($,"respond_to?",function($,id,_,_a){var f= rb_search_method($.klass,(_a.klass==rb_cString)?_a:_a.ptr);if (f) return true;return false;},0,1);vm_definemethod($,"to_s",function($,id,_){var _a;_a=rb_obj_classname($);return (function(){if(RTEST($.flags&T_OBJECT)){return "#<" + _a + ":" + $.hash + ">";}else{return _a;}})();},0,0);vm_definemethod($,"inspect",function($,id,_){return vm_send($,"to_s",[],nil,8);},0,0);vm_definemethod($,"instance_of?",function($,id,_,_a){return RTEST(rb_class_real($.klass)==_a)? true : false;},0,1);vm_definemethod($,"kind_of?",function($,id,_,_a){var k = $.klass;
    while (k) {

      if (k == _a) return true;
      k = k.sup;
    }
    return false;},0,1);vm_send($,"alias_method",[ID2SYM("is_a?"),ID2SYM("kind_of?")],nil,8);vm_definemethod($,"send",function($,id,_,_a,_b){_a=arguments[3];_b=Array.prototype.slice.call(arguments,4);return vm_send($,_a,_b,nil,8);},0,1);vm_send($,"alias_method",[ID2SYM("__send__"),ID2SYM("send")],nil,8);vm_definemethod($,"instance_eval",function($,id,_,_a){(function(){if(RTEST(_a)){return vm_send($,"raise",["instance_eval with string not yet implemented"],nil,8);}})();if(!RTEST(_)){vm_send($,"raise",["no block given for instance_eval"],nil,8);};return _.call(_,$,nil,nil,$);},0,1);return vm_definemethod($,"instance_exec",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);if(!RTEST(((_ == nil) ? false : true))){vm_send($,"raise",["no block given for instance_exec"],nil,8);};_a.unshift(nil);_a.unshift(nil);_a.unshift($);return _.apply(_,_a);},0,0);},2);});opal_boot_file("core/core/match_data.rb",function($){var _ = nil;vm_defineclass($,nil,"MatchData",function($){vm_definemethod($,"initialize",function($,id,_,_a){return vm_ivarset($,"@data",_a);},0,1);vm_definemethod($,"[]",function($,id,_,_a){return vm_send($.iv_tbl['@data'],"[]",[_a],nil,0);},0,1);vm_definemethod($,"inspect",function($,id,_){return ["#<MatchData '",vm_send(vm_send($.iv_tbl['@data'],"[]",[0],nil,0),"to_s",[],nil,8),"'>"].join('');},0,0);return vm_definemethod($,"to_s",function($,id,_){return vm_send($.iv_tbl['@data'],"[]",[0],nil,0);},0,0);},0);});opal_boot_file("core/core/math.rb",function($){var _ = nil;vm_defineclass($,nil,"Math",function($){vm_setconstant($,"PI",Math.PI);vm_setconstant($,"E",Math.E);return vm_defineclass($,nil,"",function($){vm_definemethod($,"atan2",function($,id,_,_a,_b){return Math.atan2(_a,_b);},0,2);vm_definemethod($,"cos",function($,id,_,_a){return Math.cos(_a);},0,1);vm_definemethod($,"sin",function($,id,_,_a){return Math.sin(_a);},0,1);vm_definemethod($,"tan",function($,id,_,_a){return Math.tan(_a);},0,1);vm_definemethod($,"acos",function($,id,_,_a){return Math.acos(_a);},0,1);vm_definemethod($,"asin",function($,id,_,_a){return Math.asin(_a);},0,1);vm_definemethod($,"atan",function($,id,_,_a){return Math.atan(_a);},0,1);vm_definemethod($,"exp",function($,id,_,_a){return Math.exp(_a);},0,1);vm_definemethod($,"log",function($,id,_,_a){return Math.log(_a);},0,1);return vm_definemethod($,"sqrt",function($,id,_,_a){return Math.sqrt(_a);},0,1);},1);},2);});opal_boot_file("core/core/module.rb",function($){var _ = nil;vm_defineclass($,nil,"Module",function($){vm_definemethod($,"attr_accessor",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);vm_send($,"attr_reader",(function(){var a=[],b=nil;b = _a;for(var i = 0; i < b.length; i++){a.push(b[i]);};return a;})(),nil,8);return vm_send($,"attr_writer",(function(){var a=[],b=nil;b = _a;for(var i = 0; i < b.length; i++){a.push(b[i]);};return a;})(),nil,8);},0,0);vm_definemethod($,"attr_reader",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);return vm_send(_a,"each",[],function($$,__,ID,_b){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){_b=vm_send(_b,"to_s",[],nil,0);return vm_send($,"define_method",[_b],function($$,__,ID){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){return rb_ivar_get($,"@" + _b);}},8);}},0);},0,0);vm_definemethod($,"attr_writer",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);return vm_send(_a,"each",[],function($$,__,ID,_b){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){_b=vm_send(_b,"to_s",[],nil,0);vm_send($,"puts",[["doing ",vm_send(_b,"to_s",[],nil,8)].join('')],nil,8);return vm_send($,"define_method",[[vm_send(_b,"to_s",[],nil,8),"="].join('')],function($$,__,ID,_c){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){return rb_ivar_set($,"@" + _b,_c);}},8);}},0);},0,0);vm_definemethod($,"===",function($,id,_,_a){return vm_send(_a,"kind_of?",[$],nil,0);},0,1);vm_definemethod($,"to_s",function($,id,_){return $.iv_tbl.__classid__;},0,0);vm_definemethod($,"extend",function($,id,_,_a){return rb_include_module(rb_singleton_class($), _a);},0,1);vm_definemethod($,"include",function($,id,_,_a){return rb_include_module($, _a);},0,1);vm_definemethod($,"ancestors",function($,id,_){var a = [], k = $;while (k) {a.push(k);k = k.sup;}return a;},0,0);return vm_definemethod($,"superclass",function($,id,_){return $.sup;},0,0);},0);});opal_boot_file("core/core/net/http.rb",function($){var _ = nil;vm_defineclass($,nil,"Net",function($){vm_defineclass($,vm_getconstant($,"StandardError"),"HTTPBadResponse",function($){},0);vm_defineclass($,vm_getconstant($,"StandardError"),"HTTPHeaderSyntaxError",function($){},0);vm_defineclass($,nil,"HTTP",function($){vm_definemethod(vm_getconstant($,"HTTP"),"default_port",function($,id,_){return 80;},1,0);vm_definemethod(vm_getconstant($,"HTTP"),"get",function($,id,_,_a,_b,_c){return vm_send($,"get_response",[_a,_b,_c],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),8);},1,3);vm_definemethod(vm_getconstant($,"HTTP"),"get_response",function($,id,_,_a,_b,_c){var _f,_d;return (function(){if(RTEST(_b)){_d=_a;return vm_send(vm_send($,"new",[_d,ORTEST(function(){return _c;},function(){return vm_send(vm_getconstant($,"HTTP"),"default_port",[],nil,0);})],nil,8),"start",[],function($$,__,ID,_e){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){rb_return(vm_send(_e,"request_get",[_b],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),0));}},0);}else{_f=_a;return vm_send(vm_send($,"new",[vm_send(_f,"host",[],nil,0),vm_send(_f,"port",[],nil,0)],nil,8),"start",[],function($$,__,ID,_g){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){rb_return(vm_send(_g,"request_get",[vm_send(_f,"request_uri",[],nil,0)],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),0));}},0);}})();},1,3);vm_definemethod($,"initialize",function($,id,_,_a,_b){vm_ivarset($,"@host",_a);vm_ivarset($,"@port",ORTEST(function(){return _b;},function(){return 80;}));vm_ivarset($,"@started",false);return vm_ivarset($,"@async",true);},0,2);vm_definemethod($,"inspect",function($,id,_){return ["#<Net::HTTP ",vm_send($.iv_tbl['@address'],"to_s",[],nil,8),":",vm_send($.iv_tbl['@port'],"to_s",[],nil,8)," open=",vm_send($.iv_tbl['@started'],"to_s",[],nil,8),">"].join('');},0,0);vm_definemethod($,"started?",function($,id,_){return $.iv_tbl['@started'];},0,0);vm_definemethod($,"start",function($,id,_){if(RTEST($.iv_tbl['@started'])){vm_send($,"raise",["HTTP session already opened"],nil,8);};(function(){if(RTEST(((_ == nil) ? false : true))){vm_send($,"do_start",[],nil,8);return vm_yield(_,[$]);}else{return vm_send($,"raise",[["no block given to Net::HTTP","#start"].join('')],nil,8);}})();return $;},0,0);vm_definemethod($,"do_start",function($,id,_){vm_ivarset($,"@started",true);return vm_send($,"connect",[],nil,8);},0,0);vm_definemethod($,"connect",function($,id,_){return $;},0,0);vm_definemethod($,"finish",function($,id,_){if(!RTEST($.iv_tbl['@started'])){vm_send($,"raise",["HTTP session not yet started"],nil,8);};return $;},0,0);vm_definemethod($,"body",function($,id,_){return $.iv_tbl['@body'];},0,0);vm_definemethod($,"get",function($,id,_,_a,_b,_c){var _d;_d=vm_send($,"request",[vm_send(vm_getconstant($,"Get"),"new",[_a,_b],nil,0)],function($$,__,ID,_e){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){}},8);return _d;},0,3);vm_definemethod($,"request_get",function($,id,_,_a,_b){return vm_send($,"request",[vm_send(vm_getconstant($,"Get"),"new",[_a,_b],nil,0)],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),8);},0,2);vm_definemethod($,"request",function($,id,_,_a,_b){var _c;(function(){if(!RTEST(vm_send($,"started?",[],nil,8))){return vm_send($,"start",[],function($$,__,ID){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){rb_return(vm_send($,"request",[_a,_b],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),8));}},8);}})();_c=vm_send($,"transport_request",[_a],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),8);return _c;},0,2);return vm_definemethod($,"transport_request",function($,id,_,_a){return vm_send(_a,"exec",[$],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),0);},0,1);},0);vm_defineclass($,nil,"HTTPResponse",function($){return vm_defineclass($,nil,"",function($){vm_definemethod($,"body_permitted?",function($,id,_){return vm_getconstant($,"HAS_BODY");},0,0);return vm_definemethod($,"exception_type",function($,id,_){return vm_getconstant($,"EXCEPTION_TYPE");},0,0);},1);},0);vm_defineclass($,vm_getconstant($,"HTTPResponse"),"HTTPUnknownResponse",function($){return vm_setconstant($,"HAS_BODY",true);},0);vm_defineclass($,vm_getconstant($,"HTTPResponse"),"HTTPSuccess",function($){return vm_setconstant($,"HAS_BODY",true);},0);vm_defineclass($,vm_getconstant($,"HTTPSuccess"),"HTTPOK",function($){return vm_setconstant($,"HAS_BODY",true);},0);vm_defineclass($,nil,"HTTPHeader",function($){vm_definemethod($,"initialize_http_header",function($,id,_,_a){vm_ivarset($,"@header",rb_hash_new());if(!RTEST(_a)){rb_return(nil);};return vm_send(_a,"each",[],function($$,__,ID,_b,_c){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){return vm_send($.iv_tbl['@header'],"[]=",[vm_send(_b,"downcase",[],nil,0),[_c]],nil,0);}},0);},0,1);vm_definemethod($,"[]",function($,id,_,_a){var _b;(function(){if(!RTEST(_b=vm_send($.iv_tbl['@header'],"[]",[vm_send(_a,"downcase",[],nil,0)],nil,0))){rb_return(nil);}})();return vm_send(_b,"join",[", "],nil,0);},0,1);return vm_definemethod($,"[]=",function($,id,_,_a,_b){(function(){if(!RTEST(_b)){vm_send($.iv_tbl['@header'],"delete",[vm_send(_a,"downcase",[],nil,0)],nil,0);rb_return(_b);}})();return vm_send($.iv_tbl['@header'],"[]=",[vm_send(_a,"downcase",[],nil,0),[_b]],nil,0);},0,2);},2);vm_defineclass($,nil,"HTTPResponse",function($){vm_setconstant($,"CODE_TO_OBJ",rb_hash_new());vm_defineclass($,nil,"",function($){return nil},1);vm_send($,"include",[vm_getconstant($,"HTTPHeader")],nil,8);vm_definemethod($,"initialize",function($,id,_,_a,_b,_c){vm_ivarset($,"@http_version",_a);vm_ivarset($,"@code",_b);vm_ivarset($,"@message",_c);vm_send($,"initialize_http_header",[nil],nil,8);vm_ivarset($,"@body",nil);return vm_ivarset($,"@read",false);},0,3);vm_send($,"attr_reader",[ID2SYM("http_version"),ID2SYM("code"),ID2SYM("message")],nil,8);vm_send($,"attr_accessor",[ID2SYM("body")],nil,8);return vm_definemethod($,"inspect",function($,id,_){return ["#<",vm_send(vm_send($,"class",[],nil,0),"to_s",[],nil,8)," ",vm_send($.iv_tbl['@code'],"to_s",[],nil,8)," ",vm_send($.iv_tbl['@message'],"to_s",[],nil,8)," readbody=",vm_send($.iv_tbl['@read'],"to_s",[],nil,8),">"].join('');},0,0);},0);vm_defineclass($,nil,"HTTPGenericRequest",function($){vm_send($,"include",[vm_getconstant($,"HTTPHeader")],nil,8);vm_definemethod($,"initialize",function($,id,_,_a,_b,_c,_d,_e){vm_ivarset($,"@method",_a);vm_ivarset($,"@request_has_body",_b);vm_ivarset($,"@response_has_body",_c);if(!RTEST(_d)){vm_send($,"raise",[vm_getconstant($,"ArgumentError"),"no HTTP request path given"],nil,8);};if(RTEST(vm_send(_d,"empty?",[],nil,0))){vm_send($,"raise",[vm_getconstant($,"ArgumentError"),"HTTP request path is empty"],nil,8);};vm_ivarset($,"@path",_d);vm_send($,"initialize_http_header",[_e],nil,8);return vm_ivarset($,"@body",nil);},0,5);vm_send($,"attr_reader",[ID2SYM("method"),ID2SYM("path"),ID2SYM("body")],nil,8);vm_definemethod($,"body=",function($,id,_,_a){return vm_ivarset($,"@body",_a);},0,1);return vm_definemethod($,"exec",function($,id,_,_a){vm_send($,"puts",[["need to load ",vm_send(vm_send(_a,"inspect",[],nil,0),"to_s",[],nil,8)].join('')],nil,8);var r=opal_http_request_new();r.open("GET",$.iv_tbl['@path'],true);r.onreadystatechange=function(){if(r.readyState==4){}};r.send(null);},0,1);},0);vm_defineclass($,vm_getconstant($,"HTTPGenericRequest"),"HTTPRequest",function($){return vm_definemethod($,"initialize",function($,id,_,_a,_b){return rb_super($,id,arguments.callee,vm_getconstant(vm_send($,"class",[],nil,0),"METHOD"),vm_getconstant(vm_send($,"class",[],nil,0),"REQUEST_HAS_BODY"),vm_getconstant(vm_send($,"class",[],nil,0),"RESPONSE_HAS_BODY"),_a,_b);},0,2);},0);vm_defineclass($,nil,"HTTP",function($){vm_defineclass($,vm_getconstant($,"HTTPRequest"),"Get",function($){vm_setconstant($,"METHOD","GET");vm_setconstant($,"REQUEST_HAS_BODY",false);return vm_setconstant($,"RESPONSE_HAS_BODY",true);},0);vm_defineclass($,vm_getconstant($,"HTTPRequest"),"Post",function($){vm_setconstant($,"METHOD","POST");vm_setconstant($,"REQUEST_HAS_BODY",true);return vm_setconstant($,"RESPONSE_HAS_BODY",true);},0);vm_defineclass($,vm_getconstant($,"HTTPRequest"),"Put",function($){vm_setconstant($,"METHOD","PUT");vm_setconstant($,"REQUEST_HAS_BODY",true);return vm_setconstant($,"RESPONSE_HAS_BODY",true);},0);return vm_defineclass($,vm_getconstant($,"HTTPRequest"),"Delete",function($){vm_setconstant($,"METHOD","DELETE");vm_setconstant($,"REQUEST_HAS_BODY",false);return vm_setconstant($,"RESPONSE_HAS_BODY",true);},0);},0);return vm_defineclass($,vm_getconstant($,"StandardError"),"HTTPError",function($){},0);},2);});opal_boot_file("core/core/net/jsonp.rb",function($){var _ = nil;vm_send($,"require",[vm_send(vm_getconstant($,"File"),"join",[vm_send(vm_getconstant($,"File"),"dirname",["core/core/net/jsonp.rb"],nil,0),"http"],nil,0)],nil,8);vm_defineclass($,nil,"Net",function($){vm_defineclass($,nil,"JSONP",function($){},0);vm_defineclass($,nil,"JSONPRequest",function($){},0);return vm_defineclass($,nil,"JSONPResponse",function($){},0);},2);});opal_boot_file("core/core/net/protocol.rb",function($){var _ = nil;});opal_boot_file("core/core/nil.rb",function($){var _ = nil;vm_defineclass($,nil,"NilClass",function($){vm_definemethod($,"to_s",function($,id,_){return "";},0,0);vm_definemethod($,"inspect",function($,id,_){return "nil";},0,0);vm_definemethod($,"&",function($,id,_,_a){return false;},0,1);vm_definemethod($,"|",function($,id,_,_a){return RTEST(_a)? true : false;},0,1);vm_definemethod($,"^",function($,id,_,_a){return RTEST(_a)? true : false;},0,1);vm_definemethod($,"to_a",function($,id,_){return [];},0,0);vm_definemethod($,"to_f",function($,id,_){return 0.0;},0,0);vm_definemethod($,"to_i",function($,id,_){return 0;},0,0);vm_definemethod($,"==",function($,id,_,_a){return (_a === nil || _a === null || _a === undefined);},0,1);return vm_definemethod($,"nil?",function($,id,_){return true;},0,0);},0);});opal_boot_file("core/core/number.rb",function($){var _ = nil;vm_defineclass($,nil,"Number",function($){vm_definemethod($,"+",function($,id,_,_a){return $+_a;},0,1);vm_definemethod($,"-",function($,id,_,_a){return $-_a;},0,1);vm_definemethod($,"*",function($,id,_,_a){return $*_a;},0,1);vm_definemethod($,"/",function($,id,_,_a){return $/_a;},0,1);vm_definemethod($,"%",function($,id,_,_a){return $%_a;},0,1);vm_definemethod($,"**",function($,id,_,_a){return Math.pow($,_a);},0,1);vm_definemethod($,">",function($,id,_,_a){return $>_a;},0,1);vm_definemethod($,">=",function($,id,_,_a){return $>=_a;},0,1);vm_definemethod($,"<",function($,id,_,_a){return $<_a;},0,1);vm_definemethod($,"<=",function($,id,_,_a){return $<=_a;},0,1);vm_definemethod($,"to_s",function($,id,_){return $.toString();},0,0);vm_definemethod($,"inspect",function($,id,_){return $.toString();},0,0);vm_definemethod($,"+@",function($,id,_){return $;},0,0);vm_definemethod($,"-@",function($,id,_){return -$;},0,0);vm_definemethod($,"<=>",function($,id,_,_a){if(a===b)return 0;if(a<b)return -1;return 1;},0,1);vm_definemethod($,"real?",function($,id,_){return $!=Math.round($);},0,0);vm_definemethod($,"integer?",function($,id,_){return $==Math.round($);},0,0);vm_definemethod($,"nonzero?",function($,id,_){return $!==0;},0,0);vm_definemethod($,"zero?",function($,id,_){return $===0;},0,0);vm_definemethod($,"==",function($,id,_,_a){return $===_a;},0,1);vm_definemethod($,"eql?",function($,id,_,_a){return $===_a;},0,1);vm_definemethod($,"even?",function($,id,_){return ($%2==0)?true:false;},0,0);vm_definemethod($,"odd?",function($,id,_){return ($%2==0)?false:true;},0,0);vm_definemethod($,"pred",function($,id,_){return --$;},0,0);vm_definemethod($,"next",function($,id,_){return ++$;},0,0);vm_send($,"alias_method",[ID2SYM("succ"),ID2SYM("next")],nil,8);vm_definemethod($,"<<",function($,id,_,_a){return $<<_a;},0,1);vm_definemethod($,">>",function($,id,_,_a){return $>>_a;},0,1);vm_definemethod($,"&",function($,id,_,_a){return $&_a;},0,1);vm_definemethod($,"|",function($,id,_,_a){return $|_a;},0,1);vm_definemethod($,"^",function($,id,_,_a){return $^_a;},0,1);vm_definemethod($,"~",function($,id,_){return ~$;},0,0);vm_definemethod($,"to_f",function($,id,_){return parseFloat($);},0,0);vm_definemethod($,"to_i",function($,id,_){return parseInt($);},0,0);vm_send($,"alias_method",[ID2SYM("to_int"),ID2SYM("to_i")],nil,8);vm_definemethod($,"floor",function($,id,_){return Math.floor($);},0,0);vm_definemethod($,"ceil",function($,id,_){return Math.ceil($);},0,0);vm_definemethod($,"round",function($,id,_){return Math.round($);},0,0);vm_definemethod($,"truncate",function($,id,_){return Math.round($);},0,0);vm_definemethod($,"times",function($,id,_,_a){for(var i=0;i<_a;i++){vm_yield(_,[i]);}return $;},0,1);vm_definemethod($,"upto",function($,id,_,_a){if(RTEST(_a<$)){rb_return($);};for(var i=$;i<=_a;i++){vm_yield(_,[i]);}return $;},0,1);return vm_definemethod($,"downto",function($,id,_,_a){if(RTEST(_a>$)){rb_return($);};for(var i=$;i>=_a;i--){vm_yield(_,[i]);}return $;},0,1);},0);vm_setconstant($,"Fixnum",vm_getconstant($,"Number"));vm_setconstant($,"Float",vm_getconstant($,"Number"));});opal_boot_file("core/core/proc.rb",function($){var _ = nil;vm_defineclass($,nil,"Proc",function($){vm_definemethod($,"new",function($,id,_){return _;},1,0);vm_definemethod($,"call",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);_a.unshift(nil);_a.unshift(nil);_a.unshift(nil);try{return $.apply($,_a);}catch(e){if (e.klass==rb_eLocalJumpError){if(e.iv_tbl.type=="return"){return e.iv_tbl.args;}}throw e}},0,0);vm_send($,"alias_method",[ID2SYM("==="),ID2SYM("call")],nil,8);vm_send($,"alias_method",[ID2SYM("yield"),ID2SYM("call")],nil,8);vm_send($,"alias_method",[ID2SYM("[]"),ID2SYM("call")],nil,8);return vm_definemethod($,"to_proc",function($,id,_){return $;},0,0);},0);vm_defineclass($,nil,"Kernel",function($){vm_definemethod($,"proc",function($,id,_){return _;},0,0);return vm_definemethod($,"lambda",function($,id,_){return _;},0,0);},2);});opal_boot_file("core/core/re.rb",function($){var _ = nil;vm_defineclass($,nil,"Regexp",function($){vm_definemethod($,"new",function($,id,_,_a){return new RegExp(_a);},1,1);vm_definemethod($,"===",function($,id,_,_a){return $.exec(_a) ? true : false;},0,1);vm_definemethod($,"match",function($,id,_,_a){var _b;return (function(){if(RTEST(_b=$.exec(_a))){return vm_send(vm_getconstant($,"MatchData"),"new",[_b],nil,0);}else{return nil;}})();},0,1);return vm_definemethod($,"inspect",function($,id,_){return $.toString();},0,0);},0);});opal_boot_file("core/core/string.rb",function($){var _ = nil;vm_defineclass($,nil,"String",function($){vm_definemethod($,"==",function($,id,_,_a){return $===_a;},0,1);vm_definemethod($,"eql?",function($,id,_,_a){return $===_a;},0,1);vm_definemethod($,"empty?",function($,id,_){return $.length==0;},0,0);vm_definemethod($,"reverse",function($,id,_){return $.split("").reverse().join("");},0,0);vm_definemethod($,"intern",function($,id,_){return ID2SYM($);},0,0);vm_send($,"alias_method",[ID2SYM("to_sym"),ID2SYM("intern")],nil,8);vm_definemethod($,"length",function($,id,_){return $.length;},0,0);vm_send($,"alias_method",[ID2SYM("size"),ID2SYM("length")],nil,8);vm_definemethod($,"+",function($,id,_,_a){return $+_a;},0,1);vm_definemethod($,"to_s",function($,id,_){return new String($);},0,0);vm_send($,"alias_method",[ID2SYM("to_str"),ID2SYM("to_s")],nil,8);vm_definemethod($,"inspect",function($,id,_){return '"'+$+'"';},0,0);vm_definemethod($,"upcase",function($,id,_){return $.toUpperCase();},0,0);vm_definemethod($,"downcase",function($,id,_){return $.toLowerCase();},0,0);vm_definemethod($,"capitalize",function($,id,_){return $[0].toUpperCase() + $.substr(1).toLowerCase();},0,0);vm_definemethod($,"*",function($,id,_,_a){var res=[];
    for(var i=0;i<_a;i++){res.push($);}
    return res.join("");},0,1);vm_definemethod($,"each",function($,id,_){return vm_send($,"raise",[["String","#each not yet implemented"].join('')],nil,8);},0,0);return vm_send($,"alias_method",[ID2SYM("each_line"),ID2SYM("each")],nil,8);},0);});opal_boot_file("core/core/symbol.rb",function($){var _ = nil;vm_defineclass($,nil,"Symbol",function($){vm_definemethod($,"==",function($,id,_,_a){return ($===_a)?true:false;},0,1);vm_definemethod($,"inspect",function($,id,_){return ":" + $.ptr;},0,0);vm_definemethod($,"to_s",function($,id,_){return $.ptr;},0,0);vm_send($,"alias_method",[ID2SYM("id2name"),ID2SYM("to_s")],nil,8);vm_definemethod($,"to_sym",function($,id,_){return $;},0,0);vm_send($,"alias_method",[ID2SYM("intern"),ID2SYM("to_sym")],nil,8);vm_definemethod($,"to_proc",function($,id,_){var id = $.ptr;
    var f = function($$, id, _, o) {
      var args = Array.prototype.slice.call(arguments, 3);
      return vm_send(o, id, args, nil, 8);
    };
    return f;},0,0);vm_definemethod($,"succ",function($,id,_){return $;},0,0);vm_send($,"alias_method",[ID2SYM("next"),ID2SYM("succ")],nil,8);vm_definemethod($,"length",function($,id,_){return $.ptr.length;},0,0);vm_send($,"alias_method",[ID2SYM("size"),ID2SYM("length")],nil,8);vm_definemethod($,"upcase",function($,id,_){return ID2SYM($.ptr.toUpperCase());},0,0);vm_definemethod($,"downcase",function($,id,_){return ID2SYM($.ptr.toLowerCase());},0,0);return vm_definemethod($,"capitalize",function($,id,_){return ID2SYM($.ptr[0].toUpperCase() + $.ptr.substr(1).toLowerCase());},0,0);},0);});opal_boot_file("core/core/time.rb",function($){var _ = nil;vm_defineclass($,nil,"Time",function($){vm_send($,"attr_reader",[ID2SYM("native")],nil,8);vm_definemethod($,"now",function($,id,_){return vm_send($,"new",[],nil,8);},1,0);vm_definemethod($,"initialize",function($,id,_){return vm_ivarset($,"@native",new Date());},0,0);vm_definemethod($,"to_s",function($,id,_){return $.iv_tbl['@native'].toString();},0,0);vm_definemethod($,"inspect",function($,id,_){return $.iv_tbl['@native'].toString();},0,0);return vm_definemethod($,"-",function($,id,_,_a){return $.iv_tbl['@native']-vm_send(_a,"native",[],nil,0);},0,1);},0);});opal_boot_file("core/core/top_self.rb",function($){var _ = nil;vm_definemethod($,"to_s",function($,id,_){return "main";},0,0);vm_definemethod($,"inspect",function($,id,_){return "main";},0,0);});opal_boot_file("core/core/uri/common.rb",function($){var _ = nil;vm_defineclass($,nil,"URI",function($){vm_defineclass($,nil,"REGEXP",function($){return vm_defineclass($,nil,"PATTERN",function($){vm_setconstant($,"ALPHA","a-zA-Z");vm_setconstant($,"ALNUM",[vm_send(vm_getconstant($,"ALPHA"),"to_s",[],nil,8),"\\d"].join(''));vm_setconstant($,"HEX","a-fA-F\\d");vm_setconstant($,"ESCAPED",["%[",vm_send(vm_getconstant($,"HEX"),"to_s",[],nil,8),"]{2}"].join(''));vm_setconstant($,"UNRESERVED",["-_.!~*'()",vm_send(vm_getconstant($,"ALNUM"),"to_s",[],nil,8)].join(''));vm_setconstant($,"RESERVED",";/?:@&=+$,\\[\\]");vm_setconstant($,"DOMLABEL",["(?:[",vm_send(vm_getconstant($,"ALNUM"),"to_s",[],nil,8),"](?:[-",vm_send(vm_getconstant($,"ALNUM"),"to_s",[],nil,8),"]*[",vm_send(vm_getconstant($,"ALNUM"),"to_s",[],nil,8),"])?)"].join(''));vm_setconstant($,"TOPLABEL",["(?:[",vm_send(vm_getconstant($,"ALNUM"),"to_s",[],nil,8),"](?:[-",vm_send(vm_getconstant($,"ALNUM"),"to_s",[],nil,8),"]*[",vm_send(vm_getconstant($,"ALNUM"),"to_s",[],nil,8),"])?)"].join(''));return vm_setconstant($,"HOSTNAME",["(?:",vm_send(vm_getconstant($,"DOMLABEL"),"to_s",[],nil,8),"\\.)*",vm_send(vm_getconstant($,"TOPLABEL"),"to_s",[],nil,8),"\\.?"].join(''));},2);},2);vm_defineclass($,nil,"Parser",function($){vm_send($,"include",[vm_getconstant($,"REGEXP")],nil,8);vm_definemethod($,"initialize",function($,id,_,_a){return vm_ivarset($,"@pattern",vm_send($,"initialize_pattern",[_a],nil,8));},0,1);vm_send($,"attr_reader",[ID2SYM("pattern"),ID2SYM("regexp")],nil,8);vm_definemethod($,"split",function($,id,_,_a){return (function($c){if(vm_send("",'===',[$c],nil,0)) {}else {return vm_send($,"raise",[["not yet imp Parser","#split"].join('')],nil,8);}})(_a);},0,1);vm_definemethod($,"parse",function($,id,_,_a){vm_send($,"puts",[vm_send($,"split",[_a],nil,0)],nil,8);return "uri";},0,1);vm_definemethod($,"join",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);},0,0);vm_definemethod($,"extract",function($,id,_,_a,_b){},0,2);vm_definemethod($,"make_regexp",function($,id,_){},0,0);vm_definemethod($,"escape",function($,id,_){},0,0);vm_definemethod($,"unescape",function($,id,_){},0,0);vm_definemethod($,"initialize_pattern",function($,id,_,_a){var _e,_b,_g,_d,_c,_h,_f;_b=rb_hash_new();vm_send(_b,"[]=",[ID2SYM("ESCAPED"),_c=vm_getconstant(vm_getconstant($,"PATTERN"),"ESCAPED")],nil,0);vm_send(_b,"[]=",[ID2SYM("UNRESERVED"),_d=vm_getconstant(vm_getconstant($,"PATTERN"),"UNRESERVED")],nil,0);vm_send(_b,"[]=",[ID2SYM("RESERVED"),_e=vm_getconstant(vm_getconstant($,"PATTERN"),"RESERVED")],nil,0);vm_send(_b,"[]=",[ID2SYM("DOMLABEL"),_f=vm_getconstant(vm_getconstant($,"PATTERN"),"DOMLABEL")],nil,0);vm_send(_b,"[]=",[ID2SYM("TOPLABEL"),_g=vm_getconstant(vm_getconstant($,"PATTERN"),"TOPLABEL")],nil,0);vm_send(_b,"[]=",[ID2SYM("HOSTNAME"),_h=vm_getconstant(vm_getconstant($,"PATTERN"),"HOSTNAME")],nil,0);vm_send($,"puts",[vm_send(vm_getconstant($,"Regexp"),"new",[vm_optplus("^",vm_optplus(vm_send(_b,"[]",[ID2SYM("HOSTNAME")],nil,0),"$"))],nil,0)],nil,8);return _b;},0,1);return vm_definemethod($,"initialize_regexp",function($,id,_,_a){var _b;return _b=rb_hash_new();},0,1);},0);vm_setconstant($,"DEFAULT_PARSER",vm_send(vm_getconstant($,"Parser"),"new",[],nil,0));vm_defineclass($,nil,"Util",function($){},2);vm_send($,"include",[vm_getconstant($,"REGEXP")],nil,8);vm_ivarset($,"@schemes",rb_hash_new());vm_definemethod($,"scheme_list",function($,id,_){return $.iv_tbl['@schemes'];},1,0);vm_defineclass($,vm_getconstant($,"StandardError"),"Error",function($){},0);vm_defineclass($,vm_getconstant($,"Error"),"InvalidURIError",function($){},0);vm_defineclass($,vm_getconstant($,"Error"),"InvalidComponentError",function($){},0);vm_defineclass($,vm_getconstant($,"Error"),"BadURIError",function($){},0);vm_definemethod($,"split",function($,id,_,_a){return vm_send(vm_getconstant($,"DEFAULT_PARSER"),"split",[_a],nil,0);},1,1);return vm_definemethod($,"parse",function($,id,_,_a){return vm_send(vm_getconstant($,"DEFAULT_PARSER"),"parse",[_a],nil,0);},1,1);},2);vm_defineclass($,nil,"Kernel",function($){return vm_definemethod($,"URI",function($,id,_,_a){return vm_send(vm_getconstant($,"URI"),"parse",[_a],nil,0);},0,1);},2);});opal_boot_file("core/core/uri/generic.rb",function($){var _ = nil;vm_send($,"require",[vm_send(vm_getconstant($,"File"),"join",[vm_send(vm_getconstant($,"File"),"dirname",["core/core/uri/generic.rb"],nil,0),"common"],nil,0)],nil,8);vm_defineclass($,nil,"URI",function($){return vm_defineclass($,nil,"Generic",function($){vm_send($,"include",[vm_getconstant($,"URI")],nil,8);vm_setconstant($,"DEFAULT_PORT",nil);vm_definemethod($,"default_port",function($,id,_){return vm_getconstant($,"DEFAULT_PORT");},1,0);vm_definemethod($,"default_port",function($,id,_){return vm_send(vm_send($,"class",[],nil,0),"default_port",[],nil,0);},0,0);vm_send($,"attr_reader",[ID2SYM("scheme"),ID2SYM("host"),ID2SYM("port"),ID2SYM("registry"),ID2SYM("path")],nil,8);return vm_send($,"attr_reader",[ID2SYM("query"),ID2SYM("opaque"),ID2SYM("fragment"),ID2SYM("parser")],nil,8);},0);},2);});opal_boot_file("core/core/uri/http.rb",function($){var _ = nil;vm_send($,"require",[vm_send(vm_getconstant($,"File"),"join",[vm_send(vm_getconstant($,"File"),"dirname",["core/core/uri/http.rb"],nil,0),"generic"],nil,0)],nil,8);vm_defineclass($,nil,"URI",function($){vm_defineclass($,nil,"HTTP",function($){vm_setconstant($,"DEFAULT_PORT",80);vm_setconstant($,"COMPONENT",[ID2SYM("scheme"),ID2SYM("userinfo"),ID2SYM("host"),ID2SYM("port"),ID2SYM("path"),ID2SYM("query"),ID2SYM("fragment")]);vm_definemethod($,"initialize",function($,id,_,_a){_a=Array.prototype.slice.call(arguments,3);},0,0);return vm_definemethod($,"request_uri",function($,id,_){},0,0);},0);return vm_send($.iv_tbl['@schemes'],"[]=",["HTTP",vm_getconstant($,"HTTP")],nil,0);},2);});opal_boot_file("core/core/uri/mailto.rb",function($){var _ = nil;vm_send($,"require",[vm_send(vm_getconstant($,"File"),"join",[vm_send(vm_getconstant($,"File"),"dirname",["core/core/uri/mailto.rb"],nil,0),"generic"],nil,0)],nil,8);vm_defineclass($,nil,"URI",function($){return vm_defineclass($,vm_getconstant($,"Generic"),"MailTo",function($){vm_send($,"include",[vm_getconstant($,"REGEXP")],nil,8);vm_setconstant($,"DEFAULT_PORT",nil);vm_setconstant($,"COMPONENT",[ID2SYM("scheme"),ID2SYM("to"),ID2SYM("headers")]);return vm_setconstant($,"HEADER_PATTERN","(?:[^?=&]*=[^?=&]*)");},0);},2);});opal_boot_file("core/core/uri.rb",function($){var _ = nil;vm_defineclass($,nil,"URI",function($){},2);});
var opal_cAjax;var opal_jsonp_prefix="opal_jsonp_";var opal_jsonp_counter=0;var opal_ajax_k_data_types=['xml','html','script','json','jsonp','text'];function opal_ajax_request(ajax,url,options){var _=opal_block;opal_block=nil;var data_type;if(rb_hash_has_key(options,ID2SYM('data_type'))){data_type=rb_hash_delete(options,ID2SYM('data_type'));if(opal_ajax_k_data_types.indexOf(data_type)==-1){throw data_type+" is a bad data type for Ajax#request"}}
else{}
switch(data_type){case'jsonp':var callback=opal_jsonp_prefix+(opal_jsonp_counter++);url+="?callback="+callback;window[callback]=function(r){if(_!==nil){vm_yield(_,[opal_json_2_ruby_json(r)]);}};var script=document.createElement("script");script.setAttribute("src",url);script.setAttribute("type","text/javascript");document.body.appendChild(script);break;default:throw"unimplemented datatype for ajax#request"}};function opal_ajax_s_get(ajax,url,options){return opal_ajax_request(ajax,url,options);};function Init_Ajax(){opal_cAjax=rb_define_class("Ajax",rb_cObject);rb_define_singleton_method(opal_cAjax,"get",opal_ajax_s_get,1);};
function opal_define_file(name,body){vn_fs_define_file(name,body);};function opal_boot_file(file,body){opal_boot_files.push(vn_fs_define_file(file,body));};function opal_init(){ruby_init();opal_browser_init();ruby_script("embedded");ruby_init_loadpath();ruby_incpush("");ruby_incpush("vendor/");for(var i=0;i<opal_boot_files.length;i++){rb_require_file(opal_boot_files[i].path);}};function opal_browser_main(name){rb_loadpath(name);};function opal_require_main(file_name){file_name=file_name+"?"+Math.floor(Math.random()*1000);ruby_init();opal_browser_init();ruby_script("embedded");ruby_init_loadpath();ruby_incpush("");var http=opal_http_request_new();http.open("GET",file_name,true);http.onreadystatechange=function(){if(http.readyState==4){rb_vm_eval_str(opal_top_self,http.responseText);}};http.send(null);};function opal_run_tags(){ruby_init();opal_browser_init();ruby_script("embedded");ruby_init_loadpath();ruby_incpush("");var src_contents={};var src_filenames=[];opal_document_ready_q(opal_oDocument,nil,function(){var tags=document.getElementsByTagName("script");for(var i=0;i<tags.length;i++){if(tags[i].type==="text/ruby"){if(tags[i].src){console.log(tags[i].src+" text");console.log(tags[i].innerText);src_filenames.push(tags[i].src);var http=opal_http_request_new();http.open("GET",tags[i].src,false);http.onreadystatechange=function(){if(http.readyState==4){src_contents[tags[i].src]=http.responseText;}};http.send(null);}
else{var filename="inline_"+src_filesnames.length;src_filesnames.push(filename);src_contents[filename]=tags[i].text;}}}});};function opal_browser_init(){Init_Ajax();};function opal_require(path){opal_require_main(path);};
(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0;});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[];}
if(!selector||typeof selector!=="string"){return results;}
var parts=[],m,set,checkSet,extra,prune=true,contextXML=isXML(context),soFar=selector,ret,cur,pop,i;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break;}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context);}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift();}
set=posProcess(selector,set);}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];}
if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set);}else{prune=false;}
while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur="";}else{pop=parts.pop();}
if(pop==null){pop=context;}
Expr.relative[cur](checkSet,pop,contextXML);}}else{checkSet=parts=[];}}
if(!checkSet){checkSet=set;}
if(!checkSet){Sizzle.error(cur||selector);}
if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet);}else if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&contains(context,checkSet[i]))){results.push(set[i]);}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i]);}}}}else{makeArray(checkSet,results);}
if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results);}
return results;};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1);}}}}
return results;};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set);};Sizzle.find=function(expr,context,isXML){var set;if(!expr){return[];}
for(var i=0,l=Expr.order.length;i<l;i++){var type=Expr.order[i],match;if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break;}}}}
if(!set){set=context.getElementsByTagName("*");}
return{set:set,expr:expr};};Sizzle.filter=function(expr,set,inplace,not){var old=expr,result=[],curLoop=set,match,anyFound,isXMLFilter=set&&set[0]&&isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var filter=Expr.filter[type],found,item,left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue;}
if(curLoop===result){result=[];}
if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true;}else if(match===true){continue;}}
if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true;}else{curLoop[i]=false;}}else if(pass){result.push(item);anyFound=true;}}}}
if(found!==undefined){if(!inplace){curLoop=result;}
expr=expr.replace(Expr.match[type],"");if(!anyFound){return[];}
break;}}}
if(expr===old){if(anyFound==null){Sizzle.error(expr);}else{break;}}
old=expr;}
return curLoop;};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg;};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href");}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase();}
for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}
checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part;}}
if(isPartStrNotTag){Sizzle.filter(part,checkSet,true);}},">":function(checkSet,part){var isPartStr=typeof part==="string",elem,i=0,l=checkSet.length;if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false;}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;}}
if(isPartStr){Sizzle.filter(part,checkSet,true);}}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck,nodeCheck;if(typeof part==="string"&&!/\W/.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML);},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck,nodeCheck;if(typeof part==="string"&&!/\W/.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML);}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[];}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i]);}}
return ret.length===0?null:ret;}},TAG:function(match,context){return context.getElementsByTagName(match[1]);}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match;}
for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem);}}else if(inplace){curLoop[i]=false;}}}
return false;},ID:function(match){return match[1].replace(/\\/g,"");},TAG:function(match,curLoop){return match[1].toLowerCase();},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0;}
match[0]=done++;return match;},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name];}
if(match[2]==="~="){match[4]=" "+match[4]+" ";}
return match;},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop);}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret);}
return false;}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true;}
return match;},POS:function(match){match.unshift(true);return match;}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden";},disabled:function(elem){return elem.disabled===true;},checked:function(elem){return elem.checked===true;},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true;},parent:function(elem){return!!elem.firstChild;},empty:function(elem){return!elem.firstChild;},has:function(elem,i,match){return!!Sizzle(match[3],elem).length;},header:function(elem){return(/h\d/i).test(elem.nodeName);},text:function(elem){return"text"===elem.type;},radio:function(elem){return"radio"===elem.type;},checkbox:function(elem){return"checkbox"===elem.type;},file:function(elem){return"file"===elem.type;},password:function(elem){return"password"===elem.type;},submit:function(elem){return"submit"===elem.type;},image:function(elem){return"image"===elem.type;},reset:function(elem){return"reset"===elem.type;},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button";},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName);}},setFilters:{first:function(elem,i){return i===0;},last:function(elem,i,match,array){return i===array.length-1;},even:function(elem,i){return i%2===0;},odd:function(elem,i){return i%2===1;},lt:function(elem,i,match){return i<match[3]-0;},gt:function(elem,i,match){return i>match[3]-0;},nth:function(elem,i,match){return match[3]-0===i;},eq:function(elem,i,match){return match[3]-0===i;}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array);}else if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;}else if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false;}}
return true;}else{Sizzle.error("Syntax error, unrecognized expression: "+name);}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case'only':case'first':while((node=node.previousSibling)){if(node.nodeType===1){return false;}}
if(type==="first"){return true;}
node=elem;case'last':while((node=node.nextSibling)){if(node.nodeType===1){return false;}}
return true;case'nth':var first=match[2],last=match[3];if(first===1&&last===0){return true;}
var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count;}}
parent.sizcache=doneName;}
var diff=elem.nodeIndex-last;if(first===0){return diff===0;}else{return(diff%first===0&&diff/first>=0);}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match;},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match;},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1;},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false;},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array);}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1);};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));}
var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results;}
return array;};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var ret=results||[],i=0;if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array);}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i]);}}else{for(;array[i];i++){ret.push(array[i]);}}}
return ret;};}
var sortOrder;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b){hasDuplicate=true;}
return a.compareDocumentPosition?-1:1;}
var ret=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(ret===0){hasDuplicate=true;}
return ret;};}else if("sourceIndex"in document.documentElement){sortOrder=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b){hasDuplicate=true;}
return a.sourceIndex?-1:1;}
var ret=a.sourceIndex-b.sourceIndex;if(ret===0){hasDuplicate=true;}
return ret;};}else if(document.createRange){sortOrder=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b){hasDuplicate=true;}
return a.ownerDocument?-1:1;}
var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);if(ret===0){hasDuplicate=true;}
return ret;};}
function getText(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue;}else if(elem.nodeType!==8){ret+=getText(elem.childNodes);}}
return ret;}
(function(){var form=document.createElement("div"),id="script"+(new Date()).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[];}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match;};}
root.removeChild(form);root=form=null;})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i]);}}
results=tmp;}
return results;};}
div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2);};}
div=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div");div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return;}
Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&context.nodeType===9&&!isXML(context)){try{return makeArray(context.querySelectorAll(query),extra);}catch(e){}}
return oldSizzle(query,context,extra,seed);};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop];}
div=null;})();}
(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return;}
div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return;}
Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1]);}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i;}
if(elem.nodeName.toLowerCase()===cur){match=elem;break;}
elem=elem[dir];}
checkSet[i]=match;}}}
function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i;}
if(typeof cur!=="string"){if(elem===cur){match=true;break;}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break;}}
elem=elem[dir];}
checkSet[i]=match;}}}
var contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16);}:function(a,b){return a!==b&&(a.contains?a.contains(b):true);};var isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};var posProcess=function(selector,context){var tmpSet=[],later="",match,root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"");}
selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet);}
return Sizzle.filter(later,tmpSet);};window.Sizzle=Sizzle;})();opal_boot_file("browser/browser.rb",function($){var _ = nil;});opal_boot_file("browser/browser_events.rb",function($){var _ = nil;vm_defineclass($,nil,"BrowserEvents",function($){vm_definemethod($,"add_listener",function($,id,_,_a){var f = function(evt){vm_send($,"instance_exec",[opal_event_wrap(vm_getconstant($,"Event"),evt)],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),8);};if($.addEventListener){$.addEventListener(vm_send(_a,"to_s",[],nil,0),f,false);}else{$.attachEvent('on'+vm_send(_a,"to_s",[],nil,0), f);}return $;},0,1);return vm_definemethod($,"remove_listener",function($,id,_,_a){},0,1);},2);});opal_boot_file("browser/document.rb",function($){var _ = nil;vm_defineclass($,nil,"Document",function($){var _a,_c;_a=vm_send($,"proc",[],function($$,__,ID){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){vm_ivarset($,"@ready",true);return vm_send($.iv_tbl['@ready_blocks'],"each",[],function($$,__,ID,_b){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){return vm_send(_b,"call",[],nil,0);}},0);}},8);_c=function() { vm_send(_a,"call",[],nil,0) };;if (window.addEventListener) {window.addEventListener('load', _c, false);}else {window.attachEvent('onload', _c);}vm_ivarset($,"@ready",false);vm_ivarset($,"@ready_blocks",[]);vm_definemethod($,"ready?",function($,id,_){(function(){if(RTEST(((_ == nil) ? false : true))){return RTEST($.iv_tbl['@ready'])? vm_yield(_,[]) : vm_send($.iv_tbl['@ready_blocks'],"push",[_],nil,0);}})();return $.iv_tbl['@ready'];},1,0);vm_definemethod($,"find",function($,id,_,_a){return vm_send(vm_getconstant($,"Element"),"find",[_a],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),0);},1,1);vm_definemethod($,"[]",function($,id,_,_a){return vm_send(vm_getconstant($,"Element"),"find",[_a],nil,0);},1,1);vm_definemethod($,"title",function($,id,_){return document.title;},1,0);vm_definemethod($,"title=",function($,id,_,_a){return document.title=_a;},1,1);vm_definemethod($,"body",function($,id,_){return opal_element_wrap(document.body);},1,0);vm_definemethod($,"head",function($,id,_){return opal_element_wrap(document.getElementsByTagName('head')[0]);},1,0);vm_definemethod($,"html",function($,id,_){return opal_element_wrap(document.getElementsByTagName('html')[0]);},1,0);return vm_definemethod($,"<<",function($,id,_,_a){return document.body.appendChild(_a);},1,1);},2);});opal_boot_file("browser/element.rb",function($){var _ = nil;vm_send($,"require",[vm_send(vm_getconstant($,"File"),"join",[vm_send(vm_getconstant($,"File"),"dirname",["browser/element.rb"],nil,0),"browser_events"],nil,0)],nil,8);vm_defineclass($,nil,"Element",function($){vm_send($,"include",[vm_getconstant($,"BrowserEvents")],nil,8);vm_setconstant($,"VALID_HTML_TAGS",[ID2SYM("html"),ID2SYM("head"),ID2SYM("title"),ID2SYM("base"),ID2SYM("meta"),ID2SYM("link"),ID2SYM("style"),ID2SYM("script"),ID2SYM("body"),ID2SYM("div"),ID2SYM("p"),ID2SYM("ul"),ID2SYM("ol"),ID2SYM("li"),ID2SYM("dl"),ID2SYM("dt"),ID2SYM("dd"),ID2SYM("address"),ID2SYM("hr"),ID2SYM("pre"),ID2SYM("blockquote"),ID2SYM("ins"),ID2SYM("del"),ID2SYM("a"),ID2SYM("span"),ID2SYM("bdo"),ID2SYM("br"),ID2SYM("em"),ID2SYM("strong"),ID2SYM("dfn"),ID2SYM("code"),ID2SYM("cite"),ID2SYM("abbr"),ID2SYM("acronym"),ID2SYM("q"),ID2SYM("sub"),ID2SYM("sup"),ID2SYM("tt"),ID2SYM("i"),ID2SYM("b"),ID2SYM("big"),ID2SYM("small"),ID2SYM("object"),ID2SYM("param"),ID2SYM("img"),ID2SYM("map"),ID2SYM("area"),ID2SYM("form"),ID2SYM("label"),ID2SYM("input"),ID2SYM("select"),ID2SYM("optgroup"),ID2SYM("option"),ID2SYM("textarea"),ID2SYM("fieldset"),ID2SYM("legend"),ID2SYM("button"),ID2SYM("table"),ID2SYM("caption"),ID2SYM("colgroup"),ID2SYM("col"),ID2SYM("thead"),ID2SYM("tfoot"),ID2SYM("tbody"),ID2SYM("tr"),ID2SYM("th"),ID2SYM("td"),ID2SYM("h1"),ID2SYM("h2"),ID2SYM("h3"),ID2SYM("h4"),ID2SYM("h5"),ID2SYM("h6")]);window.opal_element_wrap=function(wrap) {if (wrap.klass) return wrap;wrap.hash = opal_yield_hash();wrap.klass = $;wrap.flags = T_OBJECT;wrap.iv_tbl={};return wrap;};function element_has_class(el, name) {return (" " + el.className + " ").indexOf(" " + name + " ") > -1;};function element_visible(el) {return (el.style || el).display != 'none';};vm_definemethod($,"find_in_context",function($,id,_,_a,_b){var _c;if(RTEST(vm_send(_a,"is_a?",[vm_getconstant($,"Symbol")],nil,0))){_a='#'+vm_send(_a,"to_s",[],nil,0);};(function(){if(RTEST(_b)){return _c=Sizzle(_a,_b);}else{return _c=Sizzle(_a);}})();return (function(){if(RTEST(_c)){for(var i=0;i<_c.length;i++){opal_element_wrap(_c[i]);}return (function(){if(RTEST(vm_send(/^#([a-zA-Z0-9_]*)$/,"match",[_a],nil,0))){return vm_send(_c,"[]",[0],nil,0);}else{return _c;}})();}else{return nil;}})();},1,2);vm_definemethod($,"find",function($,id,_,_a){var _b;_b=vm_send($,"find_in_context",[_a],nil,8);return (function($c){if(vm_send(vm_getconstant($,"Element"),'===',[$c],nil,0)) {if(RTEST(((_ == nil) ? false : true))){vm_send(_b,"instance_eval",[],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),0);};return _b;}else if(vm_send(vm_getconstant($,"Array"),'===',[$c],nil,0)) {return _b;}else {return nil;}})(_b);},1,1);vm_definemethod($,"[]",function($,id,_,_a){return vm_send($,"find",[_a],nil,8);},1,1);vm_definemethod($,"empty",function($,id,_,_a){return vm_send(_a,"empty",[],nil,0);},1,1);vm_definemethod($,"body",function($,id,_){return opal_element_wrap(document.body);},1,0);vm_definemethod($,"new",function($,id,_,_a,_b){_a=vm_send(_a,"to_s",[],nil,0);return opal_element_wrap(document.createElement(_a));},1,2);vm_definemethod($,"tag_name",function($,id,_){return (function(){var a;if(!RTEST(a = vm_ivarget($,'@tag_name'))){return vm_ivarset($,'@tag_name',vm_send($.tagName,"downcase",[],nil,0));}return a;})();},0,0);vm_definemethod($,"inspect",function($,id,_){var _a;_a=[];vm_send(_a,"push",[[" tag_name=",vm_send(vm_send(vm_send($,"tag_name",[],nil,8),"inspect",[],nil,0),"to_s",[],nil,8)].join('')],nil,0);if(!RTEST(vm_send(vm_send($,"class_name",[],nil,8),"==",[""],nil,0))){vm_send(_a,"push",[[" class=",vm_send(vm_send(vm_send($,"class_name",[],nil,8),"inspect",[],nil,0),"to_s",[],nil,8)].join('')],nil,0);};if(!RTEST(vm_send(vm_send($,"id",[],nil,8),"==",[""],nil,0))){vm_send(_a,"push",[[" id=",vm_send(vm_send(vm_send($,"id",[],nil,8),"inspect",[],nil,0),"to_s",[],nil,8)].join('')],nil,0);};return ["#<Element",vm_send(vm_send(_a,"join",[],nil,0),"to_s",[],nil,8),">"].join('');},0,0);vm_definemethod($,"find",function($,id,_,_a){var _b;_b=vm_send(vm_getconstant($,"Element"),"find_in_context",[_a,$],nil,0);return (function($c){if(vm_send(vm_getconstant($,"Element"),'===',[$c],nil,0)) {if(RTEST(((_ == nil) ? false : true))){vm_send(_b,"instance_eval",[],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),0);};return _b;}else {return _b;}})(_b);},0,1);vm_definemethod($,"[]",function($,id,_,_a){return vm_send($,"find",[_a],nil,8);},0,1);vm_definemethod($,"<<",function($,id,_,_a){(function($c){if(vm_send(vm_getconstant($,"Element"),'===',[$c],nil,0)) {$.appendChild(_a);}else if(vm_send(vm_getconstant($,"String"),'===',[$c],nil,0)) {return vm_send($,"raise",[["Element","#<<(String) not yet implemented"].join('')],nil,8);}else {return vm_send($,"raise",[["Bad element type for Element","#<<: ",vm_send(vm_send(_a,"inspect",[],nil,0),"to_s",[],nil,8)].join('')],nil,8);}})(_a);return $;},0,1);vm_definemethod($,"==",function($,id,_,_a){return $===_a;},0,1);vm_send($,"alias_method",[ID2SYM("eql?"),ID2SYM("==")],nil,8);vm_send($,"alias_method",[ID2SYM("==="),ID2SYM("==")],nil,8);vm_definemethod($,"method_missing",function($,id,_,_a,_b){_a=arguments[3];_b=Array.prototype.slice.call(arguments,4);var _d,_c;_c=vm_send(_a,"to_s",[],nil,0);_d=document.createElement(_c);;vm_send(_b,"each",[],function($$,__,ID,_e){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){return (function($c){if(vm_send(vm_getconstant($,"String"),'===',[$c],nil,0)) {_d.appendChild(document.createTextNode(_e));}else if(vm_send(vm_getconstant($,"Hash"),'===',[$c],nil,0)) {return (function(){if(RTEST(vm_send(_e,"has_key?",[ID2SYM("class")],nil,0))){_d.className = vm_send(_e,"[]",[ID2SYM("class")],nil,0);}})();}})(_e);}},0);$.appendChild(_d);return opal_element_wrap(_d);},0,1);vm_definemethod($,"on_click",function($,id,_){return vm_send($,"add_listener",["click"],(_===nil?nil:vm_send(_,"to_proc",[],nil,0)),8);},0,0);vm_definemethod($,"empty",function($,id,_){while ($.firstChild) { $.removeChild($.firstChild); }return $;},0,0);vm_definemethod($,"has_class?",function($,id,_,_a){return element_has_class($,_a);},0,1);vm_definemethod($,"add_class",function($,id,_,_a){if(!element_has_class($,_a)) {
      $.className = $.className + " " + _a;
    }return $;},0,1);vm_definemethod($,"remove_class",function($,id,_,_a){return vm_send($,"raise",[["Element","#remove_class not yet implemented"].join('')],nil,8);},0,1);vm_definemethod($,"toggle_class",function($,id,_,_a){return (function(){if(RTEST(vm_send($,"has_class?",[_a],nil,8))){return vm_send($,"remove_class",[_a],nil,8);}else{return vm_send($,"add_class",[_a],nil,8);}})();},0,1);vm_definemethod($,"opacity=",function($,id,_,_a){($.style || $).opacity = (_a === 1 || _a === '') ? "" : _a;return $;},0,1);vm_definemethod($,"opacity",function($,id,_){var o = ($.style || $).opacity;
    return o ? parseFloat(o) : 1.0;},0,0);vm_definemethod($,"remove",function($,id,_){$.parentNode.removeChild($);return $;},0,0);vm_definemethod($,"visible?",function($,id,_){return element_visible(vm_send($,"element",[],nil,8));},0,0);vm_definemethod($,"show",function($,id,_){return vm_send($,"css",[vm_newhash(ID2SYM("display"),"")],nil,8);},0,0);vm_definemethod($,"hide",function($,id,_){return vm_send($,"css",[vm_newhash(ID2SYM("display"),"none")],nil,8);},0,0);vm_definemethod($,"toggle",function($,id,_){RTEST(vm_send($,"visible?",[],nil,8))? vm_send($,"hide",[],nil,8) : vm_send($,"show",[],nil,8);return $;},0,0);vm_setconstant($,"SET_OPTIONS",rb_hash_new());vm_definemethod($,"set",function($,id,_,_a){return vm_send(_a,"each",[],function($$,__,ID,_b,_c){with({$:($$==nil?$:$$),_:(__==nil?_:__)}){return vm_send($,"send",[vm_send(vm_getconstant($,"SET_OPTIONS"),"[]",[_b],nil,0),_c],nil,8);}},0);},0,1);vm_definemethod($,"id=",function($,id,_,_a){$.id=_a;return $;},0,1);vm_definemethod($,"id",function($,id,_){return $.id;},0,0);vm_definemethod($,"class_name=",function($,id,_,_a){$.className=_a;return $;},0,1);vm_definemethod($,"class_name",function($,id,_){return $.className;},0,0);vm_definemethod($,"text",function($,id,_,_a){return ($.textContent !== undefined) ? $.textContent : $.innerText;},0,1);vm_definemethod($,"text=",function($,id,_,_a){if ($.textContent !== undefined) {$.textContent = _a;}else {$.innerText = _a;}return $;},0,1);vm_definemethod($,"css",function($,id,_,_a){return (function($c){if(vm_send(vm_getconstant($,"Hash"),'===',[$c],nil,0)) {}else if(vm_send(vm_getconstant($,"Symbol"),'===',[$c],nil,0) || vm_send(vm_getconstant($,"String"),'===',[$c],nil,0)) {return _a=vm_send(_a,"to_s",[],nil,0);}})(_a);},0,1);return vm_send($,"alias_method",[ID2SYM("style"),ID2SYM("css")],nil,8);},0);});opal_boot_file("browser/event.rb",function($){var _ = nil;vm_defineclass($,nil,"Event",function($){window.opal_event_wrap=function(klass, event){var r=rb_obj_alloc(klass);r.iv_tbl['@native']=event||window.event;return r;};vm_definemethod($,"initialize",function($,id,_){return vm_send($,"raise",["Events cannot be manually created."],nil,8);},0,0);vm_definemethod($,"alt?",function($,id,_){return $.iv_tbl['@native'].altKey;},0,0);vm_definemethod($,"shift?",function($,id,_){return $.iv_tbl['@native'].shiftKey;},0,0);vm_definemethod($,"ctrl?",function($,id,_){return $.iv_tbl['@native'].ctrlKey;},0,0);return vm_definemethod($,"meta?",function($,id,_){return $.iv_tbl['@native'].metaKey;},0,0);},0);});opal_boot_file("browser/request.rb",function($){var _ = nil;vm_defineclass($,nil,"Request",function($){vm_setconstant($,"DEFAULT_OPTIONS",rb_hash_new(ID2SYM("url"),"",ID2SYM("method"),"post"));vm_definemethod($,"initialize",function($,id,_,_a){return vm_ivarset($,"@options",vm_send(_a,"merge",[vm_getconstant($,"DEFAULT_OPTIONS")],nil,0));},0,1);vm_definemethod($,"send",function($,id,_,_a){},0,1);vm_definemethod($,"cancel",function($,id,_){},0,0);vm_definemethod($,"post",function($,id,_,_a){},0,1);vm_definemethod($,"get",function($,id,_,_a){},0,1);return vm_definemethod($,"delete",function($,id,_,_a){},0,1);},0);});