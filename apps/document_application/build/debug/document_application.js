
var nil=null;var RTEST=function RTEST(val){return(val!=null&&val!=undefined&&val!=nil&&val!=false)?true:false;};var ORTEST=function ORTEST(lhs,rhs){if(lhs==null||lhs==undefined)lhs=nil;if(rhs==null||rhs==undefined)rhs=nil;if(lhs==nil||lhs==false){return rhs;}
return lhs;};var ANDTEST=function ANDTEST(lhs,rhs){if(lhs==null||lhs==undefined)lhs=nil;if(rhs==null||rhs==undefined)rhs=nil;if(lhs==nil||lhs==false){return nil;}
return rhs;};var NOTTEST=function NOTTEST(expr){if(expr==null||expr==undefined||expr==nil||expr==false)return true;return false;};if(typeof console==='undefined'){var console=console||window.console||{};console.log=console.info=console.warn=console.error=function(){};}
var VN={CLASS:0,MODULE:1,OBJECT:2,BOOLEAN:3,STRING:4,ARRAY:5,NUMBER:6,PROC:7};var T_CLASS=0,T_MODULE=1,T_OBJECT=2,T_BOOLEAN=3,T_STRING=4,T_ARRAY=5,T_NUMBER=6,T_PROC=7,T_SYMBOL=8,T_HASH=9,T_ICLASS=10;VN.warning=function(msg){console.log('Vienna warning: '+msg);};VN.type_error=function(msg){throw'Vienna TypeError: '+msg;};VN.name_error=function(msg){throw'Vienna NameError: '+msg;}
VN.top_const_get=function(id){return undefined;};VN.define_global_const=function(id,val){cObject.$define_const(id,val);};VN.class_tbl={};VN.global_tbl={};VN.gvar_get=function(id){};VN.gvar_set=function(id,val){};VN.boot_defclass=function(id,super_klass){var obj=RClass.boot(super_klass);obj.$name(id);(cObject?cObject:obj).$c_s(id,obj);return obj;};VN.boot_defmetametaclass=function(klass,metametaclass){klass.$klass.$klass=metametaclass;};VN.obj_alloc=function(klass){var obj=VN$(klass,'allocate');return obj;};VN.class_allocate_instance=function(){var obj=new RObject(this,VN.OBJECT);return obj;};VN.obj_dummy=function(){return nil;};VN.equal=function(obj){if(obj==this)return true;var result=this.$funcall('==',[obj]);if(result)return true;return false;};VN.eql=function(obj){return this.$funcall('==',[obj]);};VN.obj_equal=function(obj){return(obj==this)?true:false;};

var RClass=function(klass,super_klass){this.$klass=klass;this.$super=super_klass;this.$type=VN.CLASS;this.$singleton=false;this.$m_tbl={};this.$iv_tbl={};return this;};RClass.inherited=function(super_klass,klass){if(!super_klass)super_klass=cObject;return super_klass.$('inherited',[klass]);};function rb_define_class(id,super_klass){var klass;if(cObject.$c_d(id)){klass=cObject.$c_g(id);if(klass.$type!=VN.CLASS){VN.type_error(id+' is not a class');}
if(klass.$super!=super_klass){if(klass!=cObject){VN.name_error(id+' is already defined');}}
return klass;}
if(!super_klass){VN.warning('no super class for `'+id+'`, Object assumed')}
klass=RClass.define_class_id(id,super_klass);VN.class_tbl[id]=klass;rb_ivar_set(klass,'__bundle__',window.vn_current_bundle);klass.$name(id);cObject.$c_s(id,klass);RClass.inherited(super_klass,klass);return klass;};RClass.define=rb_define_class;function rb_define_class_under(outer,id,super_klass){var klass;if(outer.$c_d_a(id)){klass=outer.$c_g_a(id);if(klass.$type!=VN.CLASS){VN.type_error(id+' is not a class');}
if(RClass.real(klass.$super)!=super_klass){if(klass!=cObject){VN.name_error(id+' is already defined');}}
return klass;}
if(!super_klass){VN.warning('no super class for `'+VN.class2name(outer),+'::'+id+'`, Object assumed');}
klass=RClass.define_class_id(id,super_klass);klass.$parent=outer;rb_ivar_set(klass,'__bundle__',window.vn_current_bundle);outer.$c_s(id,klass);RClass.inherited(super_klass,klass);klass.$name(id);return klass;};RClass.define_under=rb_define_class_under;RClass.class2name=function(klass){return klass.$class_name();};RClass.obj_classname=function(obj){return VN.class2name(obj.$klass);};RClass.make_metametaclass=function(metaclass){var metametaclass,super_of_metaclass;if(metaclass.$klass==metaclass){metametaclass=RClass.boot(null);metametaclass.$klass=metametaclass;}
else{metametaclass=RClass.boot(null);metametaclass.$klass=metaclass.$klass.$klass==metaclass.$klass?VN.make_metametaclass(metaclass.$klass):metaclass.$klass.$klass;}
metametaclass.$singleton=true;metametaclass.$singleton_class_attached(metaclass);metaclass.$klass=metametaclass;super_of_metaclass=metaclass.$super;while(super_of_metaclass.$type==VN.ICLASS){super_of_metaclass=super_of_metaclass.$super;}
metametaclass.$super=super_of_metaclass.$klass.$i_g('__attached__')==super_of_metaclass?super_of_metaclass.$klass:RClass.make_metametaclass(super_of_metaclass);return metametaclass;};RClass.real=function(klass){while((klass.$singleton==true)||(klass.$type==VN.ICLASS)){klass=klass.$super}
return klass};RClass.alloc=function(type,klass){var obj=new RClass();obj.$klass=klass;obj.$type=type;return obj;};RClass.boot=function(super_klass){var klass=RClass.alloc(VN.CLASS,cClass);klass.$super=super_klass;return klass;};RClass.check_inheritable=function(super_klass){if(super_klass.$type!=VN.CLASS){VN.type_error('super class must be a Class ('+VN.obj_classname(super_klass)+' given)');}
if(super_klass.singleton){VN.type_error('can\'t make a subclass of singleton class');}};RClass.create=function(super_klass){RClass.check_inheritable(super_klass);if(super_klass==cClass){VN.raise(VN.TypeError,"can't make subclass of Class")}
return RClass.boot(super_klass);};RClass.define_class_id=function(id,super_klass){var klass;if(!super_klass)super_klass=cObject;klass=RClass.create(super_klass);klass.$make_metaclass(super_klass.$klass);return klass;};RClass.singleton_class=function(obj){var klass;if(obj.$type==VN.T_FIXNUM||obj.$type==VN.T_SYMBOL){VN.type_error('can\'t define singleton');}
if(obj.$klass.$singleton&&obj.$klass.$i_g('__attached__')==obj){klass=obj.$klass;}
else{klass=obj.$make_metaclass(obj.$klass);}
if(obj.$type==VN.CLASS){if(klass.$klass.$i_g('__attached__')!=klass){RClass.make_metametaclass(klass);}}
return klass;};RClass.prototype.$name=function(id){this.$i_s('__classid__',id);};RClass.prototype.$class_name=function(){return VN.class_path(klass.$real());};RClass.prototype.$make_metaclass=function(super_klass){if(this.$type==VN.CLASS&&this.$singleton==true){return this.$make_metametaclass();}
else{var klass=RClass.boot(super_klass);klass.$singleton=true;this.$klass=klass;klass.$singleton_class_attached(this);var metasuper=klass.$klass;if(metasuper){klass.$klass=metasuper;}
return klass;}};RClass.prototype.$singleton_class_attached=function(obj){if(this.$singleton==true){this.$i_s('__attached__',obj);}};RClass.prototype.$=function(id,args){var method=this.$klass.$search_method(id);if(!method)throw'VN#funcall cannot find method: '+id;return method.apply(this,args);};RClass.prototype.$k_g=function(id){var tmp=this;var value;while(tmp){if(value=tmp.$iv_tbl[id]){return value;}
tmp=tmp.$super;}
VN.name_error('uninitialized class variable '+id+' in '+this);return nil;};RClass.prototype.$k_d=function(id){var tmp=this;var value;while(tmp){if(value=tmp.$iv_tbl[id]){return true;}
tmp=tmp.$super;}
return false;}
RClass.prototype.$k_s=function(id,val){return this.$iv_tbl[id]=val;};RClass.prototype.$i_g=function(id){return this.$iv_tbl[id];};RClass.prototype.$i_s=function(id,val){this.$iv_tbl[id]=val;return val;}
function rb_define_method(klass,name,func){rb_add_method(klass,name,func);}
function rb_define_singleton_method(klass,name,func){rb_define_method(RClass.singleton_class(klass),name,func);}
function rb_add_method(klass,name,func){klass.$m_tbl[name]=func;func.displayName=klass.$iv_tbl.__classid__+"#"+name;}
RClass.prototype.$def=function(name,func){this.$add_method(name,func);};RClass.prototype.$define_protected_method=function(name,func){this.$add_method(name,func);};RClass.prototype.$define_private_method=function(name,func){this.$add_method(name,func);};RClass.prototype.$undef_method=function(name,func){this.$add_method(name,func);};RClass.prototype.$add_method=function(name,func){this.$m_tbl[name]=func;};RClass.prototype.$def_s=function(name,func){RClass.singleton_class(this).$def(name,func);};RClass.prototype.$define_alias=function(id1,id2){};RClass.prototype.$define_alloc_func=function(func){RClass.singleton_class(this).$add_method('allocate',func);};RClass.prototype.$undef_alloc_func=function(){RClass.singleton_class(this).$add_method('allocate',null);};RClass.prototype.$search_method=function search_method(id){var klass=this;var func;while(!(func=klass.$m_tbl[id])){klass=klass.$super;if(!klass)return undefined;}
return func;};RClass.prototype.$search_super_method=function(from,id){var klass=this;var func;while(!((func=klass.$m_tbl[id])&&func==from)){klass=klass.$super;if(!klass)return undefined;}
klass=klass.$super;if(!klass)return undefined;while(!(func=klass.$m_tbl[id])){klass=klass.$super;if(!klass)return undefined;}
return func;};RClass.prototype.$=function(id,args){var method=this.$klass.$search_method(id);if(!method)throw'VN#funcall cannot find method: '+id;return method.apply(this,args);};RClass.prototype.$c_s=function(id,val){this.$mod_av_set(id,val,true);return val;};RClass.prototype.$mod_av_set=function(id,val,isconst){this.$iv_tbl[id]=val;};RClass.prototype.$c_g=function(id){var tmp=this;var value;while(tmp){if(value=tmp.$iv_tbl[id]){return value;}
tmp=tmp.$super;}
VN.name_error(id,'uninitialized constant '+id+' in '+this.name);return nil;};RClass.prototype.$c_g_full=function(id){var tmp=this;var value;while(tmp){if(value=tmp.$iv_tbl[id]){return value;}
tmp=tmp.$super;}
var tmp=this.$parent;while(tmp){if(value=tmp.$iv_tbl[id]){return value;}
tmp=tmp.$parent}
VN.name_error(id,'uninitialized constant '+id+' in '+this.name);return nil;};RClass.prototype.$c_d_full=function(id){var tmp=this;var value;while(tmp){if(value=tmp.$iv_tbl[id]){return true;}
tmp=tmp.$super;}
var tmp=this.$parent;while(tmp){if(value=tmp.$iv_tbl[id]){return true;}
tmp=tmp.$parent}
return false;};RClass.prototype.$c_d=function(id){var tmp=this;var value;while(tmp){if(value=tmp.$iv_tbl[id]){return true;}
tmp=tmp.$super;}
return false;};RClass.prototype.$c_d_a=function(id){return(this.$iv_tbl[id])?true:false;};RClass.prototype.$c_g_a=function(id){return(this.$iv_tbl[id])?this.$iv_tbl[id]:nil;};RClass.prototype.$define_const=function(id,val){};

var RModule={};function rb_define_module(id){var module;if(cObject.$c_d(id)){module=cObject.$c_g(id);if(module.$type==VN.MODULE){return module;}
VN.type_error(id+' is not a module');}
module=RModule.define_module_id(id);VN.class_tbl[id]=module;cObject.$c_s(id,module);return module;};RModule.define=rb_define_module;function rb_define_module_under(){var module;if(VN.const_defined_at(outer,id)){module=VN.const_get_at(outer,id);if(module.type==VN.MODULE){return module;}
VN.type_error(id+' is not a module');}
module=VN.define_module_id(id);VN.const_set(outer,id,module);VN.set_class_path(module,outer,name);return module;};RModule.define_module_under=rb_define_module_under;RModule.define_module_id=function(id){var mdl=RModule.create();mdl.$name(id);return mdl;};RModule.create=function(){var mdl=RClass.alloc(VN.MODULE,cModule);mdl.$super=cObject;return mdl;};function rb_include_module(klass,module){RModule.include_class_new(module,klass);}
RModule.include=function(klass,module){RModule.include_class_new(module,klass);};RModule.include_class_new=function(mod,sup){var klass=RClass.alloc(T_ICLASS,cClass);klass.$iv_tbl=mod.$iv_tbl;klass.$m_tbl=mod.$m_tbl;klass.$super=sup;klass.$klass=mod;return klass;};

var RObject=function RObject(klass,type){this.$klass=klass;this.$type=type;this.$iv_tbl={};return this;};var rb_ivar_set=function rb_ivar_set(obj,id,val){obj.$iv_tbl[id]=val;return val;};RObject.prototype.$i_s=function(id,val){this.$iv_tbl[id]=val;return val;};var rb_ivar_get=function rb_ivar_get(obj,id){if(obj.$iv_tbl[id]==undefined||obj.$iv_tbl[id]==null){return nil;}
return obj.$iv_tbl[id];};RObject.prototype.$i_g=function(id){if(this.$iv_tbl[id]==undefined||this.$iv_tbl[id]==null){return nil;}
return this.$iv_tbl[id];};RObject.prototype.$=function(id,args){var method=this.$klass.$search_method(id);if(!method){console.log(this);throw'RObject#call cannot find method: '+id;}
return method.apply(this,args);};var rb_funcall_stack=[];var rb_funcall=function rb_funcall(self,id){if(!self.$klass){console.log('ERROR: rb_funcall');console.log(self);console.log(id);}
var method=self.$klass.$search_method(id);if(!method){console.log(self);throw'RObject#call cannot find method: '+id;}
switch(arguments.length){case 2:return method(self,id);case 3:return method(self,id,arguments[2]);case 4:return method(self,id,arguments[2],arguments[3]);case 5:return method(self,id,arguments[2],arguments[3],arguments[4]);}
return method.apply(self,arguments);}
var VN$=rb_funcall;var rb_supcall=function rb_supcall(from,self,id,args){var method=self.$klass.$search_super_method(from,id);if(!method)throw'RObject#call cannot find super method for: '+id;switch(args.length){case 0:return method(self,id);case 1:return method(self,id,args[0]);case 2:return method(self,id,args[0],args[1]);case 3:return method(self,id,args[0],args[1],args[2]);case 4:return method(self,id,args[0],args[1],args[2],args[3]);}
return method.apply(self,arguments);};var VN$sup=rb_supcall;RObject.prototype.$sup=function(from,id,args){var method=this.$klass.$search_super_method(from,id);if(!method)throw'RObject#call cannot find super method for: '+id;return method.apply(this,args);};RObject.prototype.$def_s=RClass.prototype.$def_s;RObject.prototype.$make_metaclass=RClass.prototype.$make_metaclass;

var metaclass;var cBasicObject=VN.boot_defclass('BasicObject',null);var rb_cBasicObject=cBasicObject;var cObject=VN.boot_defclass('Object',rb_cBasicObject);var rb_cObject=cObject;var cModule=VN.boot_defclass('Module',rb_cObject);var rb_cModule=cModule;var cClass=VN.boot_defclass('Class',rb_cModule);var rb_cClass=cClass;metaclass=rb_cBasicObject.$make_metaclass(cClass);metaclass=rb_cObject.$make_metaclass(metaclass);metaclass=rb_cModule.$make_metaclass(metaclass);metaclass=rb_cClass.$make_metaclass(metaclass);VN.boot_defmetametaclass(rb_cModule,metaclass);VN.boot_defmetametaclass(rb_cObject,metaclass);VN.boot_defmetametaclass(rb_cBasicObject,metaclass);rb_cBasicObject.$define_private_method('initialize',function(self,_cmd){return nil;});var RHash=function(){this.$klass=rb_cHash;this.$type=T_HASH;this.keys=[];this.values={};this.ifnone=nil;return this;};RHash.prototype.$define_singleton_method=RObject.prototype.$define_singleton_method;RHash.prototype.$make_metaclass=RObject.prototype.$make_metaclass;VN.$h=function(){var hash=new RHash();for(var i=0;i<arguments.length;i++){VN$(hash,'[]=',arguments[i],arguments[i+1]);i++;}
return hash;};var RSymbol=function(ptr){this.$klass=rb_cSymbol;this.$type=T_SYMBOL;this.toString=function(){return this.ptr;};this.ptr=ptr;return this;};var rb_sym_table={};function ID2SYM(id){if(rb_sym_table.hasOwnProperty(id)){return rb_sym_table[id];}
var sym=new RSymbol(id);rb_sym_table[id]=sym
return sym;};

VN.cBasicObjectAlloc=function(self,_cmd){var obj=new RObject(self,VN.OBJECT);return obj;};cBasicObject.$define_alloc_func(VN.cBasicObjectAlloc);cBasicObject.$def_s('alloc',VN.cBasicObjectAlloc);cBasicObject.$def('==',function(self,_cmd,obj){return(self==obj)?true:false;});cBasicObject.$def('equal?',function(self,_cmd,obj){return(self==obj)?true:false;});cBasicObject.$def('!',function(self,_cmd,obj){});cBasicObject.$def('!=',function(self,_cmd,obj){return(self==obj)?false:true;});cBasicObject.$define_private_method('singleton_method_added',function(){return nil;});cBasicObject.$define_private_method('singleton_method_removed',function(){return nil;});cBasicObject.$define_private_method('singleton_method_undefined',function(){return nil;});cBasicObject.$def('puts',function(self,_cmd,val){console.log(val);});cBasicObject.$def('===',function(self,_cmd,other){return self==other;});cBasicObject.$def('class',function(self,_cmd){return RClass.real(self.$klass);});cBasicObject.$def('respond_to?',function(self,_cmd,selector){var method_name=rb_funcall(selector,'to_s');var method=self.$klass.$search_method(method_name);if(!method)return false;return true});rb_define_method(cBasicObject,'nil?',function(self,_cmd){return false;});cBasicObject.$def('instance_of?',function(self,_cmd,klass){return self.$klass==klass?true:false;});cBasicObject.$def('kind_of?',function(self,_cmd,klass){return self.$klass==klass?true:false;});cBasicObject.$def('is_a?',function(self,_cmd,klass){return self.$klass==klass?true:false;});rb_define_method(cBasicObject,'instance_variable_set',function(self,_cmd,id,val){return rb_ivar_set(self,id,val);});rb_define_singleton_method(cBasicObject,'const_get',function(self,_cmd,name){});rb_define_singleton_method(cBasicObject,'full_const_get',function(self,_cmd,name){var parts=name.split('::');var obj=rb_cObject;for(var i=0;i<parts.length;i++){obj=obj.$c_g(parts[i]);}
return obj;});mKernel=RModule.define("Kernel");RModule.include(cObject,mKernel);rb_define_method(rb_cModule,'append_features',function(self,_cmd,o){switch(o.$type){case T_CLASS:case T_MODULE:break;default:throw"wrong type for include"
break;}
rb_include_module(o,self);return self;});cClass.$define_private_method('inherited',function(){return nil;});cModule.$define_private_method('included',function(){return nil;});cModule.$define_private_method('extended',function(){return nil;});cModule.$define_private_method('method_added',function(){return nil;});cModule.$define_private_method('method_removed',function(){return nil;});cModule.$define_private_method('method_undefined',function(){return nil;});var cNilClass=RClass.define('NilClass',cObject);var cBoolean=RClass.define('Boolean',cObject);var cArray=RClass.define('Array',cObject);var cString=RClass.define('String',cObject);var rb_cSymbol=RClass.define('Symbol',cObject);var cNumber=RClass.define('Number',cObject);var cProc=RClass.define('Proc',cObject);var cRange=RClass.define('Range',cObject);

cModule.$define_alloc_func(function(module_s_alloc){});var rb_cModule=cModule;rb_define_method(rb_cModule,'freeze',function(self,_cmd){});rb_define_method(rb_cModule,'===',function(self,_cmd){});rb_define_method(rb_cModule,'==',function(self,_cmd){});rb_define_method(rb_cModule,'<=>',function(self,_cmd){});rb_define_method(rb_cModule,'<',function(self,_cmd){});rb_define_method(rb_cModule,'<=',function(self,_cmd){});rb_define_method(rb_cModule,'>',function(self,_cmd){});rb_define_method(rb_cModule,'>=',function(self,_cmd){});rb_define_method(rb_cModule,'initialize_copy',function(self,_cmd){});rb_define_method(rb_cModule,'to_s',function(self,_cmd){});rb_define_method(rb_cModule,'included_modules',function(self,_cmd){});rb_define_method(rb_cModule,'include?',function(self,_cmd){});rb_define_method(rb_cModule,'freeze',function(self,_cmd){});rb_define_method(rb_cModule,'name',function(self,_cmd){return self.$iv_tbl['__classid__'];});rb_define_method(rb_cModule,'ancestors',function(self,_cmd){});rb_define_method(rb_cModule,'attr',function(self,_cmd){});rb_define_method(rb_cModule,'attr_reader',function(self,_cmd){var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<args.length;i++){var body=new Function('self','_cmd','return self.$i_g("@'+args[i]+'");');rb_define_method(self,args[i],body);}});rb_define_method(rb_cModule,'attr_writer',function(self,_cmd){var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<args.length;i++){var body=new Function('self','_cmd','val','return self.$i_s("@'+args[i]+', val");');rb_define_method(self,args[i],body);}});rb_define_method(rb_cModule,'attr_accessor',function(self,_cmd){var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<args.length;i++){rb_funcall(self,'attr_reader',args[i]);rb_funcall(self,'attr_writer',args[i]);}});rb_define_method(rb_cModule,'initialize',function(self,_cmd){});rb_define_method(rb_cModule,'instance_methods',function(self,_cmd){});rb_define_method(rb_cModule,'public_instance_methods',function(self,_cmd){});rb_define_method(rb_cModule,'protected_instance_methods',function(self,_cmd){});rb_define_method(rb_cModule,'private_instance_methods',function(self,_cmd){});rb_define_method(rb_cModule,'constants',function(self,_cmd){});rb_define_method(rb_cModule,'const_get',function(self,_cmd){});rb_define_method(rb_cModule,'const_set',function(self,_cmd,id,val){return self.$iv_tbl[id]=val;});rb_define_method(rb_cModule,'const_defined?',function(self,_cmd){});rb_define_method(rb_cModule,'remove_const',function(self,_cmd){});rb_define_method(rb_cModule,'const_missing',function(self,_cmd){});rb_define_method(rb_cModule,'class_variables',function(self,_cmd){});rb_define_method(rb_cModule,'remove_class_variable',function(self,_cmd){});rb_define_method(rb_cModule,'class_variable_get',function(self,_cmd){});rb_define_method(rb_cModule,'class_variable_set',function(self,_cmd){});rb_define_method(rb_cModule,'class_variable_defined?',function(self,_cmd){});rb_define_method(rb_cModule,'include',function(self,_cmd,mod){rb_funcall(self,'append_features',mod);rb_funcall(self,'included',mod);return self;});

cClass.$def('new',function(self,_cmd){var obj=VN$(self,'allocate');arguments[0]=obj;arguments[1]='initialize';VN$.apply(obj,arguments);return obj;});cClass.$def('allocate',function(obj_alloc){});cClass.$def('initialize',function(class_initialize){});cClass.$def('initialize_copy',function(class_init_copy){});cClass.$def('superclass',function(class_superclass){});cClass.$define_alloc_func(function(class_s_alloc){});

var mComparable=RModule.define('Comparable');mComparable.$def('==',function(obj){if(this==obj)return true;return false;});mComparable.$def('>',function(cmp_gt){});mComparable.$def('>=',function(cmp_ge){});mComparable.$def('<',function(cmp_lt){});mComparable.$def('<=',function(cmp_le){});mComparable.$def('between?',function(cmp_between){});

var mEnumerable=RModule.define('Enumerable');mEnumerable.$def('to_a',function(enum_to_a){});mEnumerable.$def('entries',function(enum_to_a){});mEnumerable.$def('sort',function(enum_sort){});mEnumerable.$def('sort_by',function(enum_sort_by){});mEnumerable.$def('grep',function(enum_grep){});mEnumerable.$def('count',function(enum_count){});mEnumerable.$def('find',function(enum_find){});mEnumerable.$def('detect',function(enum_find){});mEnumerable.$def('find_index',function(enum_find_index){});mEnumerable.$def('find_all',function(enum_find_all){});mEnumerable.$def('select',function(enum_find_all){});mEnumerable.$def('reject',function(enum_reject){});mEnumerable.$def('collect',function(enum_collect){});mEnumerable.$def('map',function(enum_collect){});mEnumerable.$def('inject',function(enum_inject){});mEnumerable.$def('reduce',function(enum_inject){});mEnumerable.$def('partition',function(enum_partition){});mEnumerable.$def('group_by',function(enum_group_by){});mEnumerable.$def('first',function(enum_first){});mEnumerable.$def('all',function(enum_all){});mEnumerable.$def('any?',function(enum_any){});mEnumerable.$def('one?',function(enum_one){});mEnumerable.$def('none?',function(enum_none){});mEnumerable.$def('min',function(enum_min){});mEnumerable.$def('max',function(enum_max){});mEnumerable.$def('minmax',function(enum_minmax){});mEnumerable.$def('min_by',function(enum_min_by){});mEnumerable.$def('max_by',function(enum_max_by){});mEnumerable.$def('minmax_by',function(enum_minmax_by){});mEnumerable.$def('include?',function(enum_member){});mEnumerable.$def('member?',function(enum_member){});mEnumerable.$def('each_with_index',function(enum_each_with_index){});mEnumerable.$def('reverse_each',function(enum_reverse_each){});mEnumerable.$def('zip',function(enum_zip){});mEnumerable.$def('take',function(enum_take){});mEnumerable.$def('take_while',function(enum_take_while){});mEnumerable.$def('drop',function(enum_drop){});mEnumerable.$def('drop_while',function(enum_drop_while){});mEnumerable.$def('cycle',function(enum_cycle){});

var rb_cString=cString;String.prototype.$klass=rb_cString;String.prototype.$type=T_STRING;rb_cString.$define_alloc_func(function(){return new String();});rb_define_method(rb_cString,"try_convert",function(self,_cmd){});rb_define_method(rb_cString,"initialize",function(self,_cmd){});rb_define_method(rb_cString,"initialize_copy",function(self,_cmd){});rb_define_method(rb_cString,"<=>",function(self,_cmd){});rb_define_method(rb_cString,"==",function(self,_cmd,obj){return(self==obj)&&(obj.$type==T_STRING)?true:false;});rb_define_method(rb_cString,"eql?",function(self,_cmd){});rb_define_method(rb_cString,"hash",function(self,_cmd){});rb_define_method(rb_cString,"casecmp",function(self,_cmd){});rb_define_method(rb_cString,"+",function(self,_cmd,obj){return self+obj;});rb_define_method(rb_cString,"*",function(self,_cmd,obj){});rb_define_method(rb_cString,"%",function(self,_cmd,obj){});rb_define_method(rb_cString,"[]",function(self,_cmd,key){});rb_define_method(rb_cString,"[]=",function(self,_cmd,key,val){});rb_define_method(rb_cString,"insert",function(self,_cmd){});rb_define_method(rb_cString,"length",function(self,_cmd){return self.length;});rb_define_method(rb_cString,"size",function(self,_cmd){return self.size;});rb_define_method(rb_cString,"empty?",function(self,_cmd){});rb_define_method(rb_cString,"=~",function(self,_cmd,match){});rb_define_method(rb_cString,"succ",function(self,_cmd){});rb_define_method(rb_cString,"next",function(self,_cmd){});rb_define_method(rb_cString,"upto",function(self,_cmd){});rb_define_method(rb_cString,"index",function(self,_cmd){});rb_define_method(rb_cString,"rindex",function(self,_cmd){});rb_define_method(rb_cString,"replace",function(self,_cmd){});rb_define_method(rb_cString,"clear",function(self,_cmd){});rb_define_method(rb_cString,"chr",function(self,_cmd){});rb_define_method(rb_cString,"to_i",function(self,_cmd,i){return parseInt(i);});rb_define_method(rb_cString,"to_f",function(self,_cmd,f){return parseFloat(f);});rb_define_method(rb_cString,"to_s",function(self,_cmd){return new String(self);});rb_define_method(rb_cString,"to_str",function(self,_cmd){return new String(self);});rb_define_method(rb_cString,"inspect",function(self,_cmd){return new String('"'+self+'"');});rb_define_method(rb_cString,"dump",function(self,_cmd){});rb_define_method(rb_cString,"upcase",function(self,_cmd){});rb_define_method(rb_cString,"downcase",function(self,_cmd){});rb_define_method(rb_cString,"capitalize",function(self,_cmd){});rb_define_method(rb_cString,"swapcase",function(self,_cmd){});rb_define_method(rb_cString,"camelize",function(self,_cmd){var parts=self.split('_');var length=parts.length;if(length==1)return parts[0];var camelized=self.charAt(0)=='-'?parts[0].charAt(0).toUpperCase()+parts[0].substring(1):parts[0];for(var i=1;i<length;i++)
camelized+=parts[i].charAt(0).toUpperCase()+parts[i].substring(1);return camelized;});rb_define_method(rb_cString,"hex",function(self,_cmd){});rb_define_method(rb_cString,"oct",function(self,_cmd){});rb_define_method(rb_cString,"split",function(self,_cmd){});rb_define_method(rb_cString,"lines",function(self,_cmd){});rb_define_method(rb_cString,"bytes",function(self,_cmd){});rb_define_method(rb_cString,"chars",function(self,_cmd){});rb_define_method(rb_cString,"codepoints",function(self,_cmd){});rb_define_method(rb_cString,"reverse",function(self,_cmd){});rb_define_method(rb_cString,"concat",function(self,_cmd){});rb_define_method(rb_cString,"<<",function(self,_cmd){});rb_define_method(rb_cString,"crypt",function(self,_cmd){});rb_define_method(rb_cString,"intern",function(self,_cmd){});rb_define_method(rb_cString,"to_sym",function(self,_cmd){});rb_define_method(rb_cString,"ord",function(self,_cmd){});rb_define_method(rb_cString,"include?",function(self,_cmd){});rb_define_method(rb_cString,"start_with?",function(self,_cmd){});rb_define_method(rb_cString,"end_with?",function(self,_cmd){});rb_define_method(rb_cString,"scan",function(self,_cmd){});rb_define_method(rb_cString,"ljust",function(self,_cmd){});rb_define_method(rb_cString,"rjust",function(self,_cmd){});rb_define_method(rb_cString,"center",function(self,_cmd){});rb_define_method(rb_cString,"sub",function(self,_cmd){});rb_define_method(rb_cString,"gsub",function(self,_cmd){});rb_define_method(rb_cString,"chop",function(self,_cmd){});rb_define_method(rb_cString,"chomp",function(self,_cmd){});rb_define_method(rb_cString,"strip",function(self,_cmd){});rb_define_method(rb_cString,"lstrip",function(self,_cmd){});rb_define_method(rb_cString,"rstrip",function(self,_cmd){});rb_define_method(rb_cString,"tr",function(self,_cmd){});rb_define_method(rb_cString,"tr_s",function(self,_cmd){});rb_define_method(rb_cString,"delete",function(self,_cmd){});rb_define_method(rb_cString,"squeeze",function(self,_cmd){});rb_define_method(rb_cString,"count",function(self,_cmd){});rb_define_method(rb_cString,"each_line",function(self,_cmd){});rb_define_method(rb_cString,"each_byte",function(self,_cmd){});rb_define_method(rb_cString,"each_char",function(self,_cmd){});rb_define_method(rb_cString,"each_codepoint",function(self,_cmd){});rb_define_method(rb_cString,"sum",function(self,_cmd){});rb_define_method(rb_cString,"partition",function(self,_cmd){});rb_define_method(rb_cString,"rpartition",function(self,_cmd){});

rb_define_singleton_method(rb_cSymbol,'all_symbols',function(self,_cmd){});rb_define_method(rb_cSymbol,'==',function(self,_cmd,obj){return(self==obj)&&(obj.$type==T_SYMBOL)?true:false;});rb_define_method(rb_cSymbol,'inspect',function(self,_cmd){return":"+self.ptr;});rb_define_method(rb_cSymbol,'to_s',function(self,_cmd){return self.ptr;});rb_define_method(rb_cSymbol,'id2name',function(self,_cmd){return self.ptr;});rb_define_method(rb_cSymbol,'intern',function(self,_cmd){return self;});rb_define_method(rb_cSymbol,'to_sym',function(self,_cmd){return self;});rb_define_method(rb_cSymbol,'to_proc',function(self,_cmd){});rb_define_method(rb_cSymbol,'succ',function(self,_cmd){});rb_define_method(rb_cSymbol,'next',function(self,_cmd){return rb_funcall(self,'succ');});rb_define_method(rb_cSymbol,'<=>',function(self,_cmd){});rb_define_method(rb_cSymbol,'casecmp',function(self,_cmd){});rb_define_method(rb_cSymbol,'=~',function(self,_cmd){});rb_define_method(rb_cSymbol,'[]',function(self,_cmd){});rb_define_method(rb_cSymbol,'slice',function(self,_cmd){});rb_define_method(rb_cSymbol,'length',function(self,_cmd){});rb_define_method(rb_cSymbol,'size',function(self,_cmd){});rb_define_method(rb_cSymbol,'empty?',function(self,_cmd){});rb_define_method(rb_cSymbol,'match',function(self,_cmd){});rb_define_method(rb_cSymbol,'upcase',function(self,_cmd){});rb_define_method(rb_cSymbol,'downcase',function(self,_cmd){});rb_define_method(rb_cSymbol,'capitalize',function(self,_cmd){});rb_define_method(rb_cSymbol,'swapcase',function(self,_cmd){});

var rb_cNumber=cNumber;Number.prototype.$klass=cNumber;Number.prototype.$type=VN.NUMBER;RModule.include(cNumber,mComparable);rb_define_method(rb_cNumber,'coerce',function(self,_cmd){});rb_define_method(rb_cNumber,'+@',function(self,_cmd){return self;});rb_define_method(rb_cNumber,'-@',function(self,_cmd){return self*-1;});rb_define_method(rb_cNumber,'<=>',function(self,_cmd){});rb_define_method(rb_cNumber,'eql?',function(self,_cmd){});rb_define_method(rb_cNumber,'quo',function(self,_cmd){});rb_define_method(rb_cNumber,'fdiv',function(self,_cmd){});rb_define_method(rb_cNumber,'div',function(self,_cmd){});rb_define_method(rb_cNumber,'divmod',function(self,_cmd){});rb_define_method(rb_cNumber,'modulo',function(self,_cmd){});rb_define_method(rb_cNumber,'remainder',function(self,_cmd){});rb_define_method(rb_cNumber,'abs',function(self,_cmd){});rb_define_method(rb_cNumber,'magnitude',function(self,_cmd){});rb_define_method(rb_cNumber,'to_int',function(self,_cmd){});rb_define_method(rb_cNumber,'real?',function(self,_cmd){});rb_define_method(rb_cNumber,'integer?',function(self,_cmd){});rb_define_method(rb_cNumber,'zero?',function(self,_cmd){return self==0?true:false;});rb_define_method(rb_cNumber,'nonzero?',function(self,_cmd){return self==0?false:true;});rb_define_method(rb_cNumber,'floor',function(self,_cmd){});rb_define_method(rb_cNumber,'ceil',function(self,_cmd){});rb_define_method(rb_cNumber,'round',function(self,_cmd){});rb_define_method(rb_cNumber,'truncate',function(self,_cmd){});rb_define_method(rb_cNumber,'step',function(self,_cmd){});rb_define_method(rb_cNumber,'odd?',function(self,_cmd){return self%2==0?false:true;});rb_define_method(rb_cNumber,'even?',function(self,_cmd){return self%2==0?true:false;});rb_define_method(rb_cNumber,'upto',function(self,_cmd){});rb_define_method(rb_cNumber,'downto',function(self,_cmd){});rb_define_method(rb_cNumber,'times',function(self,_cmd,block){for(var i=0;i<self;i++){rb_funcall(block,'call',i);}
return self;});rb_define_method(rb_cNumber,'succ',function(self,_cmd){});rb_define_method(rb_cNumber,'next',function(self,_cmd){});rb_define_method(rb_cNumber,'pred',function(self,_cmd){});rb_define_method(rb_cNumber,'chr',function(self,_cmd){});rb_define_method(rb_cNumber,'ord',function(self,_cmd){});rb_define_method(rb_cNumber,'to_i',function(self,_cmd){return parseInt(self);});rb_define_method(rb_cNumber,'to_s',function(self,_cmd){return new String(self);});rb_define_method(rb_cNumber,'+',function(self,_cmd,i){return self+i;});rb_define_method(rb_cNumber,'-',function(self,_cmd,i){return self-i;});rb_define_method(rb_cNumber,'*',function(self,_cmd,i){return self*i;});rb_define_method(rb_cNumber,'/',function(self,_cmd,i){return self/i;});rb_define_method(rb_cNumber,'%',function(self,_cmd){});rb_define_method(rb_cNumber,'**',function(self,_cmd){});rb_define_method(rb_cNumber,'==',function(self,_cmd,other){return(self==other)?true:false;});rb_define_method(rb_cNumber,'>',function(self,_cmd,other){return self>other?true:false;});rb_define_method(rb_cNumber,'>=',function(self,_cmd,other){return self>=other?true:false;});rb_define_method(rb_cNumber,'<',function(self,_cmd,other){return self<other?true:false;});rb_define_method(rb_cNumber,'<=',function(self,_cmd,other){return self<=other?true:false;});rb_define_method(rb_cNumber,'~',function(self,_cmd){});rb_define_method(rb_cNumber,'&',function(self,_cmd,other){return self&other;});rb_define_method(rb_cNumber,'|',function(self,_cmd,other){return self|other;});rb_define_method(rb_cNumber,'^',function(self,_cmd){});rb_define_method(rb_cNumber,'[]',function(self,_cmd){});rb_define_method(rb_cNumber,'<<',function(self,_cmd,other){return self<<other;});rb_define_method(rb_cNumber,'>>',function(self,_cmd,other){return self>>other;});rb_define_method(rb_cNumber,'to_f',function(self,_cmd){return parseFloat(self);});

var rb_cArray=cArray;Array.prototype.$klass=rb_cArray
Array.prototype.$type=T_ARRAY;RModule.include(rb_cArray,mEnumerable);rb_cArray.$define_alloc_func(function(){return new Array();});rb_cArray.$def_s('[]',function(){});rb_cArray.$def_s('try_convert',function(){});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(item,i){i||(i=0);var len=this.length;if(i<0)i=len+i;for(;i<len;i++)
if(this[i]===item)return i;return-1;};}
rb_define_method(rb_cArray,'initialize',function(self,_cmd){var len=arguments.length;for(var i=2;i<len;i++){self.push(arguments[i]);}});rb_define_method(rb_cArray,'initialize_copy',function(self,_cmd){});rb_define_method(rb_cArray,'to_s',function(self,_cmd){if(self.length==0)return'[]';var str='[';for(var i=0;i<(self.length-1);i++){str+=(self[i].$('inspect',[])+', ');}
str+=(self[self.length-1].$('inspect',[])+']');return str;});rb_define_method(rb_cArray,'inspect',function(self,_cmd){return rb_funcall(self,'to_s');});rb_define_method(rb_cArray,'to_a',function(self,_cmd){return self;});rb_define_method(rb_cArray,'to_ary',function(self,_cmd){return self;});rb_define_method(rb_cArray,'==',function(self,_cmd,ary){if(ary==self)return true;if(ary.$type!=VN.ARRAY){if(rb_funcall(ary,'respond_to?','to_a')){return false;}}
if(self.length!=ary.length)return false;return true;});rb_define_method(rb_cArray,'eql?',function(self,_cmd){});rb_define_method(rb_cArray,'hash',function(self,_cmd){});rb_define_method(rb_cArray,'[]',function(self,_cmd,idx){return self[idx];});rb_define_method(rb_cArray,'[]=',function(self,_cmd,idx,value){return self[idx]=value;});rb_define_method(rb_cArray,'at',function(self,_cmd,index){return self[index];});rb_define_method(rb_cArray,'fetch',function(self,_cmd,index,def){return self[index];});rb_define_method(rb_cArray,'first',function(self,_cmd){return self[0];});rb_define_method(rb_cArray,'last',function(self,_cmd){return self[self.length-1];});rb_define_method(rb_cArray,'concat',function(self,_cmd){});rb_define_method(rb_cArray,'<<',function(self,_cmd,obj){return self.push(obj);});rb_define_method(rb_cArray,'push',function(self,_cmd,obj){return self.push(obj);});rb_define_method(rb_cArray,'pop',function(self,_cmd){return self.pop();});rb_define_method(rb_cArray,'shift',function(self,_cmd){});rb_define_method(rb_cArray,'unshift',function(self,_cmd){});rb_define_method(rb_cArray,'insert',function(self,_cmd){});rb_define_method(rb_cArray,'each',function(self,_cmd,block){for(var i=0;i<self.length;i++){block(self[i]);}
return self;});rb_define_method(rb_cArray,'each_index',function(self,_cmd){});rb_define_method(rb_cArray,'reverse_each',function(self,_cmd){});rb_define_method(rb_cArray,'length',function(self,_cmd){return self.length;});rb_define_method(rb_cArray,'size',function(self,_cmd){return self.length;});rb_define_method(rb_cArray,'empty?',function(self,_cmd){return(self.length==0)?true:false;});rb_define_method(rb_cArray,'find_index',function(self,_cmd){});rb_define_method(rb_cArray,'rindex',function(self,_cmd){});rb_define_method(rb_cArray,'index',function(self,_cmd,obj){var idx=self.indexOf(obj);return(idx==-1)?idx:nil;});rb_define_method(rb_cArray,'join',function(self,_cmd,sep){return self.join(sep);});rb_define_method(rb_cArray,'reverse',function(self,_cmd){});rb_define_method(rb_cArray,'reverse!',function(self,_cmd){});rb_define_method(rb_cArray,'sort',function(self,_cmd){});rb_define_method(rb_cArray,'sort!',function(self,_cmd){});rb_define_method(rb_cArray,'collect',function(self,_cmd){});rb_define_method(rb_cArray,'collect!',function(self,_cmd){});rb_define_method(rb_cArray,'map',function(self,_cmd){});rb_define_method(rb_cArray,'map!',function(self,_cmd){});rb_define_method(rb_cArray,'select',function(self,_cmd){});rb_define_method(rb_cArray,'values_at',function(self,_cmd){});rb_define_method(rb_cArray,'delete',function(self,_cmd,obj){return self.splice(self.indexOf(obj),1)});rb_define_method(rb_cArray,'delete_at',function(self,_cmd){});rb_define_method(rb_cArray,'delete_if',function(self,_cmd){});rb_define_method(rb_cArray,'reject',function(self,_cmd){});rb_define_method(rb_cArray,'reject!',function(self,_cmd){});rb_define_method(rb_cArray,'zip',function(self,_cmd){});rb_define_method(rb_cArray,'trnaspose',function(self,_cmd){});rb_define_method(rb_cArray,'replace',function(self,_cmd){});rb_define_method(rb_cArray,'clear',function(self,_cmd){});rb_define_method(rb_cArray,'fill',function(self,_cmd){});rb_define_method(rb_cArray,'include?',function(self,_cmd,obj){return(self.indexOf(obj)==-1)?false:true;});rb_define_method(rb_cArray,'<=>',function(self,_cmd){});rb_define_method(rb_cArray,'slice',function(self,_cmd){});rb_define_method(rb_cArray,'slice!',function(self,_cmd){});rb_define_method(rb_cArray,'assoc',function(self,_cmd){});rb_define_method(rb_cArray,'rassoc',function(self,_cmd){});rb_define_method(rb_cArray,'+',function(self,_cmd){});rb_define_method(rb_cArray,'*',function(self,_cmd){});rb_define_method(rb_cArray,'-',function(self,_cmd){});rb_define_method(rb_cArray,'&',function(self,_cmd){});rb_define_method(rb_cArray,'|',function(self,_cmd){});rb_define_method(rb_cArray,'uniq',function(self,_cmd){});rb_define_method(rb_cArray,'uniq!',function(self,_cmd){});rb_define_method(rb_cArray,'compact',function(self,_cmd){});rb_define_method(rb_cArray,'compact!',function(self,_cmd){});rb_define_method(rb_cArray,'flatten',function(self,_cmd){});rb_define_method(rb_cArray,'flatten!',function(self,_cmd){});rb_define_method(rb_cArray,'count',function(self,_cmd){});rb_define_method(rb_cArray,'shuffle',function(self,_cmd){});rb_define_method(rb_cArray,'shuffle!',function(self,_cmd){});rb_define_method(rb_cArray,'sample',function(self,_cmd){});rb_define_method(rb_cArray,'cycle',function(self,_cmd){});rb_define_method(rb_cArray,'permutation',function(self,_cmd){});rb_define_method(rb_cArray,'combination',function(self,_cmd){});rb_define_method(rb_cArray,'product',function(self,_cmd){});rb_define_method(rb_cArray,'take',function(self,_cmd){});rb_define_method(rb_cArray,'take_while',function(self,_cmd){});rb_define_method(rb_cArray,'drop',function(self,_cmd){});rb_define_method(rb_cArray,'drop_while',function(self,_cmd){});

var rb_cBoolean=cBoolean;Boolean.prototype.$klass=rb_cBoolean;Boolean.prototype.$type=T_BOOLEAN;rb_define_method(rb_cBoolean,'to_s',function(self,_cmd){return self?'true':'false';});rb_define_method(rb_cBoolean,'&',function(self,_cmd,obj){return(self)?(obj?true:false):false;});rb_define_method(rb_cBoolean,'|',function(self,_cmd,obj){return(self)?true:(obj?true:false);});rb_define_method(rb_cBoolean,'^',function(self,_cmd,obj){return self?(obj?false:true):(obj?true:false);});

var rb_cHash=RClass.define('Hash',rb_cObject);function rb_hash_new(self,_cmd){return new RHash();};rb_cHash.$define_alloc_func(function(){return new RHash();});rb_define_singleton_method(rb_cHash,"[]",function(self,_cmd){});rb_define_singleton_method(rb_cHash,"try_convert",function(self,_cmd){});rb_define_method(rb_cHash,"initialize",function(self,_cmd){if(arguments.length>0){self.ifnone=arguments[0];}});rb_define_method(rb_cHash,"initialize_copy",function(self,_cmd){});rb_define_method(rb_cHash,"rehash",function(self,_cmd){});rb_define_method(rb_cHash,"to_hash",function(self,_cmd){return self;});rb_define_method(rb_cHash,"to_a",function(self,_cmd){});rb_define_method(rb_cHash,"to_ary",function(self,_cmd){});rb_define_method(rb_cHash,"to_s",function(self,_cmd){});rb_define_method(rb_cHash,"inspect",function(self,_cmd){});rb_define_method(rb_cHash,"==",function(self,_cmd){});rb_define_method(rb_cHash,"[]",function(self,_cmd,key){if(!self.values.hasOwnProperty(key.toString())){return self.ifnone;}
return self.values[key.toString()];});rb_define_method(rb_cHash,"hash",function(self,_cmd){});rb_define_method(rb_cHash,"eql?",function(self,_cmd){});rb_define_method(rb_cHash,"fetch",function(self,_cmd){});rb_define_method(rb_cHash,"[]=",function(self,_cmd,key,value){return rb_funcall(self,'store',key,value);});rb_define_method(rb_cHash,"store",function(self,_cmd,key,val){if(self.values[key.toString()]===undefined){self.keys.push(key.toString());}
self.values[key.toString()]=val;return val;});rb_define_method(rb_cHash,"default",function(self,_cmd){return self.ifnone;});rb_define_method(rb_cHash,"default=",function(self,_cmd,val){return self.ifnone=val;});rb_define_method(rb_cHash,"default_proc",function(self,_cmd){});rb_define_method(rb_cHash,"default_proc=",function(self,_cmd){});rb_define_method(rb_cHash,"key",function(self,_cmd){});rb_define_method(rb_cHash,"index",function(self,_cmd){});rb_define_method(rb_cHash,"size",function(self,_cmd){});rb_define_method(rb_cHash,"length",function(self,_cmd){});rb_define_method(rb_cHash,"empty?",function(self,_cmd){});rb_define_method(rb_cHash,"each_value",function(self,_cmd){});rb_define_method(rb_cHash,"each_key",function(self,_cmd){});rb_define_method(rb_cHash,"each_pair",function(self,_cmd){});rb_define_method(rb_cHash,"each",function(self,_cmd,block){for(var i=0;i<self.keys.length;i++){block(self.keys[i],self.values[self.keys[i]]);}
return self;});rb_define_method(rb_cHash,"keys",function(self,_cmd){});rb_define_method(rb_cHash,"values",function(self,_cmd){});rb_define_method(rb_cHash,"values_at",function(self,_cmd){});rb_define_method(rb_cHash,"shift",function(self,_cmd){});rb_define_method(rb_cHash,"delete",function(self,_cmd){});rb_define_method(rb_cHash,"delete_if",function(self,_cmd){});rb_define_method(rb_cHash,"select",function(self,_cmd){});rb_define_method(rb_cHash,"reject",function(self,_cmd){});rb_define_method(rb_cHash,"reject!",function(self,_cmd){});rb_define_method(rb_cHash,"clear",function(self,_cmd){});rb_define_method(rb_cHash,"invert",function(self,_cmd){});rb_define_method(rb_cHash,"update",function(self,_cmd){});rb_define_method(rb_cHash,"replace",function(self,_cmd){});rb_define_method(rb_cHash,"merge!",function(self,_cmd){});rb_define_method(rb_cHash,"merge",function(self,_cmd){});rb_define_method(rb_cHash,"assoc",function(self,_cmd){});rb_define_method(rb_cHash,"rassoc",function(self,_cmd){});rb_define_method(rb_cHash,"include?",function(self,_cmd){});rb_define_method(rb_cHash,"member?",function(self,_cmd){});rb_define_method(rb_cHash,"has_key?",function(self,_cmd,key){if(!self.values.hasOwnProperty(key)){return false;}
return true;});rb_define_method(rb_cHash,"has_value?",function(self,_cmd){});rb_define_method(rb_cHash,"key?",function(self,_cmd,key){return rb_funcall(self,'has_key?',key);});rb_define_method(rb_cHash,"value?",function(self,_cmd){});rb_define_method(rb_cHash,"compare_by_identity",function(self,_cmd){});rb_define_method(rb_cHash,"compare_by_identity?",function(self,_cmd){});

var rb_cRange=cRange;VN.$r=function(start,ending,exclusive){return rb_funcall(rb_cRange,'new',start,ending,exclusive);};rb_define_method(rb_cRange,'initialize',function(self,_cmd,start,ending,exclusive){rb_ivar_set(self,'@start',start);rb_ivar_set(self,'@ending',ending);});rb_define_method(rb_cRange,'initialize_copy',function(self,_cmd){});rb_define_method(rb_cRange,'==',function(self,_cmd){});rb_define_method(rb_cRange,'===',function(self,_cmd){});rb_define_method(rb_cRange,'eql?',function(self,_cmd){});rb_define_method(rb_cRange,'hash',function(self,_cmd){});rb_define_method(rb_cRange,'each',function(self,_cmd,block){var start=rb_ivar_get(self,'@start');var ending=rb_ivar_get(self,'@ending');for(var i=start;i<=ending;i++){rb_funcall(block,'call',i);}
return self;});rb_define_method(rb_cRange,'step',function(self,_cmd){});rb_define_method(rb_cRange,'begin',function(self,_cmd){});rb_define_method(rb_cRange,'first',function(self,_cmd){return rb_ivar_get(self,'@start');});rb_define_method(rb_cRange,'end',function(self,_cmd){});rb_define_method(rb_cRange,'last',function(self,_cmd){return rb_ivar_get(self,'@ending');});rb_define_method(rb_cRange,'min',function(self,_cmd){});rb_define_method(rb_cRange,'max',function(self,_cmd){});rb_define_method(rb_cRange,'to_s',function(self,_cmd){});rb_define_method(rb_cRange,'inspect',function(self,_cmd){});rb_define_method(rb_cRange,'exclude_end?',function(self,_cmd){});rb_define_method(rb_cRange,'member?',function(self,_cmd){});rb_define_method(rb_cRange,'include?',function(self,_cmd){});rb_define_method(rb_cRange,'cover?',function(self,_cmd){});

var rb_cProc=cProc;Function.prototype.$klass=rb_cProc
Function.prototype.$type=T_PROC;rb_define_singleton_method(rb_cProc,'new',function(self,_cmd){});rb_define_method(rb_cProc,'call',function(self,_cmd){return self.apply(self,[arguments[2]]);});rb_define_method(rb_cProc,'[]',function(self,_cmd){});rb_define_method(rb_cProc,'===',function(self,_cmd){});rb_define_method(rb_cProc,'yield',function(self,_cmd){});rb_define_method(rb_cProc,'to_proc',function(self,_cmd){});rb_define_method(rb_cProc,'arity',function(self,_cmd){});rb_define_method(rb_cProc,'clone',function(self,_cmd){});rb_define_method(rb_cProc,'dup',function(self,_cmd){});rb_define_method(rb_cProc,'==',function(self,_cmd){});rb_define_method(rb_cProc,'eql?',function(self,_cmd){});rb_define_method(rb_cProc,'hash',function(self,_cmd){});rb_define_method(rb_cProc,'to_s',function(self,_cmd){});rb_define_method(rb_cProc,'lambda?',function(self,_cmd){});rb_define_method(rb_cProc,'binding',function(self,_cmd){});rb_define_method(rb_cProc,'curry',function(self,_cmd){});rb_define_method(rb_cProc,'source_location',function(self,_cmd){});

var rb_mMath=RModule.define('Math');rb_mMath.$define_const('PI',3.142);rb_mMath.$define_const('E',0.000001);rb_define_singleton_method(rb_mMath,'min',function(self,_cmd,a,b){return a<b?a:b;});rb_define_singleton_method(rb_mMath,'max',function(self,_cmd,a,b){return a>b?a:b;});

var vn_resource_stack={};

var rb_top_self=VN.obj_alloc(rb_cObject);VN.self=rb_top_self;rb_define_singleton_method(rb_top_self,'to_s',function(self,_cmd){return'main';});

var rb_cNilClass=cNilClass;rb_define_method(rb_cNilClass,'nil?',function(self,_cmd){return true;});rb_define_method(rb_cNilClass,'to_i',function(self,_cmd){return 0;});rb_define_method(rb_cNilClass,'to_f',function(self,_cmd){return 0.0;});rb_define_method(rb_cNilClass,'to_s',function(self,_cmd){return'nil';});rb_define_method(rb_cNilClass,'to_a',function(self,_cmd){return[];});rb_define_method(rb_cNilClass,'inspect',function(self,_cmd){return nil;});rb_define_method(rb_cNilClass,'&',function(self,_cmd,obj){return false;});rb_define_method(rb_cNilClass,'|',function(self,_cmd,obj){});rb_define_method(rb_cNilClass,'^',function(self,_cmd,obj){});
nil=VN$(cObject.$k_g('NilClass'),'new');nil.toString=function(){return'nil';};

var vn_cBundle=rb_define_class('Bundle',rb_cObject);var vn_all_bundles=rb_hash_new();rb_ivar_set(vn_cBundle,'@all_bundles',vn_all_bundles);function vn_bundle_create_from_parse_text(bundle_text){var url_mapper=function(){var str_len=marker_count();var url=get_next(marker_count());var url_map=get_next(marker_count());rb_funcall(rb_ivar_get(result,'@url_map'),'store',url,url_map);};var resource_mapper=function(){var str_len=marker_count();var resource=get_next(marker_count());var resource_map=get_next(marker_count());rb_funcall(rb_ivar_get(result,'@resources'),'store',resource,resource_map);};var bundle_path=function(){var str_len=marker_count();var str=get_next(str_len);return str;};var code=function(){var str_len=marker_count();var str=get_next(str_len);return str;};var next=function(c){if(c&&c!==ch){console.log('bundle parse error: Expected '+c+', but instead got '+ch);}
ch=text.charAt(at);at+=1;return ch;};var get_next=function(i){var result=text.substr(at,i);at+=i;return result;};var marker_count=function(){var len='';next();while(ch>='0'&&ch<='9'){len+=ch;next();}
return parseInt(len);};var result=rb_funcall(vn_cBundle,'new');var at=0;var ch='';var text=bundle_text;var bundle_format=(function(){var marker=text.indexOf('$',at);var format=text.substr(at,marker-at);at=marker+1;return format;})();var bundle_version=(function(){var marker=text.indexOf('$',at);var version=text.substr(at,marker-at);at=marker+1;return version;})();while(next()){switch(ch){case'p':var path=bundle_path()
rb_ivar_set(result,'@bundle_path',path);break;case'c':var code_fragment=code();rb_ivar_get(result,'@executable_codes').push(code_fragment);break;case'u':url_mapper();break;case'r':resource_mapper();break;default:console.log('wtf? bundle parse unknown marker - '+ch);return result;}};return result;};function vn_bundle_finish_loading(a_bundle){rb_ivar_set(a_bundle,'@info_dictionary',vn_binary_plist_parse(rb_funcall(rb_ivar_get(a_bundle,'@resources'),'[]','info.yml')));var codes=rb_ivar_get(a_bundle,'@executable_codes');while(codes.length){window.vn_current_bundle=a_bundle;eval(codes.pop());}};function vn_bundle_initialize(self,_cmd){rb_ivar_set(self,'@executable_codes',[]);rb_ivar_set(self,'@resources',rb_hash_new());rb_ivar_set(self,'@url_map',rb_hash_new());};rb_define_method(vn_cBundle,'initialize',vn_bundle_initialize);

function JSONParserReformatter(object)
{var hash=new RHash();for(var prop in object){var val=object[prop];if(val==null){val=nil;}
else if(val.$klass==cArray){val=JSONParserReformatterArray(val);}
else if(val.constructor==Object){val=JSONParserReformatter(val);}
VN$(hash,'store',prop,val);}
return hash;}
function JSONParserReformatterArray(array){for(var i=0;i<array.length;i++){if(array[i]==null){array[i]=nil;}
else if(array[i].$klass==cArray){array[i]=JSONParserReformatterArray(array[i]);}
else if(array[i].constructor==Object){array[i]=JSONParserReformatter(array[i]);}}
return array;}
function JSONParserParse(parse_text)
{var at,ch,escapee={'"':'"','\\':'\\','/':'/',b:'\b',f:'\f',n:'\n',r:'\r',t:'\t'},text;var error=function(m)
{console.log("message:"+m+"...... at:"+at+" /////// text:");};var next=function(c)
{if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'");}
ch=text.charAt(at);at+=1;return ch;};var number=function()
{var number,string='';if(ch==='-'){string='-';next('-');}
while(ch>='0'&&ch<='9'){string+=ch;next();}
if(ch==='.'){string+='.';while(next()&&ch>='0'&&ch<='9'){string+=ch;}}
if(ch==='e'||ch==='E'){string+=ch;next();if(ch==='-'||ch==='+'){string+=ch;next();}
while(ch>='0'&&ch<='9'){string+=ch;next();}}
number=+string;if(isNaN(number)){error("Bad number");}else{return number;}};var string=function()
{var hex,i,string='',uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string;}else if(ch==='\\'){next();if(ch==='u'){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break;}
uffff=uffff*16+hex;}
string+=String.fromCharCode(uffff);}else if(typeof escapee[ch]==='string'){string+=escapee[ch];}else{break;}}else{string+=ch;}}}
error("Bad string");};var white=function()
{while(ch&&ch<=' '){next();}};var word=function()
{switch(ch){case't':next('t');next('r');next('u');next('e');return true;case'f':next('f');next('a');next('l');next('s');next('e');return false;case'n':next('n');next('u');next('l');next('l');return nil;}
error("Unexpected '"+ch+"'");};var value;var array=function()
{var array=[];if(ch==='['){next('[');white();if(ch===']'){next(']');return array;}
while(ch){array.push(value());white();if(ch===']'){next(']');return array;}
next(',');white();}}
error("Bad array");};var dictionary=function()
{var key;var newDict=new RHash();if(ch==='{'){next('{');white();if(ch==='}'){next('}');return newDict;}
while(ch){key=string();white();next(':');if(VN$(newDict,'has_key?',key)){error('Duplicate key "'+key+'"');}
VN$(newDict,'store',key,value());white();if(ch==='}'){next('}');return newDict;}
next(',');white();}}
error("Bad dictionary");};var value=function()
{white();switch(ch){case'{':return dictionary();case'[':return array();case'"':return string();case'-':return number();default:return ch>='0'&&ch<='9'?number():word();}};var result;text=parse_text;at=0;ch=' ';result=value();white();if(ch){error("Syntax error");}
return result;}

function vn_yaml_quick_parse_text(parse_text){var hash=function(c){var result=rb_hash_new();var hash_len=marker_count();for(var i=0;i<hash_len;i++){var key=value();var val=value();rb_funcall(result,'store',key,val);}
return result;};var array=function(c){var result=[];var arr_len=marker_count();for(var i=0;i<arr_len;i++){result.push(value());}
return result;};var int_number=function(c){var int_len=marker_count();return parseInt(get_next(int_len));};var float_number=function(c){var float_len=marker_count();return parseFloat(get_next(float_len));};var string=function(c){var str_len=marker_count();var string=get_next(str_len);return string;};var true_boolean=function(c){next();return true;};var false_boolean=function(c){next();return false;};var nil_object=function(c){next();return null;};var value=function(){next();switch(ch){case'h':return hash();case'a':return array();case'i':return int_number();case'd':return float_number();case's':return string();case't':return true_boolean();case'f':return false_boolean();case'~':return nil_object();}};var next=function(c){if(c&&c!==ch){console.log("yaml parse error! Expected "+c+" instead of "+ch)}
ch=text.charAt(at);at+=1;return ch;};var get_next=function(i){var result=text.substr(at,i);at+=i;return result;};var marker_count=function(){var len='';next();while(ch>='0'&&ch<='9'){len+=ch;next();}
return parseInt(len);};var at=0;var ch='';var text=parse_text
var result=value();return result;};

function vn_binary_plist_parse(parse_text){var hash=function(c){var result=rb_hash_new();var hash_len=marker_count();for(var i=0;i<hash_len;i++){var key=value();var val=value();rb_funcall(result,'store',key,val);}
return result;};var array=function(c){var result=[];var arr_len=marker_count();for(var i=0;i<arr_len;i++){result.push(value());}
return result;};var int_number=function(c){var int_len=marker_count();return parseInt(get_next(int_len));};var float_number=function(c){var float_len=marker_count();return parseFloat(get_next(float_len));};var string=function(c){var str_len=marker_count();var string=get_next(str_len);return string;};var true_boolean=function(c){next();return true;};var false_boolean=function(c){next();return false;};var nil_object=function(c){next();return null;};var value=function(){next();switch(ch){case'h':return hash();case'a':return array();case'i':return int_number();case'd':return float_number();case's':return string();case't':return true_boolean();case'f':return false_boolean();case'~':return nil_object();}};var next=function(c){if(c&&c!==ch){console.log("plist error! Expected "+c+" instead of "+ch)}
ch=text.charAt(at);at+=1;return ch;};var get_next=function(i){var result=text.substr(at,i);at+=i;return result;};var marker_count=function(){var len='';next();while(ch>='0'&&ch<='9'){len+=ch;next();}
return parseInt(len);};var plist_format=function(){var marker=text.indexOf('$',at);var format=text.substr(at,marker-at);at=marker+1;return format;};var plist_version=function(){var marker=text.indexOf('$',at);var version=text.substr(at,marker-at);at=marker+1;return version;};var at=0;var ch='';var text=parse_text;var format=plist_format();var version=plist_version();var result=value();return result;};

function vn_lib(path,load_callback){this.path=path;this.load_callback=load_callback;this.bundles=[];this.executable_codes=[];};vn_lib.prototype.load=function(){var lib=this;var request=new XMLHttpRequest();request.open("GET",this.path,true);request.onreadystatechange=function(){if(request.readyState==4){lib.parse(request.responseText);lib.finish_loading();lib.load_callback(lib);}}
request.send(null)};vn_lib.prototype.finish_loading=function(){for(var i=0;i<this.executable_codes.length;i++){eval(this.executable_codes[i]);}
for(var b=0;b<this.bundles.length;b++){vn_bundle_finish_loading(this.bundles[b]);}
rb_funcall(rb_cObject.$iv_tbl.Vienna,'ApplicationMain');};vn_lib.prototype.add_environment_keys=function(hash){};vn_lib.prototype.add_executable_code=function(str){this.executable_codes.push(str);};vn_lib.prototype.add_bundle=function(bundle_text){var the_bundle=vn_bundle_create_from_parse_text(bundle_text);this.bundles.push(the_bundle);rb_funcall(vn_all_bundles,'store',rb_ivar_get(the_bundle,'@bundle_path'),the_bundle);};vn_lib.prototype.parse=function(parse_text){var environment=function(){var str_len=marker_count();var str=get_next(str_len);return vn_yaml_quick_parse_text(str);};var code=function(){var str_len=marker_count();var str=get_next(str_len);return str;};var bundle=function(){var str_len=marker_count();var str=get_next(str_len);return str;};var next=function(c){if(c&&c!==ch){console.log('file parse error: Expected '+c+', but instead got '+ch);}
ch=text.charAt(at);at+=1;return ch;};var get_next=function(i){var result=text.substr(at,i);at+=i;return result;};var marker_count=function(){var len='';next();while(ch>='0'&&ch<='9'){len+=ch;next();}
return parseInt(len);};var lib_format=function(){var marker=text.indexOf('$',at);var format=text.substr(at,marker-at);at=marker+1;return format;};var lib_version=function(){var marker=text.indexOf('$',at);var version=text.substr(at,marker-at);at=marker+1;return version;};var at=0;var ch='';var text=parse_text;var format=lib_format();var version=lib_version();while(next()){switch(ch){case'e':this.add_environment_keys(environment());break;case'c':this.add_executable_code(code());break;case'b':this.add_bundle(bundle());break;default:console.log('wtf? lib parse unknown marker');return;}};};

rb_oENV=VN.$h('display_mode','render','image_dir','images');rb_cObject.$c_s('ENV',rb_oENV);
function vn_bootstrap_main(){if(true){var lib_path="document_application_html5.js";var lib=new vn_lib(lib_path,function(lib){console.log('lib loaded callback!');});lib.load();}else{}};window.onload=vn_bootstrap_main;